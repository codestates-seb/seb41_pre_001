{"ast":null,"code":"'use strict';\n\nvar _classCallCheck = require(\"/home/kty/workspace/seb41_pre_001/client/node_modules/@babel/runtime/helpers/classCallCheck.js\").default;\nvar _createClass = require(\"/home/kty/workspace/seb41_pre_001/client/node_modules/@babel/runtime/helpers/createClass.js\").default;\nvar _defineProperty = require(\"/home/kty/workspace/seb41_pre_001/client/node_modules/@babel/runtime/helpers/defineProperty.js\").default;\nvar _INSERTION_MODE_RESET, _TEMPLATE_INSERTION_M, _INITIAL_MODE, _BEFORE_HTML_MODE, _BEFORE_HEAD_MODE, _IN_HEAD_MODE, _IN_HEAD_NO_SCRIPT_MO, _AFTER_HEAD_MODE, _IN_BODY_MODE, _TEXT_MODE, _IN_TABLE_MODE, _IN_TABLE_TEXT_MODE, _IN_CAPTION_MODE, _IN_COLUMN_GROUP_MODE, _IN_TABLE_BODY_MODE, _IN_ROW_MODE, _IN_CELL_MODE, _IN_SELECT_MODE, _IN_SELECT_IN_TABLE_M, _IN_TEMPLATE_MODE, _AFTER_BODY_MODE, _IN_FRAMESET_MODE, _AFTER_FRAMESET_MODE, _AFTER_AFTER_BODY_MOD, _AFTER_AFTER_FRAMESET, _TOKEN_HANDLERS;\nvar Tokenizer = require('../tokenizer');\nvar OpenElementStack = require('./open-element-stack');\nvar FormattingElementList = require('./formatting-element-list');\nvar LocationInfoParserMixin = require('../extensions/location-info/parser-mixin');\nvar ErrorReportingParserMixin = require('../extensions/error-reporting/parser-mixin');\nvar Mixin = require('../utils/mixin');\nvar defaultTreeAdapter = require('../tree-adapters/default');\nvar mergeOptions = require('../utils/merge-options');\nvar doctype = require('../common/doctype');\nvar foreignContent = require('../common/foreign-content');\nvar ERR = require('../common/error-codes');\nvar unicode = require('../common/unicode');\nvar HTML = require('../common/html');\n\n//Aliases\nvar $ = HTML.TAG_NAMES;\nvar NS = HTML.NAMESPACES;\nvar ATTRS = HTML.ATTRS;\nvar DEFAULT_OPTIONS = {\n  scriptingEnabled: true,\n  sourceCodeLocationInfo: false,\n  onParseError: null,\n  treeAdapter: defaultTreeAdapter\n};\n\n//Misc constants\nvar HIDDEN_INPUT_TYPE = 'hidden';\n\n//Adoption agency loops iteration count\nvar AA_OUTER_LOOP_ITER = 8;\nvar AA_INNER_LOOP_ITER = 3;\n\n//Insertion modes\nvar INITIAL_MODE = 'INITIAL_MODE';\nvar BEFORE_HTML_MODE = 'BEFORE_HTML_MODE';\nvar BEFORE_HEAD_MODE = 'BEFORE_HEAD_MODE';\nvar IN_HEAD_MODE = 'IN_HEAD_MODE';\nvar IN_HEAD_NO_SCRIPT_MODE = 'IN_HEAD_NO_SCRIPT_MODE';\nvar AFTER_HEAD_MODE = 'AFTER_HEAD_MODE';\nvar IN_BODY_MODE = 'IN_BODY_MODE';\nvar TEXT_MODE = 'TEXT_MODE';\nvar IN_TABLE_MODE = 'IN_TABLE_MODE';\nvar IN_TABLE_TEXT_MODE = 'IN_TABLE_TEXT_MODE';\nvar IN_CAPTION_MODE = 'IN_CAPTION_MODE';\nvar IN_COLUMN_GROUP_MODE = 'IN_COLUMN_GROUP_MODE';\nvar IN_TABLE_BODY_MODE = 'IN_TABLE_BODY_MODE';\nvar IN_ROW_MODE = 'IN_ROW_MODE';\nvar IN_CELL_MODE = 'IN_CELL_MODE';\nvar IN_SELECT_MODE = 'IN_SELECT_MODE';\nvar IN_SELECT_IN_TABLE_MODE = 'IN_SELECT_IN_TABLE_MODE';\nvar IN_TEMPLATE_MODE = 'IN_TEMPLATE_MODE';\nvar AFTER_BODY_MODE = 'AFTER_BODY_MODE';\nvar IN_FRAMESET_MODE = 'IN_FRAMESET_MODE';\nvar AFTER_FRAMESET_MODE = 'AFTER_FRAMESET_MODE';\nvar AFTER_AFTER_BODY_MODE = 'AFTER_AFTER_BODY_MODE';\nvar AFTER_AFTER_FRAMESET_MODE = 'AFTER_AFTER_FRAMESET_MODE';\n\n//Insertion mode reset map\nvar INSERTION_MODE_RESET_MAP = (_INSERTION_MODE_RESET = {}, _defineProperty(_INSERTION_MODE_RESET, $.TR, IN_ROW_MODE), _defineProperty(_INSERTION_MODE_RESET, $.TBODY, IN_TABLE_BODY_MODE), _defineProperty(_INSERTION_MODE_RESET, $.THEAD, IN_TABLE_BODY_MODE), _defineProperty(_INSERTION_MODE_RESET, $.TFOOT, IN_TABLE_BODY_MODE), _defineProperty(_INSERTION_MODE_RESET, $.CAPTION, IN_CAPTION_MODE), _defineProperty(_INSERTION_MODE_RESET, $.COLGROUP, IN_COLUMN_GROUP_MODE), _defineProperty(_INSERTION_MODE_RESET, $.TABLE, IN_TABLE_MODE), _defineProperty(_INSERTION_MODE_RESET, $.BODY, IN_BODY_MODE), _defineProperty(_INSERTION_MODE_RESET, $.FRAMESET, IN_FRAMESET_MODE), _INSERTION_MODE_RESET);\n\n//Template insertion mode switch map\nvar TEMPLATE_INSERTION_MODE_SWITCH_MAP = (_TEMPLATE_INSERTION_M = {}, _defineProperty(_TEMPLATE_INSERTION_M, $.CAPTION, IN_TABLE_MODE), _defineProperty(_TEMPLATE_INSERTION_M, $.COLGROUP, IN_TABLE_MODE), _defineProperty(_TEMPLATE_INSERTION_M, $.TBODY, IN_TABLE_MODE), _defineProperty(_TEMPLATE_INSERTION_M, $.TFOOT, IN_TABLE_MODE), _defineProperty(_TEMPLATE_INSERTION_M, $.THEAD, IN_TABLE_MODE), _defineProperty(_TEMPLATE_INSERTION_M, $.COL, IN_COLUMN_GROUP_MODE), _defineProperty(_TEMPLATE_INSERTION_M, $.TR, IN_TABLE_BODY_MODE), _defineProperty(_TEMPLATE_INSERTION_M, $.TD, IN_ROW_MODE), _defineProperty(_TEMPLATE_INSERTION_M, $.TH, IN_ROW_MODE), _TEMPLATE_INSERTION_M);\n\n//Token handlers map for insertion modes\nvar TOKEN_HANDLERS = (_TOKEN_HANDLERS = {}, _defineProperty(_TOKEN_HANDLERS, INITIAL_MODE, (_INITIAL_MODE = {}, _defineProperty(_INITIAL_MODE, Tokenizer.CHARACTER_TOKEN, tokenInInitialMode), _defineProperty(_INITIAL_MODE, Tokenizer.NULL_CHARACTER_TOKEN, tokenInInitialMode), _defineProperty(_INITIAL_MODE, Tokenizer.WHITESPACE_CHARACTER_TOKEN, ignoreToken), _defineProperty(_INITIAL_MODE, Tokenizer.COMMENT_TOKEN, appendComment), _defineProperty(_INITIAL_MODE, Tokenizer.DOCTYPE_TOKEN, doctypeInInitialMode), _defineProperty(_INITIAL_MODE, Tokenizer.START_TAG_TOKEN, tokenInInitialMode), _defineProperty(_INITIAL_MODE, Tokenizer.END_TAG_TOKEN, tokenInInitialMode), _defineProperty(_INITIAL_MODE, Tokenizer.EOF_TOKEN, tokenInInitialMode), _INITIAL_MODE)), _defineProperty(_TOKEN_HANDLERS, BEFORE_HTML_MODE, (_BEFORE_HTML_MODE = {}, _defineProperty(_BEFORE_HTML_MODE, Tokenizer.CHARACTER_TOKEN, tokenBeforeHtml), _defineProperty(_BEFORE_HTML_MODE, Tokenizer.NULL_CHARACTER_TOKEN, tokenBeforeHtml), _defineProperty(_BEFORE_HTML_MODE, Tokenizer.WHITESPACE_CHARACTER_TOKEN, ignoreToken), _defineProperty(_BEFORE_HTML_MODE, Tokenizer.COMMENT_TOKEN, appendComment), _defineProperty(_BEFORE_HTML_MODE, Tokenizer.DOCTYPE_TOKEN, ignoreToken), _defineProperty(_BEFORE_HTML_MODE, Tokenizer.START_TAG_TOKEN, startTagBeforeHtml), _defineProperty(_BEFORE_HTML_MODE, Tokenizer.END_TAG_TOKEN, endTagBeforeHtml), _defineProperty(_BEFORE_HTML_MODE, Tokenizer.EOF_TOKEN, tokenBeforeHtml), _BEFORE_HTML_MODE)), _defineProperty(_TOKEN_HANDLERS, BEFORE_HEAD_MODE, (_BEFORE_HEAD_MODE = {}, _defineProperty(_BEFORE_HEAD_MODE, Tokenizer.CHARACTER_TOKEN, tokenBeforeHead), _defineProperty(_BEFORE_HEAD_MODE, Tokenizer.NULL_CHARACTER_TOKEN, tokenBeforeHead), _defineProperty(_BEFORE_HEAD_MODE, Tokenizer.WHITESPACE_CHARACTER_TOKEN, ignoreToken), _defineProperty(_BEFORE_HEAD_MODE, Tokenizer.COMMENT_TOKEN, appendComment), _defineProperty(_BEFORE_HEAD_MODE, Tokenizer.DOCTYPE_TOKEN, misplacedDoctype), _defineProperty(_BEFORE_HEAD_MODE, Tokenizer.START_TAG_TOKEN, startTagBeforeHead), _defineProperty(_BEFORE_HEAD_MODE, Tokenizer.END_TAG_TOKEN, endTagBeforeHead), _defineProperty(_BEFORE_HEAD_MODE, Tokenizer.EOF_TOKEN, tokenBeforeHead), _BEFORE_HEAD_MODE)), _defineProperty(_TOKEN_HANDLERS, IN_HEAD_MODE, (_IN_HEAD_MODE = {}, _defineProperty(_IN_HEAD_MODE, Tokenizer.CHARACTER_TOKEN, tokenInHead), _defineProperty(_IN_HEAD_MODE, Tokenizer.NULL_CHARACTER_TOKEN, tokenInHead), _defineProperty(_IN_HEAD_MODE, Tokenizer.WHITESPACE_CHARACTER_TOKEN, insertCharacters), _defineProperty(_IN_HEAD_MODE, Tokenizer.COMMENT_TOKEN, appendComment), _defineProperty(_IN_HEAD_MODE, Tokenizer.DOCTYPE_TOKEN, misplacedDoctype), _defineProperty(_IN_HEAD_MODE, Tokenizer.START_TAG_TOKEN, startTagInHead), _defineProperty(_IN_HEAD_MODE, Tokenizer.END_TAG_TOKEN, endTagInHead), _defineProperty(_IN_HEAD_MODE, Tokenizer.EOF_TOKEN, tokenInHead), _IN_HEAD_MODE)), _defineProperty(_TOKEN_HANDLERS, IN_HEAD_NO_SCRIPT_MODE, (_IN_HEAD_NO_SCRIPT_MO = {}, _defineProperty(_IN_HEAD_NO_SCRIPT_MO, Tokenizer.CHARACTER_TOKEN, tokenInHeadNoScript), _defineProperty(_IN_HEAD_NO_SCRIPT_MO, Tokenizer.NULL_CHARACTER_TOKEN, tokenInHeadNoScript), _defineProperty(_IN_HEAD_NO_SCRIPT_MO, Tokenizer.WHITESPACE_CHARACTER_TOKEN, insertCharacters), _defineProperty(_IN_HEAD_NO_SCRIPT_MO, Tokenizer.COMMENT_TOKEN, appendComment), _defineProperty(_IN_HEAD_NO_SCRIPT_MO, Tokenizer.DOCTYPE_TOKEN, misplacedDoctype), _defineProperty(_IN_HEAD_NO_SCRIPT_MO, Tokenizer.START_TAG_TOKEN, startTagInHeadNoScript), _defineProperty(_IN_HEAD_NO_SCRIPT_MO, Tokenizer.END_TAG_TOKEN, endTagInHeadNoScript), _defineProperty(_IN_HEAD_NO_SCRIPT_MO, Tokenizer.EOF_TOKEN, tokenInHeadNoScript), _IN_HEAD_NO_SCRIPT_MO)), _defineProperty(_TOKEN_HANDLERS, AFTER_HEAD_MODE, (_AFTER_HEAD_MODE = {}, _defineProperty(_AFTER_HEAD_MODE, Tokenizer.CHARACTER_TOKEN, tokenAfterHead), _defineProperty(_AFTER_HEAD_MODE, Tokenizer.NULL_CHARACTER_TOKEN, tokenAfterHead), _defineProperty(_AFTER_HEAD_MODE, Tokenizer.WHITESPACE_CHARACTER_TOKEN, insertCharacters), _defineProperty(_AFTER_HEAD_MODE, Tokenizer.COMMENT_TOKEN, appendComment), _defineProperty(_AFTER_HEAD_MODE, Tokenizer.DOCTYPE_TOKEN, misplacedDoctype), _defineProperty(_AFTER_HEAD_MODE, Tokenizer.START_TAG_TOKEN, startTagAfterHead), _defineProperty(_AFTER_HEAD_MODE, Tokenizer.END_TAG_TOKEN, endTagAfterHead), _defineProperty(_AFTER_HEAD_MODE, Tokenizer.EOF_TOKEN, tokenAfterHead), _AFTER_HEAD_MODE)), _defineProperty(_TOKEN_HANDLERS, IN_BODY_MODE, (_IN_BODY_MODE = {}, _defineProperty(_IN_BODY_MODE, Tokenizer.CHARACTER_TOKEN, characterInBody), _defineProperty(_IN_BODY_MODE, Tokenizer.NULL_CHARACTER_TOKEN, ignoreToken), _defineProperty(_IN_BODY_MODE, Tokenizer.WHITESPACE_CHARACTER_TOKEN, whitespaceCharacterInBody), _defineProperty(_IN_BODY_MODE, Tokenizer.COMMENT_TOKEN, appendComment), _defineProperty(_IN_BODY_MODE, Tokenizer.DOCTYPE_TOKEN, ignoreToken), _defineProperty(_IN_BODY_MODE, Tokenizer.START_TAG_TOKEN, startTagInBody), _defineProperty(_IN_BODY_MODE, Tokenizer.END_TAG_TOKEN, endTagInBody), _defineProperty(_IN_BODY_MODE, Tokenizer.EOF_TOKEN, eofInBody), _IN_BODY_MODE)), _defineProperty(_TOKEN_HANDLERS, TEXT_MODE, (_TEXT_MODE = {}, _defineProperty(_TEXT_MODE, Tokenizer.CHARACTER_TOKEN, insertCharacters), _defineProperty(_TEXT_MODE, Tokenizer.NULL_CHARACTER_TOKEN, insertCharacters), _defineProperty(_TEXT_MODE, Tokenizer.WHITESPACE_CHARACTER_TOKEN, insertCharacters), _defineProperty(_TEXT_MODE, Tokenizer.COMMENT_TOKEN, ignoreToken), _defineProperty(_TEXT_MODE, Tokenizer.DOCTYPE_TOKEN, ignoreToken), _defineProperty(_TEXT_MODE, Tokenizer.START_TAG_TOKEN, ignoreToken), _defineProperty(_TEXT_MODE, Tokenizer.END_TAG_TOKEN, endTagInText), _defineProperty(_TEXT_MODE, Tokenizer.EOF_TOKEN, eofInText), _TEXT_MODE)), _defineProperty(_TOKEN_HANDLERS, IN_TABLE_MODE, (_IN_TABLE_MODE = {}, _defineProperty(_IN_TABLE_MODE, Tokenizer.CHARACTER_TOKEN, characterInTable), _defineProperty(_IN_TABLE_MODE, Tokenizer.NULL_CHARACTER_TOKEN, characterInTable), _defineProperty(_IN_TABLE_MODE, Tokenizer.WHITESPACE_CHARACTER_TOKEN, characterInTable), _defineProperty(_IN_TABLE_MODE, Tokenizer.COMMENT_TOKEN, appendComment), _defineProperty(_IN_TABLE_MODE, Tokenizer.DOCTYPE_TOKEN, ignoreToken), _defineProperty(_IN_TABLE_MODE, Tokenizer.START_TAG_TOKEN, startTagInTable), _defineProperty(_IN_TABLE_MODE, Tokenizer.END_TAG_TOKEN, endTagInTable), _defineProperty(_IN_TABLE_MODE, Tokenizer.EOF_TOKEN, eofInBody), _IN_TABLE_MODE)), _defineProperty(_TOKEN_HANDLERS, IN_TABLE_TEXT_MODE, (_IN_TABLE_TEXT_MODE = {}, _defineProperty(_IN_TABLE_TEXT_MODE, Tokenizer.CHARACTER_TOKEN, characterInTableText), _defineProperty(_IN_TABLE_TEXT_MODE, Tokenizer.NULL_CHARACTER_TOKEN, ignoreToken), _defineProperty(_IN_TABLE_TEXT_MODE, Tokenizer.WHITESPACE_CHARACTER_TOKEN, whitespaceCharacterInTableText), _defineProperty(_IN_TABLE_TEXT_MODE, Tokenizer.COMMENT_TOKEN, tokenInTableText), _defineProperty(_IN_TABLE_TEXT_MODE, Tokenizer.DOCTYPE_TOKEN, tokenInTableText), _defineProperty(_IN_TABLE_TEXT_MODE, Tokenizer.START_TAG_TOKEN, tokenInTableText), _defineProperty(_IN_TABLE_TEXT_MODE, Tokenizer.END_TAG_TOKEN, tokenInTableText), _defineProperty(_IN_TABLE_TEXT_MODE, Tokenizer.EOF_TOKEN, tokenInTableText), _IN_TABLE_TEXT_MODE)), _defineProperty(_TOKEN_HANDLERS, IN_CAPTION_MODE, (_IN_CAPTION_MODE = {}, _defineProperty(_IN_CAPTION_MODE, Tokenizer.CHARACTER_TOKEN, characterInBody), _defineProperty(_IN_CAPTION_MODE, Tokenizer.NULL_CHARACTER_TOKEN, ignoreToken), _defineProperty(_IN_CAPTION_MODE, Tokenizer.WHITESPACE_CHARACTER_TOKEN, whitespaceCharacterInBody), _defineProperty(_IN_CAPTION_MODE, Tokenizer.COMMENT_TOKEN, appendComment), _defineProperty(_IN_CAPTION_MODE, Tokenizer.DOCTYPE_TOKEN, ignoreToken), _defineProperty(_IN_CAPTION_MODE, Tokenizer.START_TAG_TOKEN, startTagInCaption), _defineProperty(_IN_CAPTION_MODE, Tokenizer.END_TAG_TOKEN, endTagInCaption), _defineProperty(_IN_CAPTION_MODE, Tokenizer.EOF_TOKEN, eofInBody), _IN_CAPTION_MODE)), _defineProperty(_TOKEN_HANDLERS, IN_COLUMN_GROUP_MODE, (_IN_COLUMN_GROUP_MODE = {}, _defineProperty(_IN_COLUMN_GROUP_MODE, Tokenizer.CHARACTER_TOKEN, tokenInColumnGroup), _defineProperty(_IN_COLUMN_GROUP_MODE, Tokenizer.NULL_CHARACTER_TOKEN, tokenInColumnGroup), _defineProperty(_IN_COLUMN_GROUP_MODE, Tokenizer.WHITESPACE_CHARACTER_TOKEN, insertCharacters), _defineProperty(_IN_COLUMN_GROUP_MODE, Tokenizer.COMMENT_TOKEN, appendComment), _defineProperty(_IN_COLUMN_GROUP_MODE, Tokenizer.DOCTYPE_TOKEN, ignoreToken), _defineProperty(_IN_COLUMN_GROUP_MODE, Tokenizer.START_TAG_TOKEN, startTagInColumnGroup), _defineProperty(_IN_COLUMN_GROUP_MODE, Tokenizer.END_TAG_TOKEN, endTagInColumnGroup), _defineProperty(_IN_COLUMN_GROUP_MODE, Tokenizer.EOF_TOKEN, eofInBody), _IN_COLUMN_GROUP_MODE)), _defineProperty(_TOKEN_HANDLERS, IN_TABLE_BODY_MODE, (_IN_TABLE_BODY_MODE = {}, _defineProperty(_IN_TABLE_BODY_MODE, Tokenizer.CHARACTER_TOKEN, characterInTable), _defineProperty(_IN_TABLE_BODY_MODE, Tokenizer.NULL_CHARACTER_TOKEN, characterInTable), _defineProperty(_IN_TABLE_BODY_MODE, Tokenizer.WHITESPACE_CHARACTER_TOKEN, characterInTable), _defineProperty(_IN_TABLE_BODY_MODE, Tokenizer.COMMENT_TOKEN, appendComment), _defineProperty(_IN_TABLE_BODY_MODE, Tokenizer.DOCTYPE_TOKEN, ignoreToken), _defineProperty(_IN_TABLE_BODY_MODE, Tokenizer.START_TAG_TOKEN, startTagInTableBody), _defineProperty(_IN_TABLE_BODY_MODE, Tokenizer.END_TAG_TOKEN, endTagInTableBody), _defineProperty(_IN_TABLE_BODY_MODE, Tokenizer.EOF_TOKEN, eofInBody), _IN_TABLE_BODY_MODE)), _defineProperty(_TOKEN_HANDLERS, IN_ROW_MODE, (_IN_ROW_MODE = {}, _defineProperty(_IN_ROW_MODE, Tokenizer.CHARACTER_TOKEN, characterInTable), _defineProperty(_IN_ROW_MODE, Tokenizer.NULL_CHARACTER_TOKEN, characterInTable), _defineProperty(_IN_ROW_MODE, Tokenizer.WHITESPACE_CHARACTER_TOKEN, characterInTable), _defineProperty(_IN_ROW_MODE, Tokenizer.COMMENT_TOKEN, appendComment), _defineProperty(_IN_ROW_MODE, Tokenizer.DOCTYPE_TOKEN, ignoreToken), _defineProperty(_IN_ROW_MODE, Tokenizer.START_TAG_TOKEN, startTagInRow), _defineProperty(_IN_ROW_MODE, Tokenizer.END_TAG_TOKEN, endTagInRow), _defineProperty(_IN_ROW_MODE, Tokenizer.EOF_TOKEN, eofInBody), _IN_ROW_MODE)), _defineProperty(_TOKEN_HANDLERS, IN_CELL_MODE, (_IN_CELL_MODE = {}, _defineProperty(_IN_CELL_MODE, Tokenizer.CHARACTER_TOKEN, characterInBody), _defineProperty(_IN_CELL_MODE, Tokenizer.NULL_CHARACTER_TOKEN, ignoreToken), _defineProperty(_IN_CELL_MODE, Tokenizer.WHITESPACE_CHARACTER_TOKEN, whitespaceCharacterInBody), _defineProperty(_IN_CELL_MODE, Tokenizer.COMMENT_TOKEN, appendComment), _defineProperty(_IN_CELL_MODE, Tokenizer.DOCTYPE_TOKEN, ignoreToken), _defineProperty(_IN_CELL_MODE, Tokenizer.START_TAG_TOKEN, startTagInCell), _defineProperty(_IN_CELL_MODE, Tokenizer.END_TAG_TOKEN, endTagInCell), _defineProperty(_IN_CELL_MODE, Tokenizer.EOF_TOKEN, eofInBody), _IN_CELL_MODE)), _defineProperty(_TOKEN_HANDLERS, IN_SELECT_MODE, (_IN_SELECT_MODE = {}, _defineProperty(_IN_SELECT_MODE, Tokenizer.CHARACTER_TOKEN, insertCharacters), _defineProperty(_IN_SELECT_MODE, Tokenizer.NULL_CHARACTER_TOKEN, ignoreToken), _defineProperty(_IN_SELECT_MODE, Tokenizer.WHITESPACE_CHARACTER_TOKEN, insertCharacters), _defineProperty(_IN_SELECT_MODE, Tokenizer.COMMENT_TOKEN, appendComment), _defineProperty(_IN_SELECT_MODE, Tokenizer.DOCTYPE_TOKEN, ignoreToken), _defineProperty(_IN_SELECT_MODE, Tokenizer.START_TAG_TOKEN, startTagInSelect), _defineProperty(_IN_SELECT_MODE, Tokenizer.END_TAG_TOKEN, endTagInSelect), _defineProperty(_IN_SELECT_MODE, Tokenizer.EOF_TOKEN, eofInBody), _IN_SELECT_MODE)), _defineProperty(_TOKEN_HANDLERS, IN_SELECT_IN_TABLE_MODE, (_IN_SELECT_IN_TABLE_M = {}, _defineProperty(_IN_SELECT_IN_TABLE_M, Tokenizer.CHARACTER_TOKEN, insertCharacters), _defineProperty(_IN_SELECT_IN_TABLE_M, Tokenizer.NULL_CHARACTER_TOKEN, ignoreToken), _defineProperty(_IN_SELECT_IN_TABLE_M, Tokenizer.WHITESPACE_CHARACTER_TOKEN, insertCharacters), _defineProperty(_IN_SELECT_IN_TABLE_M, Tokenizer.COMMENT_TOKEN, appendComment), _defineProperty(_IN_SELECT_IN_TABLE_M, Tokenizer.DOCTYPE_TOKEN, ignoreToken), _defineProperty(_IN_SELECT_IN_TABLE_M, Tokenizer.START_TAG_TOKEN, startTagInSelectInTable), _defineProperty(_IN_SELECT_IN_TABLE_M, Tokenizer.END_TAG_TOKEN, endTagInSelectInTable), _defineProperty(_IN_SELECT_IN_TABLE_M, Tokenizer.EOF_TOKEN, eofInBody), _IN_SELECT_IN_TABLE_M)), _defineProperty(_TOKEN_HANDLERS, IN_TEMPLATE_MODE, (_IN_TEMPLATE_MODE = {}, _defineProperty(_IN_TEMPLATE_MODE, Tokenizer.CHARACTER_TOKEN, characterInBody), _defineProperty(_IN_TEMPLATE_MODE, Tokenizer.NULL_CHARACTER_TOKEN, ignoreToken), _defineProperty(_IN_TEMPLATE_MODE, Tokenizer.WHITESPACE_CHARACTER_TOKEN, whitespaceCharacterInBody), _defineProperty(_IN_TEMPLATE_MODE, Tokenizer.COMMENT_TOKEN, appendComment), _defineProperty(_IN_TEMPLATE_MODE, Tokenizer.DOCTYPE_TOKEN, ignoreToken), _defineProperty(_IN_TEMPLATE_MODE, Tokenizer.START_TAG_TOKEN, startTagInTemplate), _defineProperty(_IN_TEMPLATE_MODE, Tokenizer.END_TAG_TOKEN, endTagInTemplate), _defineProperty(_IN_TEMPLATE_MODE, Tokenizer.EOF_TOKEN, eofInTemplate), _IN_TEMPLATE_MODE)), _defineProperty(_TOKEN_HANDLERS, AFTER_BODY_MODE, (_AFTER_BODY_MODE = {}, _defineProperty(_AFTER_BODY_MODE, Tokenizer.CHARACTER_TOKEN, tokenAfterBody), _defineProperty(_AFTER_BODY_MODE, Tokenizer.NULL_CHARACTER_TOKEN, tokenAfterBody), _defineProperty(_AFTER_BODY_MODE, Tokenizer.WHITESPACE_CHARACTER_TOKEN, whitespaceCharacterInBody), _defineProperty(_AFTER_BODY_MODE, Tokenizer.COMMENT_TOKEN, appendCommentToRootHtmlElement), _defineProperty(_AFTER_BODY_MODE, Tokenizer.DOCTYPE_TOKEN, ignoreToken), _defineProperty(_AFTER_BODY_MODE, Tokenizer.START_TAG_TOKEN, startTagAfterBody), _defineProperty(_AFTER_BODY_MODE, Tokenizer.END_TAG_TOKEN, endTagAfterBody), _defineProperty(_AFTER_BODY_MODE, Tokenizer.EOF_TOKEN, stopParsing), _AFTER_BODY_MODE)), _defineProperty(_TOKEN_HANDLERS, IN_FRAMESET_MODE, (_IN_FRAMESET_MODE = {}, _defineProperty(_IN_FRAMESET_MODE, Tokenizer.CHARACTER_TOKEN, ignoreToken), _defineProperty(_IN_FRAMESET_MODE, Tokenizer.NULL_CHARACTER_TOKEN, ignoreToken), _defineProperty(_IN_FRAMESET_MODE, Tokenizer.WHITESPACE_CHARACTER_TOKEN, insertCharacters), _defineProperty(_IN_FRAMESET_MODE, Tokenizer.COMMENT_TOKEN, appendComment), _defineProperty(_IN_FRAMESET_MODE, Tokenizer.DOCTYPE_TOKEN, ignoreToken), _defineProperty(_IN_FRAMESET_MODE, Tokenizer.START_TAG_TOKEN, startTagInFrameset), _defineProperty(_IN_FRAMESET_MODE, Tokenizer.END_TAG_TOKEN, endTagInFrameset), _defineProperty(_IN_FRAMESET_MODE, Tokenizer.EOF_TOKEN, stopParsing), _IN_FRAMESET_MODE)), _defineProperty(_TOKEN_HANDLERS, AFTER_FRAMESET_MODE, (_AFTER_FRAMESET_MODE = {}, _defineProperty(_AFTER_FRAMESET_MODE, Tokenizer.CHARACTER_TOKEN, ignoreToken), _defineProperty(_AFTER_FRAMESET_MODE, Tokenizer.NULL_CHARACTER_TOKEN, ignoreToken), _defineProperty(_AFTER_FRAMESET_MODE, Tokenizer.WHITESPACE_CHARACTER_TOKEN, insertCharacters), _defineProperty(_AFTER_FRAMESET_MODE, Tokenizer.COMMENT_TOKEN, appendComment), _defineProperty(_AFTER_FRAMESET_MODE, Tokenizer.DOCTYPE_TOKEN, ignoreToken), _defineProperty(_AFTER_FRAMESET_MODE, Tokenizer.START_TAG_TOKEN, startTagAfterFrameset), _defineProperty(_AFTER_FRAMESET_MODE, Tokenizer.END_TAG_TOKEN, endTagAfterFrameset), _defineProperty(_AFTER_FRAMESET_MODE, Tokenizer.EOF_TOKEN, stopParsing), _AFTER_FRAMESET_MODE)), _defineProperty(_TOKEN_HANDLERS, AFTER_AFTER_BODY_MODE, (_AFTER_AFTER_BODY_MOD = {}, _defineProperty(_AFTER_AFTER_BODY_MOD, Tokenizer.CHARACTER_TOKEN, tokenAfterAfterBody), _defineProperty(_AFTER_AFTER_BODY_MOD, Tokenizer.NULL_CHARACTER_TOKEN, tokenAfterAfterBody), _defineProperty(_AFTER_AFTER_BODY_MOD, Tokenizer.WHITESPACE_CHARACTER_TOKEN, whitespaceCharacterInBody), _defineProperty(_AFTER_AFTER_BODY_MOD, Tokenizer.COMMENT_TOKEN, appendCommentToDocument), _defineProperty(_AFTER_AFTER_BODY_MOD, Tokenizer.DOCTYPE_TOKEN, ignoreToken), _defineProperty(_AFTER_AFTER_BODY_MOD, Tokenizer.START_TAG_TOKEN, startTagAfterAfterBody), _defineProperty(_AFTER_AFTER_BODY_MOD, Tokenizer.END_TAG_TOKEN, tokenAfterAfterBody), _defineProperty(_AFTER_AFTER_BODY_MOD, Tokenizer.EOF_TOKEN, stopParsing), _AFTER_AFTER_BODY_MOD)), _defineProperty(_TOKEN_HANDLERS, AFTER_AFTER_FRAMESET_MODE, (_AFTER_AFTER_FRAMESET = {}, _defineProperty(_AFTER_AFTER_FRAMESET, Tokenizer.CHARACTER_TOKEN, ignoreToken), _defineProperty(_AFTER_AFTER_FRAMESET, Tokenizer.NULL_CHARACTER_TOKEN, ignoreToken), _defineProperty(_AFTER_AFTER_FRAMESET, Tokenizer.WHITESPACE_CHARACTER_TOKEN, whitespaceCharacterInBody), _defineProperty(_AFTER_AFTER_FRAMESET, Tokenizer.COMMENT_TOKEN, appendCommentToDocument), _defineProperty(_AFTER_AFTER_FRAMESET, Tokenizer.DOCTYPE_TOKEN, ignoreToken), _defineProperty(_AFTER_AFTER_FRAMESET, Tokenizer.START_TAG_TOKEN, startTagAfterAfterFrameset), _defineProperty(_AFTER_AFTER_FRAMESET, Tokenizer.END_TAG_TOKEN, ignoreToken), _defineProperty(_AFTER_AFTER_FRAMESET, Tokenizer.EOF_TOKEN, stopParsing), _AFTER_AFTER_FRAMESET)), _TOKEN_HANDLERS);\n\n//Parser\nvar Parser = /*#__PURE__*/function () {\n  function Parser(options) {\n    _classCallCheck(this, Parser);\n    this.options = mergeOptions(DEFAULT_OPTIONS, options);\n    this.treeAdapter = this.options.treeAdapter;\n    this.pendingScript = null;\n    if (this.options.sourceCodeLocationInfo) {\n      Mixin.install(this, LocationInfoParserMixin);\n    }\n    if (this.options.onParseError) {\n      Mixin.install(this, ErrorReportingParserMixin, {\n        onParseError: this.options.onParseError\n      });\n    }\n  }\n\n  // API\n  _createClass(Parser, [{\n    key: \"parse\",\n    value: function parse(html) {\n      var document = this.treeAdapter.createDocument();\n      this._bootstrap(document, null);\n      this.tokenizer.write(html, true);\n      this._runParsingLoop(null);\n      return document;\n    }\n  }, {\n    key: \"parseFragment\",\n    value: function parseFragment(html, fragmentContext) {\n      //NOTE: use <template> element as a fragment context if context element was not provided,\n      //so we will parse in \"forgiving\" manner\n      if (!fragmentContext) {\n        fragmentContext = this.treeAdapter.createElement($.TEMPLATE, NS.HTML, []);\n      }\n\n      //NOTE: create fake element which will be used as 'document' for fragment parsing.\n      //This is important for jsdom there 'document' can't be recreated, therefore\n      //fragment parsing causes messing of the main `document`.\n      var documentMock = this.treeAdapter.createElement('documentmock', NS.HTML, []);\n      this._bootstrap(documentMock, fragmentContext);\n      if (this.treeAdapter.getTagName(fragmentContext) === $.TEMPLATE) {\n        this._pushTmplInsertionMode(IN_TEMPLATE_MODE);\n      }\n      this._initTokenizerForFragmentParsing();\n      this._insertFakeRootElement();\n      this._resetInsertionMode();\n      this._findFormInFragmentContext();\n      this.tokenizer.write(html, true);\n      this._runParsingLoop(null);\n      var rootElement = this.treeAdapter.getFirstChild(documentMock);\n      var fragment = this.treeAdapter.createDocumentFragment();\n      this._adoptNodes(rootElement, fragment);\n      return fragment;\n    }\n\n    //Bootstrap parser\n  }, {\n    key: \"_bootstrap\",\n    value: function _bootstrap(document, fragmentContext) {\n      this.tokenizer = new Tokenizer(this.options);\n      this.stopped = false;\n      this.insertionMode = INITIAL_MODE;\n      this.originalInsertionMode = '';\n      this.document = document;\n      this.fragmentContext = fragmentContext;\n      this.headElement = null;\n      this.formElement = null;\n      this.openElements = new OpenElementStack(this.document, this.treeAdapter);\n      this.activeFormattingElements = new FormattingElementList(this.treeAdapter);\n      this.tmplInsertionModeStack = [];\n      this.tmplInsertionModeStackTop = -1;\n      this.currentTmplInsertionMode = null;\n      this.pendingCharacterTokens = [];\n      this.hasNonWhitespacePendingCharacterToken = false;\n      this.framesetOk = true;\n      this.skipNextNewLine = false;\n      this.fosterParentingEnabled = false;\n    }\n\n    //Errors\n  }, {\n    key: \"_err\",\n    value: function _err() {\n      // NOTE: err reporting is noop by default. Enabled by mixin.\n    }\n\n    //Parsing loop\n  }, {\n    key: \"_runParsingLoop\",\n    value: function _runParsingLoop(scriptHandler) {\n      while (!this.stopped) {\n        this._setupTokenizerCDATAMode();\n        var token = this.tokenizer.getNextToken();\n        if (token.type === Tokenizer.HIBERNATION_TOKEN) {\n          break;\n        }\n        if (this.skipNextNewLine) {\n          this.skipNextNewLine = false;\n          if (token.type === Tokenizer.WHITESPACE_CHARACTER_TOKEN && token.chars[0] === '\\n') {\n            if (token.chars.length === 1) {\n              continue;\n            }\n            token.chars = token.chars.substr(1);\n          }\n        }\n        this._processInputToken(token);\n        if (scriptHandler && this.pendingScript) {\n          break;\n        }\n      }\n    }\n  }, {\n    key: \"runParsingLoopForCurrentChunk\",\n    value: function runParsingLoopForCurrentChunk(writeCallback, scriptHandler) {\n      this._runParsingLoop(scriptHandler);\n      if (scriptHandler && this.pendingScript) {\n        var script = this.pendingScript;\n        this.pendingScript = null;\n        scriptHandler(script);\n        return;\n      }\n      if (writeCallback) {\n        writeCallback();\n      }\n    }\n\n    //Text parsing\n  }, {\n    key: \"_setupTokenizerCDATAMode\",\n    value: function _setupTokenizerCDATAMode() {\n      var current = this._getAdjustedCurrentElement();\n      this.tokenizer.allowCDATA = current && current !== this.document && this.treeAdapter.getNamespaceURI(current) !== NS.HTML && !this._isIntegrationPoint(current);\n    }\n  }, {\n    key: \"_switchToTextParsing\",\n    value: function _switchToTextParsing(currentToken, nextTokenizerState) {\n      this._insertElement(currentToken, NS.HTML);\n      this.tokenizer.state = nextTokenizerState;\n      this.originalInsertionMode = this.insertionMode;\n      this.insertionMode = TEXT_MODE;\n    }\n  }, {\n    key: \"switchToPlaintextParsing\",\n    value: function switchToPlaintextParsing() {\n      this.insertionMode = TEXT_MODE;\n      this.originalInsertionMode = IN_BODY_MODE;\n      this.tokenizer.state = Tokenizer.MODE.PLAINTEXT;\n    }\n\n    //Fragment parsing\n  }, {\n    key: \"_getAdjustedCurrentElement\",\n    value: function _getAdjustedCurrentElement() {\n      return this.openElements.stackTop === 0 && this.fragmentContext ? this.fragmentContext : this.openElements.current;\n    }\n  }, {\n    key: \"_findFormInFragmentContext\",\n    value: function _findFormInFragmentContext() {\n      var node = this.fragmentContext;\n      do {\n        if (this.treeAdapter.getTagName(node) === $.FORM) {\n          this.formElement = node;\n          break;\n        }\n        node = this.treeAdapter.getParentNode(node);\n      } while (node);\n    }\n  }, {\n    key: \"_initTokenizerForFragmentParsing\",\n    value: function _initTokenizerForFragmentParsing() {\n      if (this.treeAdapter.getNamespaceURI(this.fragmentContext) === NS.HTML) {\n        var tn = this.treeAdapter.getTagName(this.fragmentContext);\n        if (tn === $.TITLE || tn === $.TEXTAREA) {\n          this.tokenizer.state = Tokenizer.MODE.RCDATA;\n        } else if (tn === $.STYLE || tn === $.XMP || tn === $.IFRAME || tn === $.NOEMBED || tn === $.NOFRAMES || tn === $.NOSCRIPT) {\n          this.tokenizer.state = Tokenizer.MODE.RAWTEXT;\n        } else if (tn === $.SCRIPT) {\n          this.tokenizer.state = Tokenizer.MODE.SCRIPT_DATA;\n        } else if (tn === $.PLAINTEXT) {\n          this.tokenizer.state = Tokenizer.MODE.PLAINTEXT;\n        }\n      }\n    }\n\n    //Tree mutation\n  }, {\n    key: \"_setDocumentType\",\n    value: function _setDocumentType(token) {\n      var name = token.name || '';\n      var publicId = token.publicId || '';\n      var systemId = token.systemId || '';\n      this.treeAdapter.setDocumentType(this.document, name, publicId, systemId);\n    }\n  }, {\n    key: \"_attachElementToTree\",\n    value: function _attachElementToTree(element) {\n      if (this._shouldFosterParentOnInsertion()) {\n        this._fosterParentElement(element);\n      } else {\n        var parent = this.openElements.currentTmplContent || this.openElements.current;\n        this.treeAdapter.appendChild(parent, element);\n      }\n    }\n  }, {\n    key: \"_appendElement\",\n    value: function _appendElement(token, namespaceURI) {\n      var element = this.treeAdapter.createElement(token.tagName, namespaceURI, token.attrs);\n      this._attachElementToTree(element);\n    }\n  }, {\n    key: \"_insertElement\",\n    value: function _insertElement(token, namespaceURI) {\n      var element = this.treeAdapter.createElement(token.tagName, namespaceURI, token.attrs);\n      this._attachElementToTree(element);\n      this.openElements.push(element);\n    }\n  }, {\n    key: \"_insertFakeElement\",\n    value: function _insertFakeElement(tagName) {\n      var element = this.treeAdapter.createElement(tagName, NS.HTML, []);\n      this._attachElementToTree(element);\n      this.openElements.push(element);\n    }\n  }, {\n    key: \"_insertTemplate\",\n    value: function _insertTemplate(token) {\n      var tmpl = this.treeAdapter.createElement(token.tagName, NS.HTML, token.attrs);\n      var content = this.treeAdapter.createDocumentFragment();\n      this.treeAdapter.setTemplateContent(tmpl, content);\n      this._attachElementToTree(tmpl);\n      this.openElements.push(tmpl);\n    }\n  }, {\n    key: \"_insertFakeRootElement\",\n    value: function _insertFakeRootElement() {\n      var element = this.treeAdapter.createElement($.HTML, NS.HTML, []);\n      this.treeAdapter.appendChild(this.openElements.current, element);\n      this.openElements.push(element);\n    }\n  }, {\n    key: \"_appendCommentNode\",\n    value: function _appendCommentNode(token, parent) {\n      var commentNode = this.treeAdapter.createCommentNode(token.data);\n      this.treeAdapter.appendChild(parent, commentNode);\n    }\n  }, {\n    key: \"_insertCharacters\",\n    value: function _insertCharacters(token) {\n      if (this._shouldFosterParentOnInsertion()) {\n        this._fosterParentText(token.chars);\n      } else {\n        var parent = this.openElements.currentTmplContent || this.openElements.current;\n        this.treeAdapter.insertText(parent, token.chars);\n      }\n    }\n  }, {\n    key: \"_adoptNodes\",\n    value: function _adoptNodes(donor, recipient) {\n      for (var child = this.treeAdapter.getFirstChild(donor); child; child = this.treeAdapter.getFirstChild(donor)) {\n        this.treeAdapter.detachNode(child);\n        this.treeAdapter.appendChild(recipient, child);\n      }\n    }\n\n    //Token processing\n  }, {\n    key: \"_shouldProcessTokenInForeignContent\",\n    value: function _shouldProcessTokenInForeignContent(token) {\n      var current = this._getAdjustedCurrentElement();\n      if (!current || current === this.document) {\n        return false;\n      }\n      var ns = this.treeAdapter.getNamespaceURI(current);\n      if (ns === NS.HTML) {\n        return false;\n      }\n      if (this.treeAdapter.getTagName(current) === $.ANNOTATION_XML && ns === NS.MATHML && token.type === Tokenizer.START_TAG_TOKEN && token.tagName === $.SVG) {\n        return false;\n      }\n      var isCharacterToken = token.type === Tokenizer.CHARACTER_TOKEN || token.type === Tokenizer.NULL_CHARACTER_TOKEN || token.type === Tokenizer.WHITESPACE_CHARACTER_TOKEN;\n      var isMathMLTextStartTag = token.type === Tokenizer.START_TAG_TOKEN && token.tagName !== $.MGLYPH && token.tagName !== $.MALIGNMARK;\n      if ((isMathMLTextStartTag || isCharacterToken) && this._isIntegrationPoint(current, NS.MATHML)) {\n        return false;\n      }\n      if ((token.type === Tokenizer.START_TAG_TOKEN || isCharacterToken) && this._isIntegrationPoint(current, NS.HTML)) {\n        return false;\n      }\n      return token.type !== Tokenizer.EOF_TOKEN;\n    }\n  }, {\n    key: \"_processToken\",\n    value: function _processToken(token) {\n      TOKEN_HANDLERS[this.insertionMode][token.type](this, token);\n    }\n  }, {\n    key: \"_processTokenInBodyMode\",\n    value: function _processTokenInBodyMode(token) {\n      TOKEN_HANDLERS[IN_BODY_MODE][token.type](this, token);\n    }\n  }, {\n    key: \"_processTokenInForeignContent\",\n    value: function _processTokenInForeignContent(token) {\n      if (token.type === Tokenizer.CHARACTER_TOKEN) {\n        characterInForeignContent(this, token);\n      } else if (token.type === Tokenizer.NULL_CHARACTER_TOKEN) {\n        nullCharacterInForeignContent(this, token);\n      } else if (token.type === Tokenizer.WHITESPACE_CHARACTER_TOKEN) {\n        insertCharacters(this, token);\n      } else if (token.type === Tokenizer.COMMENT_TOKEN) {\n        appendComment(this, token);\n      } else if (token.type === Tokenizer.START_TAG_TOKEN) {\n        startTagInForeignContent(this, token);\n      } else if (token.type === Tokenizer.END_TAG_TOKEN) {\n        endTagInForeignContent(this, token);\n      }\n    }\n  }, {\n    key: \"_processInputToken\",\n    value: function _processInputToken(token) {\n      if (this._shouldProcessTokenInForeignContent(token)) {\n        this._processTokenInForeignContent(token);\n      } else {\n        this._processToken(token);\n      }\n      if (token.type === Tokenizer.START_TAG_TOKEN && token.selfClosing && !token.ackSelfClosing) {\n        this._err(ERR.nonVoidHtmlElementStartTagWithTrailingSolidus);\n      }\n    }\n\n    //Integration points\n  }, {\n    key: \"_isIntegrationPoint\",\n    value: function _isIntegrationPoint(element, foreignNS) {\n      var tn = this.treeAdapter.getTagName(element);\n      var ns = this.treeAdapter.getNamespaceURI(element);\n      var attrs = this.treeAdapter.getAttrList(element);\n      return foreignContent.isIntegrationPoint(tn, ns, attrs, foreignNS);\n    }\n\n    //Active formatting elements reconstruction\n  }, {\n    key: \"_reconstructActiveFormattingElements\",\n    value: function _reconstructActiveFormattingElements() {\n      var listLength = this.activeFormattingElements.length;\n      if (listLength) {\n        var unopenIdx = listLength;\n        var entry = null;\n        do {\n          unopenIdx--;\n          entry = this.activeFormattingElements.entries[unopenIdx];\n          if (entry.type === FormattingElementList.MARKER_ENTRY || this.openElements.contains(entry.element)) {\n            unopenIdx++;\n            break;\n          }\n        } while (unopenIdx > 0);\n        for (var i = unopenIdx; i < listLength; i++) {\n          entry = this.activeFormattingElements.entries[i];\n          this._insertElement(entry.token, this.treeAdapter.getNamespaceURI(entry.element));\n          entry.element = this.openElements.current;\n        }\n      }\n    }\n\n    //Close elements\n  }, {\n    key: \"_closeTableCell\",\n    value: function _closeTableCell() {\n      this.openElements.generateImpliedEndTags();\n      this.openElements.popUntilTableCellPopped();\n      this.activeFormattingElements.clearToLastMarker();\n      this.insertionMode = IN_ROW_MODE;\n    }\n  }, {\n    key: \"_closePElement\",\n    value: function _closePElement() {\n      this.openElements.generateImpliedEndTagsWithExclusion($.P);\n      this.openElements.popUntilTagNamePopped($.P);\n    }\n\n    //Insertion modes\n  }, {\n    key: \"_resetInsertionMode\",\n    value: function _resetInsertionMode() {\n      for (var i = this.openElements.stackTop, last = false; i >= 0; i--) {\n        var element = this.openElements.items[i];\n        if (i === 0) {\n          last = true;\n          if (this.fragmentContext) {\n            element = this.fragmentContext;\n          }\n        }\n        var tn = this.treeAdapter.getTagName(element);\n        var newInsertionMode = INSERTION_MODE_RESET_MAP[tn];\n        if (newInsertionMode) {\n          this.insertionMode = newInsertionMode;\n          break;\n        } else if (!last && (tn === $.TD || tn === $.TH)) {\n          this.insertionMode = IN_CELL_MODE;\n          break;\n        } else if (!last && tn === $.HEAD) {\n          this.insertionMode = IN_HEAD_MODE;\n          break;\n        } else if (tn === $.SELECT) {\n          this._resetInsertionModeForSelect(i);\n          break;\n        } else if (tn === $.TEMPLATE) {\n          this.insertionMode = this.currentTmplInsertionMode;\n          break;\n        } else if (tn === $.HTML) {\n          this.insertionMode = this.headElement ? AFTER_HEAD_MODE : BEFORE_HEAD_MODE;\n          break;\n        } else if (last) {\n          this.insertionMode = IN_BODY_MODE;\n          break;\n        }\n      }\n    }\n  }, {\n    key: \"_resetInsertionModeForSelect\",\n    value: function _resetInsertionModeForSelect(selectIdx) {\n      if (selectIdx > 0) {\n        for (var i = selectIdx - 1; i > 0; i--) {\n          var ancestor = this.openElements.items[i];\n          var tn = this.treeAdapter.getTagName(ancestor);\n          if (tn === $.TEMPLATE) {\n            break;\n          } else if (tn === $.TABLE) {\n            this.insertionMode = IN_SELECT_IN_TABLE_MODE;\n            return;\n          }\n        }\n      }\n      this.insertionMode = IN_SELECT_MODE;\n    }\n  }, {\n    key: \"_pushTmplInsertionMode\",\n    value: function _pushTmplInsertionMode(mode) {\n      this.tmplInsertionModeStack.push(mode);\n      this.tmplInsertionModeStackTop++;\n      this.currentTmplInsertionMode = mode;\n    }\n  }, {\n    key: \"_popTmplInsertionMode\",\n    value: function _popTmplInsertionMode() {\n      this.tmplInsertionModeStack.pop();\n      this.tmplInsertionModeStackTop--;\n      this.currentTmplInsertionMode = this.tmplInsertionModeStack[this.tmplInsertionModeStackTop];\n    }\n\n    //Foster parenting\n  }, {\n    key: \"_isElementCausesFosterParenting\",\n    value: function _isElementCausesFosterParenting(element) {\n      var tn = this.treeAdapter.getTagName(element);\n      return tn === $.TABLE || tn === $.TBODY || tn === $.TFOOT || tn === $.THEAD || tn === $.TR;\n    }\n  }, {\n    key: \"_shouldFosterParentOnInsertion\",\n    value: function _shouldFosterParentOnInsertion() {\n      return this.fosterParentingEnabled && this._isElementCausesFosterParenting(this.openElements.current);\n    }\n  }, {\n    key: \"_findFosterParentingLocation\",\n    value: function _findFosterParentingLocation() {\n      var location = {\n        parent: null,\n        beforeElement: null\n      };\n      for (var i = this.openElements.stackTop; i >= 0; i--) {\n        var openElement = this.openElements.items[i];\n        var tn = this.treeAdapter.getTagName(openElement);\n        var ns = this.treeAdapter.getNamespaceURI(openElement);\n        if (tn === $.TEMPLATE && ns === NS.HTML) {\n          location.parent = this.treeAdapter.getTemplateContent(openElement);\n          break;\n        } else if (tn === $.TABLE) {\n          location.parent = this.treeAdapter.getParentNode(openElement);\n          if (location.parent) {\n            location.beforeElement = openElement;\n          } else {\n            location.parent = this.openElements.items[i - 1];\n          }\n          break;\n        }\n      }\n      if (!location.parent) {\n        location.parent = this.openElements.items[0];\n      }\n      return location;\n    }\n  }, {\n    key: \"_fosterParentElement\",\n    value: function _fosterParentElement(element) {\n      var location = this._findFosterParentingLocation();\n      if (location.beforeElement) {\n        this.treeAdapter.insertBefore(location.parent, element, location.beforeElement);\n      } else {\n        this.treeAdapter.appendChild(location.parent, element);\n      }\n    }\n  }, {\n    key: \"_fosterParentText\",\n    value: function _fosterParentText(chars) {\n      var location = this._findFosterParentingLocation();\n      if (location.beforeElement) {\n        this.treeAdapter.insertTextBefore(location.parent, chars, location.beforeElement);\n      } else {\n        this.treeAdapter.insertText(location.parent, chars);\n      }\n    }\n\n    //Special elements\n  }, {\n    key: \"_isSpecialElement\",\n    value: function _isSpecialElement(element) {\n      var tn = this.treeAdapter.getTagName(element);\n      var ns = this.treeAdapter.getNamespaceURI(element);\n      return HTML.SPECIAL_ELEMENTS[ns][tn];\n    }\n  }]);\n  return Parser;\n}();\nmodule.exports = Parser;\n\n//Adoption agency algorithm\n//(see: http://www.whatwg.org/specs/web-apps/current-work/multipage/tree-construction.html#adoptionAgency)\n//------------------------------------------------------------------\n\n//Steps 5-8 of the algorithm\nfunction aaObtainFormattingElementEntry(p, token) {\n  var formattingElementEntry = p.activeFormattingElements.getElementEntryInScopeWithTagName(token.tagName);\n  if (formattingElementEntry) {\n    if (!p.openElements.contains(formattingElementEntry.element)) {\n      p.activeFormattingElements.removeEntry(formattingElementEntry);\n      formattingElementEntry = null;\n    } else if (!p.openElements.hasInScope(token.tagName)) {\n      formattingElementEntry = null;\n    }\n  } else {\n    genericEndTagInBody(p, token);\n  }\n  return formattingElementEntry;\n}\n\n//Steps 9 and 10 of the algorithm\nfunction aaObtainFurthestBlock(p, formattingElementEntry) {\n  var furthestBlock = null;\n  for (var i = p.openElements.stackTop; i >= 0; i--) {\n    var element = p.openElements.items[i];\n    if (element === formattingElementEntry.element) {\n      break;\n    }\n    if (p._isSpecialElement(element)) {\n      furthestBlock = element;\n    }\n  }\n  if (!furthestBlock) {\n    p.openElements.popUntilElementPopped(formattingElementEntry.element);\n    p.activeFormattingElements.removeEntry(formattingElementEntry);\n  }\n  return furthestBlock;\n}\n\n//Step 13 of the algorithm\nfunction aaInnerLoop(p, furthestBlock, formattingElement) {\n  var lastElement = furthestBlock;\n  var nextElement = p.openElements.getCommonAncestor(furthestBlock);\n  for (var i = 0, element = nextElement; element !== formattingElement; i++, element = nextElement) {\n    //NOTE: store next element for the next loop iteration (it may be deleted from the stack by step 9.5)\n    nextElement = p.openElements.getCommonAncestor(element);\n    var elementEntry = p.activeFormattingElements.getElementEntry(element);\n    var counterOverflow = elementEntry && i >= AA_INNER_LOOP_ITER;\n    var shouldRemoveFromOpenElements = !elementEntry || counterOverflow;\n    if (shouldRemoveFromOpenElements) {\n      if (counterOverflow) {\n        p.activeFormattingElements.removeEntry(elementEntry);\n      }\n      p.openElements.remove(element);\n    } else {\n      element = aaRecreateElementFromEntry(p, elementEntry);\n      if (lastElement === furthestBlock) {\n        p.activeFormattingElements.bookmark = elementEntry;\n      }\n      p.treeAdapter.detachNode(lastElement);\n      p.treeAdapter.appendChild(element, lastElement);\n      lastElement = element;\n    }\n  }\n  return lastElement;\n}\n\n//Step 13.7 of the algorithm\nfunction aaRecreateElementFromEntry(p, elementEntry) {\n  var ns = p.treeAdapter.getNamespaceURI(elementEntry.element);\n  var newElement = p.treeAdapter.createElement(elementEntry.token.tagName, ns, elementEntry.token.attrs);\n  p.openElements.replace(elementEntry.element, newElement);\n  elementEntry.element = newElement;\n  return newElement;\n}\n\n//Step 14 of the algorithm\nfunction aaInsertLastNodeInCommonAncestor(p, commonAncestor, lastElement) {\n  if (p._isElementCausesFosterParenting(commonAncestor)) {\n    p._fosterParentElement(lastElement);\n  } else {\n    var tn = p.treeAdapter.getTagName(commonAncestor);\n    var ns = p.treeAdapter.getNamespaceURI(commonAncestor);\n    if (tn === $.TEMPLATE && ns === NS.HTML) {\n      commonAncestor = p.treeAdapter.getTemplateContent(commonAncestor);\n    }\n    p.treeAdapter.appendChild(commonAncestor, lastElement);\n  }\n}\n\n//Steps 15-19 of the algorithm\nfunction aaReplaceFormattingElement(p, furthestBlock, formattingElementEntry) {\n  var ns = p.treeAdapter.getNamespaceURI(formattingElementEntry.element);\n  var token = formattingElementEntry.token;\n  var newElement = p.treeAdapter.createElement(token.tagName, ns, token.attrs);\n  p._adoptNodes(furthestBlock, newElement);\n  p.treeAdapter.appendChild(furthestBlock, newElement);\n  p.activeFormattingElements.insertElementAfterBookmark(newElement, formattingElementEntry.token);\n  p.activeFormattingElements.removeEntry(formattingElementEntry);\n  p.openElements.remove(formattingElementEntry.element);\n  p.openElements.insertAfter(furthestBlock, newElement);\n}\n\n//Algorithm entry point\nfunction callAdoptionAgency(p, token) {\n  var formattingElementEntry;\n  for (var i = 0; i < AA_OUTER_LOOP_ITER; i++) {\n    formattingElementEntry = aaObtainFormattingElementEntry(p, token, formattingElementEntry);\n    if (!formattingElementEntry) {\n      break;\n    }\n    var furthestBlock = aaObtainFurthestBlock(p, formattingElementEntry);\n    if (!furthestBlock) {\n      break;\n    }\n    p.activeFormattingElements.bookmark = formattingElementEntry;\n    var lastElement = aaInnerLoop(p, furthestBlock, formattingElementEntry.element);\n    var commonAncestor = p.openElements.getCommonAncestor(formattingElementEntry.element);\n    p.treeAdapter.detachNode(lastElement);\n    aaInsertLastNodeInCommonAncestor(p, commonAncestor, lastElement);\n    aaReplaceFormattingElement(p, furthestBlock, formattingElementEntry);\n  }\n}\n\n//Generic token handlers\n//------------------------------------------------------------------\nfunction ignoreToken() {\n  //NOTE: do nothing =)\n}\nfunction misplacedDoctype(p) {\n  p._err(ERR.misplacedDoctype);\n}\nfunction appendComment(p, token) {\n  p._appendCommentNode(token, p.openElements.currentTmplContent || p.openElements.current);\n}\nfunction appendCommentToRootHtmlElement(p, token) {\n  p._appendCommentNode(token, p.openElements.items[0]);\n}\nfunction appendCommentToDocument(p, token) {\n  p._appendCommentNode(token, p.document);\n}\nfunction insertCharacters(p, token) {\n  p._insertCharacters(token);\n}\nfunction stopParsing(p) {\n  p.stopped = true;\n}\n\n// The \"initial\" insertion mode\n//------------------------------------------------------------------\nfunction doctypeInInitialMode(p, token) {\n  p._setDocumentType(token);\n  var mode = token.forceQuirks ? HTML.DOCUMENT_MODE.QUIRKS : doctype.getDocumentMode(token);\n  if (!doctype.isConforming(token)) {\n    p._err(ERR.nonConformingDoctype);\n  }\n  p.treeAdapter.setDocumentMode(p.document, mode);\n  p.insertionMode = BEFORE_HTML_MODE;\n}\nfunction tokenInInitialMode(p, token) {\n  p._err(ERR.missingDoctype, {\n    beforeToken: true\n  });\n  p.treeAdapter.setDocumentMode(p.document, HTML.DOCUMENT_MODE.QUIRKS);\n  p.insertionMode = BEFORE_HTML_MODE;\n  p._processToken(token);\n}\n\n// The \"before html\" insertion mode\n//------------------------------------------------------------------\nfunction startTagBeforeHtml(p, token) {\n  if (token.tagName === $.HTML) {\n    p._insertElement(token, NS.HTML);\n    p.insertionMode = BEFORE_HEAD_MODE;\n  } else {\n    tokenBeforeHtml(p, token);\n  }\n}\nfunction endTagBeforeHtml(p, token) {\n  var tn = token.tagName;\n  if (tn === $.HTML || tn === $.HEAD || tn === $.BODY || tn === $.BR) {\n    tokenBeforeHtml(p, token);\n  }\n}\nfunction tokenBeforeHtml(p, token) {\n  p._insertFakeRootElement();\n  p.insertionMode = BEFORE_HEAD_MODE;\n  p._processToken(token);\n}\n\n// The \"before head\" insertion mode\n//------------------------------------------------------------------\nfunction startTagBeforeHead(p, token) {\n  var tn = token.tagName;\n  if (tn === $.HTML) {\n    startTagInBody(p, token);\n  } else if (tn === $.HEAD) {\n    p._insertElement(token, NS.HTML);\n    p.headElement = p.openElements.current;\n    p.insertionMode = IN_HEAD_MODE;\n  } else {\n    tokenBeforeHead(p, token);\n  }\n}\nfunction endTagBeforeHead(p, token) {\n  var tn = token.tagName;\n  if (tn === $.HEAD || tn === $.BODY || tn === $.HTML || tn === $.BR) {\n    tokenBeforeHead(p, token);\n  } else {\n    p._err(ERR.endTagWithoutMatchingOpenElement);\n  }\n}\nfunction tokenBeforeHead(p, token) {\n  p._insertFakeElement($.HEAD);\n  p.headElement = p.openElements.current;\n  p.insertionMode = IN_HEAD_MODE;\n  p._processToken(token);\n}\n\n// The \"in head\" insertion mode\n//------------------------------------------------------------------\nfunction startTagInHead(p, token) {\n  var tn = token.tagName;\n  if (tn === $.HTML) {\n    startTagInBody(p, token);\n  } else if (tn === $.BASE || tn === $.BASEFONT || tn === $.BGSOUND || tn === $.LINK || tn === $.META) {\n    p._appendElement(token, NS.HTML);\n    token.ackSelfClosing = true;\n  } else if (tn === $.TITLE) {\n    p._switchToTextParsing(token, Tokenizer.MODE.RCDATA);\n  } else if (tn === $.NOSCRIPT) {\n    if (p.options.scriptingEnabled) {\n      p._switchToTextParsing(token, Tokenizer.MODE.RAWTEXT);\n    } else {\n      p._insertElement(token, NS.HTML);\n      p.insertionMode = IN_HEAD_NO_SCRIPT_MODE;\n    }\n  } else if (tn === $.NOFRAMES || tn === $.STYLE) {\n    p._switchToTextParsing(token, Tokenizer.MODE.RAWTEXT);\n  } else if (tn === $.SCRIPT) {\n    p._switchToTextParsing(token, Tokenizer.MODE.SCRIPT_DATA);\n  } else if (tn === $.TEMPLATE) {\n    p._insertTemplate(token, NS.HTML);\n    p.activeFormattingElements.insertMarker();\n    p.framesetOk = false;\n    p.insertionMode = IN_TEMPLATE_MODE;\n    p._pushTmplInsertionMode(IN_TEMPLATE_MODE);\n  } else if (tn === $.HEAD) {\n    p._err(ERR.misplacedStartTagForHeadElement);\n  } else {\n    tokenInHead(p, token);\n  }\n}\nfunction endTagInHead(p, token) {\n  var tn = token.tagName;\n  if (tn === $.HEAD) {\n    p.openElements.pop();\n    p.insertionMode = AFTER_HEAD_MODE;\n  } else if (tn === $.BODY || tn === $.BR || tn === $.HTML) {\n    tokenInHead(p, token);\n  } else if (tn === $.TEMPLATE) {\n    if (p.openElements.tmplCount > 0) {\n      p.openElements.generateImpliedEndTagsThoroughly();\n      if (p.openElements.currentTagName !== $.TEMPLATE) {\n        p._err(ERR.closingOfElementWithOpenChildElements);\n      }\n      p.openElements.popUntilTagNamePopped($.TEMPLATE);\n      p.activeFormattingElements.clearToLastMarker();\n      p._popTmplInsertionMode();\n      p._resetInsertionMode();\n    } else {\n      p._err(ERR.endTagWithoutMatchingOpenElement);\n    }\n  } else {\n    p._err(ERR.endTagWithoutMatchingOpenElement);\n  }\n}\nfunction tokenInHead(p, token) {\n  p.openElements.pop();\n  p.insertionMode = AFTER_HEAD_MODE;\n  p._processToken(token);\n}\n\n// The \"in head no script\" insertion mode\n//------------------------------------------------------------------\nfunction startTagInHeadNoScript(p, token) {\n  var tn = token.tagName;\n  if (tn === $.HTML) {\n    startTagInBody(p, token);\n  } else if (tn === $.BASEFONT || tn === $.BGSOUND || tn === $.HEAD || tn === $.LINK || tn === $.META || tn === $.NOFRAMES || tn === $.STYLE) {\n    startTagInHead(p, token);\n  } else if (tn === $.NOSCRIPT) {\n    p._err(ERR.nestedNoscriptInHead);\n  } else {\n    tokenInHeadNoScript(p, token);\n  }\n}\nfunction endTagInHeadNoScript(p, token) {\n  var tn = token.tagName;\n  if (tn === $.NOSCRIPT) {\n    p.openElements.pop();\n    p.insertionMode = IN_HEAD_MODE;\n  } else if (tn === $.BR) {\n    tokenInHeadNoScript(p, token);\n  } else {\n    p._err(ERR.endTagWithoutMatchingOpenElement);\n  }\n}\nfunction tokenInHeadNoScript(p, token) {\n  var errCode = token.type === Tokenizer.EOF_TOKEN ? ERR.openElementsLeftAfterEof : ERR.disallowedContentInNoscriptInHead;\n  p._err(errCode);\n  p.openElements.pop();\n  p.insertionMode = IN_HEAD_MODE;\n  p._processToken(token);\n}\n\n// The \"after head\" insertion mode\n//------------------------------------------------------------------\nfunction startTagAfterHead(p, token) {\n  var tn = token.tagName;\n  if (tn === $.HTML) {\n    startTagInBody(p, token);\n  } else if (tn === $.BODY) {\n    p._insertElement(token, NS.HTML);\n    p.framesetOk = false;\n    p.insertionMode = IN_BODY_MODE;\n  } else if (tn === $.FRAMESET) {\n    p._insertElement(token, NS.HTML);\n    p.insertionMode = IN_FRAMESET_MODE;\n  } else if (tn === $.BASE || tn === $.BASEFONT || tn === $.BGSOUND || tn === $.LINK || tn === $.META || tn === $.NOFRAMES || tn === $.SCRIPT || tn === $.STYLE || tn === $.TEMPLATE || tn === $.TITLE) {\n    p._err(ERR.abandonedHeadElementChild);\n    p.openElements.push(p.headElement);\n    startTagInHead(p, token);\n    p.openElements.remove(p.headElement);\n  } else if (tn === $.HEAD) {\n    p._err(ERR.misplacedStartTagForHeadElement);\n  } else {\n    tokenAfterHead(p, token);\n  }\n}\nfunction endTagAfterHead(p, token) {\n  var tn = token.tagName;\n  if (tn === $.BODY || tn === $.HTML || tn === $.BR) {\n    tokenAfterHead(p, token);\n  } else if (tn === $.TEMPLATE) {\n    endTagInHead(p, token);\n  } else {\n    p._err(ERR.endTagWithoutMatchingOpenElement);\n  }\n}\nfunction tokenAfterHead(p, token) {\n  p._insertFakeElement($.BODY);\n  p.insertionMode = IN_BODY_MODE;\n  p._processToken(token);\n}\n\n// The \"in body\" insertion mode\n//------------------------------------------------------------------\nfunction whitespaceCharacterInBody(p, token) {\n  p._reconstructActiveFormattingElements();\n  p._insertCharacters(token);\n}\nfunction characterInBody(p, token) {\n  p._reconstructActiveFormattingElements();\n  p._insertCharacters(token);\n  p.framesetOk = false;\n}\nfunction htmlStartTagInBody(p, token) {\n  if (p.openElements.tmplCount === 0) {\n    p.treeAdapter.adoptAttributes(p.openElements.items[0], token.attrs);\n  }\n}\nfunction bodyStartTagInBody(p, token) {\n  var bodyElement = p.openElements.tryPeekProperlyNestedBodyElement();\n  if (bodyElement && p.openElements.tmplCount === 0) {\n    p.framesetOk = false;\n    p.treeAdapter.adoptAttributes(bodyElement, token.attrs);\n  }\n}\nfunction framesetStartTagInBody(p, token) {\n  var bodyElement = p.openElements.tryPeekProperlyNestedBodyElement();\n  if (p.framesetOk && bodyElement) {\n    p.treeAdapter.detachNode(bodyElement);\n    p.openElements.popAllUpToHtmlElement();\n    p._insertElement(token, NS.HTML);\n    p.insertionMode = IN_FRAMESET_MODE;\n  }\n}\nfunction addressStartTagInBody(p, token) {\n  if (p.openElements.hasInButtonScope($.P)) {\n    p._closePElement();\n  }\n  p._insertElement(token, NS.HTML);\n}\nfunction numberedHeaderStartTagInBody(p, token) {\n  if (p.openElements.hasInButtonScope($.P)) {\n    p._closePElement();\n  }\n  var tn = p.openElements.currentTagName;\n  if (tn === $.H1 || tn === $.H2 || tn === $.H3 || tn === $.H4 || tn === $.H5 || tn === $.H6) {\n    p.openElements.pop();\n  }\n  p._insertElement(token, NS.HTML);\n}\nfunction preStartTagInBody(p, token) {\n  if (p.openElements.hasInButtonScope($.P)) {\n    p._closePElement();\n  }\n  p._insertElement(token, NS.HTML);\n  //NOTE: If the next token is a U+000A LINE FEED (LF) character token, then ignore that token and move\n  //on to the next one. (Newlines at the start of pre blocks are ignored as an authoring convenience.)\n  p.skipNextNewLine = true;\n  p.framesetOk = false;\n}\nfunction formStartTagInBody(p, token) {\n  var inTemplate = p.openElements.tmplCount > 0;\n  if (!p.formElement || inTemplate) {\n    if (p.openElements.hasInButtonScope($.P)) {\n      p._closePElement();\n    }\n    p._insertElement(token, NS.HTML);\n    if (!inTemplate) {\n      p.formElement = p.openElements.current;\n    }\n  }\n}\nfunction listItemStartTagInBody(p, token) {\n  p.framesetOk = false;\n  var tn = token.tagName;\n  for (var i = p.openElements.stackTop; i >= 0; i--) {\n    var element = p.openElements.items[i];\n    var elementTn = p.treeAdapter.getTagName(element);\n    var closeTn = null;\n    if (tn === $.LI && elementTn === $.LI) {\n      closeTn = $.LI;\n    } else if ((tn === $.DD || tn === $.DT) && (elementTn === $.DD || elementTn === $.DT)) {\n      closeTn = elementTn;\n    }\n    if (closeTn) {\n      p.openElements.generateImpliedEndTagsWithExclusion(closeTn);\n      p.openElements.popUntilTagNamePopped(closeTn);\n      break;\n    }\n    if (elementTn !== $.ADDRESS && elementTn !== $.DIV && elementTn !== $.P && p._isSpecialElement(element)) {\n      break;\n    }\n  }\n  if (p.openElements.hasInButtonScope($.P)) {\n    p._closePElement();\n  }\n  p._insertElement(token, NS.HTML);\n}\nfunction plaintextStartTagInBody(p, token) {\n  if (p.openElements.hasInButtonScope($.P)) {\n    p._closePElement();\n  }\n  p._insertElement(token, NS.HTML);\n  p.tokenizer.state = Tokenizer.MODE.PLAINTEXT;\n}\nfunction buttonStartTagInBody(p, token) {\n  if (p.openElements.hasInScope($.BUTTON)) {\n    p.openElements.generateImpliedEndTags();\n    p.openElements.popUntilTagNamePopped($.BUTTON);\n  }\n  p._reconstructActiveFormattingElements();\n  p._insertElement(token, NS.HTML);\n  p.framesetOk = false;\n}\nfunction aStartTagInBody(p, token) {\n  var activeElementEntry = p.activeFormattingElements.getElementEntryInScopeWithTagName($.A);\n  if (activeElementEntry) {\n    callAdoptionAgency(p, token);\n    p.openElements.remove(activeElementEntry.element);\n    p.activeFormattingElements.removeEntry(activeElementEntry);\n  }\n  p._reconstructActiveFormattingElements();\n  p._insertElement(token, NS.HTML);\n  p.activeFormattingElements.pushElement(p.openElements.current, token);\n}\nfunction bStartTagInBody(p, token) {\n  p._reconstructActiveFormattingElements();\n  p._insertElement(token, NS.HTML);\n  p.activeFormattingElements.pushElement(p.openElements.current, token);\n}\nfunction nobrStartTagInBody(p, token) {\n  p._reconstructActiveFormattingElements();\n  if (p.openElements.hasInScope($.NOBR)) {\n    callAdoptionAgency(p, token);\n    p._reconstructActiveFormattingElements();\n  }\n  p._insertElement(token, NS.HTML);\n  p.activeFormattingElements.pushElement(p.openElements.current, token);\n}\nfunction appletStartTagInBody(p, token) {\n  p._reconstructActiveFormattingElements();\n  p._insertElement(token, NS.HTML);\n  p.activeFormattingElements.insertMarker();\n  p.framesetOk = false;\n}\nfunction tableStartTagInBody(p, token) {\n  if (p.treeAdapter.getDocumentMode(p.document) !== HTML.DOCUMENT_MODE.QUIRKS && p.openElements.hasInButtonScope($.P)) {\n    p._closePElement();\n  }\n  p._insertElement(token, NS.HTML);\n  p.framesetOk = false;\n  p.insertionMode = IN_TABLE_MODE;\n}\nfunction areaStartTagInBody(p, token) {\n  p._reconstructActiveFormattingElements();\n  p._appendElement(token, NS.HTML);\n  p.framesetOk = false;\n  token.ackSelfClosing = true;\n}\nfunction inputStartTagInBody(p, token) {\n  p._reconstructActiveFormattingElements();\n  p._appendElement(token, NS.HTML);\n  var inputType = Tokenizer.getTokenAttr(token, ATTRS.TYPE);\n  if (!inputType || inputType.toLowerCase() !== HIDDEN_INPUT_TYPE) {\n    p.framesetOk = false;\n  }\n  token.ackSelfClosing = true;\n}\nfunction paramStartTagInBody(p, token) {\n  p._appendElement(token, NS.HTML);\n  token.ackSelfClosing = true;\n}\nfunction hrStartTagInBody(p, token) {\n  if (p.openElements.hasInButtonScope($.P)) {\n    p._closePElement();\n  }\n  p._appendElement(token, NS.HTML);\n  p.framesetOk = false;\n  token.ackSelfClosing = true;\n}\nfunction imageStartTagInBody(p, token) {\n  token.tagName = $.IMG;\n  areaStartTagInBody(p, token);\n}\nfunction textareaStartTagInBody(p, token) {\n  p._insertElement(token, NS.HTML);\n  //NOTE: If the next token is a U+000A LINE FEED (LF) character token, then ignore that token and move\n  //on to the next one. (Newlines at the start of textarea elements are ignored as an authoring convenience.)\n  p.skipNextNewLine = true;\n  p.tokenizer.state = Tokenizer.MODE.RCDATA;\n  p.originalInsertionMode = p.insertionMode;\n  p.framesetOk = false;\n  p.insertionMode = TEXT_MODE;\n}\nfunction xmpStartTagInBody(p, token) {\n  if (p.openElements.hasInButtonScope($.P)) {\n    p._closePElement();\n  }\n  p._reconstructActiveFormattingElements();\n  p.framesetOk = false;\n  p._switchToTextParsing(token, Tokenizer.MODE.RAWTEXT);\n}\nfunction iframeStartTagInBody(p, token) {\n  p.framesetOk = false;\n  p._switchToTextParsing(token, Tokenizer.MODE.RAWTEXT);\n}\n\n//NOTE: here we assume that we always act as an user agent with enabled plugins, so we parse\n//<noembed> as a rawtext.\nfunction noembedStartTagInBody(p, token) {\n  p._switchToTextParsing(token, Tokenizer.MODE.RAWTEXT);\n}\nfunction selectStartTagInBody(p, token) {\n  p._reconstructActiveFormattingElements();\n  p._insertElement(token, NS.HTML);\n  p.framesetOk = false;\n  if (p.insertionMode === IN_TABLE_MODE || p.insertionMode === IN_CAPTION_MODE || p.insertionMode === IN_TABLE_BODY_MODE || p.insertionMode === IN_ROW_MODE || p.insertionMode === IN_CELL_MODE) {\n    p.insertionMode = IN_SELECT_IN_TABLE_MODE;\n  } else {\n    p.insertionMode = IN_SELECT_MODE;\n  }\n}\nfunction optgroupStartTagInBody(p, token) {\n  if (p.openElements.currentTagName === $.OPTION) {\n    p.openElements.pop();\n  }\n  p._reconstructActiveFormattingElements();\n  p._insertElement(token, NS.HTML);\n}\nfunction rbStartTagInBody(p, token) {\n  if (p.openElements.hasInScope($.RUBY)) {\n    p.openElements.generateImpliedEndTags();\n  }\n  p._insertElement(token, NS.HTML);\n}\nfunction rtStartTagInBody(p, token) {\n  if (p.openElements.hasInScope($.RUBY)) {\n    p.openElements.generateImpliedEndTagsWithExclusion($.RTC);\n  }\n  p._insertElement(token, NS.HTML);\n}\nfunction menuStartTagInBody(p, token) {\n  if (p.openElements.hasInButtonScope($.P)) {\n    p._closePElement();\n  }\n  p._insertElement(token, NS.HTML);\n}\nfunction mathStartTagInBody(p, token) {\n  p._reconstructActiveFormattingElements();\n  foreignContent.adjustTokenMathMLAttrs(token);\n  foreignContent.adjustTokenXMLAttrs(token);\n  if (token.selfClosing) {\n    p._appendElement(token, NS.MATHML);\n  } else {\n    p._insertElement(token, NS.MATHML);\n  }\n  token.ackSelfClosing = true;\n}\nfunction svgStartTagInBody(p, token) {\n  p._reconstructActiveFormattingElements();\n  foreignContent.adjustTokenSVGAttrs(token);\n  foreignContent.adjustTokenXMLAttrs(token);\n  if (token.selfClosing) {\n    p._appendElement(token, NS.SVG);\n  } else {\n    p._insertElement(token, NS.SVG);\n  }\n  token.ackSelfClosing = true;\n}\nfunction genericStartTagInBody(p, token) {\n  p._reconstructActiveFormattingElements();\n  p._insertElement(token, NS.HTML);\n}\n\n//OPTIMIZATION: Integer comparisons are low-cost, so we can use very fast tag name length filters here.\n//It's faster than using dictionary.\nfunction startTagInBody(p, token) {\n  var tn = token.tagName;\n  switch (tn.length) {\n    case 1:\n      if (tn === $.I || tn === $.S || tn === $.B || tn === $.U) {\n        bStartTagInBody(p, token);\n      } else if (tn === $.P) {\n        addressStartTagInBody(p, token);\n      } else if (tn === $.A) {\n        aStartTagInBody(p, token);\n      } else {\n        genericStartTagInBody(p, token);\n      }\n      break;\n    case 2:\n      if (tn === $.DL || tn === $.OL || tn === $.UL) {\n        addressStartTagInBody(p, token);\n      } else if (tn === $.H1 || tn === $.H2 || tn === $.H3 || tn === $.H4 || tn === $.H5 || tn === $.H6) {\n        numberedHeaderStartTagInBody(p, token);\n      } else if (tn === $.LI || tn === $.DD || tn === $.DT) {\n        listItemStartTagInBody(p, token);\n      } else if (tn === $.EM || tn === $.TT) {\n        bStartTagInBody(p, token);\n      } else if (tn === $.BR) {\n        areaStartTagInBody(p, token);\n      } else if (tn === $.HR) {\n        hrStartTagInBody(p, token);\n      } else if (tn === $.RB) {\n        rbStartTagInBody(p, token);\n      } else if (tn === $.RT || tn === $.RP) {\n        rtStartTagInBody(p, token);\n      } else if (tn !== $.TH && tn !== $.TD && tn !== $.TR) {\n        genericStartTagInBody(p, token);\n      }\n      break;\n    case 3:\n      if (tn === $.DIV || tn === $.DIR || tn === $.NAV) {\n        addressStartTagInBody(p, token);\n      } else if (tn === $.PRE) {\n        preStartTagInBody(p, token);\n      } else if (tn === $.BIG) {\n        bStartTagInBody(p, token);\n      } else if (tn === $.IMG || tn === $.WBR) {\n        areaStartTagInBody(p, token);\n      } else if (tn === $.XMP) {\n        xmpStartTagInBody(p, token);\n      } else if (tn === $.SVG) {\n        svgStartTagInBody(p, token);\n      } else if (tn === $.RTC) {\n        rbStartTagInBody(p, token);\n      } else if (tn !== $.COL) {\n        genericStartTagInBody(p, token);\n      }\n      break;\n    case 4:\n      if (tn === $.HTML) {\n        htmlStartTagInBody(p, token);\n      } else if (tn === $.BASE || tn === $.LINK || tn === $.META) {\n        startTagInHead(p, token);\n      } else if (tn === $.BODY) {\n        bodyStartTagInBody(p, token);\n      } else if (tn === $.MAIN || tn === $.MENU) {\n        addressStartTagInBody(p, token);\n      } else if (tn === $.FORM) {\n        formStartTagInBody(p, token);\n      } else if (tn === $.CODE || tn === $.FONT) {\n        bStartTagInBody(p, token);\n      } else if (tn === $.NOBR) {\n        nobrStartTagInBody(p, token);\n      } else if (tn === $.AREA) {\n        areaStartTagInBody(p, token);\n      } else if (tn === $.MATH) {\n        mathStartTagInBody(p, token);\n      } else if (tn === $.MENU) {\n        menuStartTagInBody(p, token);\n      } else if (tn !== $.HEAD) {\n        genericStartTagInBody(p, token);\n      }\n      break;\n    case 5:\n      if (tn === $.STYLE || tn === $.TITLE) {\n        startTagInHead(p, token);\n      } else if (tn === $.ASIDE) {\n        addressStartTagInBody(p, token);\n      } else if (tn === $.SMALL) {\n        bStartTagInBody(p, token);\n      } else if (tn === $.TABLE) {\n        tableStartTagInBody(p, token);\n      } else if (tn === $.EMBED) {\n        areaStartTagInBody(p, token);\n      } else if (tn === $.INPUT) {\n        inputStartTagInBody(p, token);\n      } else if (tn === $.PARAM || tn === $.TRACK) {\n        paramStartTagInBody(p, token);\n      } else if (tn === $.IMAGE) {\n        imageStartTagInBody(p, token);\n      } else if (tn !== $.FRAME && tn !== $.TBODY && tn !== $.TFOOT && tn !== $.THEAD) {\n        genericStartTagInBody(p, token);\n      }\n      break;\n    case 6:\n      if (tn === $.SCRIPT) {\n        startTagInHead(p, token);\n      } else if (tn === $.CENTER || tn === $.FIGURE || tn === $.FOOTER || tn === $.HEADER || tn === $.HGROUP || tn === $.DIALOG) {\n        addressStartTagInBody(p, token);\n      } else if (tn === $.BUTTON) {\n        buttonStartTagInBody(p, token);\n      } else if (tn === $.STRIKE || tn === $.STRONG) {\n        bStartTagInBody(p, token);\n      } else if (tn === $.APPLET || tn === $.OBJECT) {\n        appletStartTagInBody(p, token);\n      } else if (tn === $.KEYGEN) {\n        areaStartTagInBody(p, token);\n      } else if (tn === $.SOURCE) {\n        paramStartTagInBody(p, token);\n      } else if (tn === $.IFRAME) {\n        iframeStartTagInBody(p, token);\n      } else if (tn === $.SELECT) {\n        selectStartTagInBody(p, token);\n      } else if (tn === $.OPTION) {\n        optgroupStartTagInBody(p, token);\n      } else {\n        genericStartTagInBody(p, token);\n      }\n      break;\n    case 7:\n      if (tn === $.BGSOUND) {\n        startTagInHead(p, token);\n      } else if (tn === $.DETAILS || tn === $.ADDRESS || tn === $.ARTICLE || tn === $.SECTION || tn === $.SUMMARY) {\n        addressStartTagInBody(p, token);\n      } else if (tn === $.LISTING) {\n        preStartTagInBody(p, token);\n      } else if (tn === $.MARQUEE) {\n        appletStartTagInBody(p, token);\n      } else if (tn === $.NOEMBED) {\n        noembedStartTagInBody(p, token);\n      } else if (tn !== $.CAPTION) {\n        genericStartTagInBody(p, token);\n      }\n      break;\n    case 8:\n      if (tn === $.BASEFONT) {\n        startTagInHead(p, token);\n      } else if (tn === $.FRAMESET) {\n        framesetStartTagInBody(p, token);\n      } else if (tn === $.FIELDSET) {\n        addressStartTagInBody(p, token);\n      } else if (tn === $.TEXTAREA) {\n        textareaStartTagInBody(p, token);\n      } else if (tn === $.TEMPLATE) {\n        startTagInHead(p, token);\n      } else if (tn === $.NOSCRIPT) {\n        if (p.options.scriptingEnabled) {\n          noembedStartTagInBody(p, token);\n        } else {\n          genericStartTagInBody(p, token);\n        }\n      } else if (tn === $.OPTGROUP) {\n        optgroupStartTagInBody(p, token);\n      } else if (tn !== $.COLGROUP) {\n        genericStartTagInBody(p, token);\n      }\n      break;\n    case 9:\n      if (tn === $.PLAINTEXT) {\n        plaintextStartTagInBody(p, token);\n      } else {\n        genericStartTagInBody(p, token);\n      }\n      break;\n    case 10:\n      if (tn === $.BLOCKQUOTE || tn === $.FIGCAPTION) {\n        addressStartTagInBody(p, token);\n      } else {\n        genericStartTagInBody(p, token);\n      }\n      break;\n    default:\n      genericStartTagInBody(p, token);\n  }\n}\nfunction bodyEndTagInBody(p) {\n  if (p.openElements.hasInScope($.BODY)) {\n    p.insertionMode = AFTER_BODY_MODE;\n  }\n}\nfunction htmlEndTagInBody(p, token) {\n  if (p.openElements.hasInScope($.BODY)) {\n    p.insertionMode = AFTER_BODY_MODE;\n    p._processToken(token);\n  }\n}\nfunction addressEndTagInBody(p, token) {\n  var tn = token.tagName;\n  if (p.openElements.hasInScope(tn)) {\n    p.openElements.generateImpliedEndTags();\n    p.openElements.popUntilTagNamePopped(tn);\n  }\n}\nfunction formEndTagInBody(p) {\n  var inTemplate = p.openElements.tmplCount > 0;\n  var formElement = p.formElement;\n  if (!inTemplate) {\n    p.formElement = null;\n  }\n  if ((formElement || inTemplate) && p.openElements.hasInScope($.FORM)) {\n    p.openElements.generateImpliedEndTags();\n    if (inTemplate) {\n      p.openElements.popUntilTagNamePopped($.FORM);\n    } else {\n      p.openElements.remove(formElement);\n    }\n  }\n}\nfunction pEndTagInBody(p) {\n  if (!p.openElements.hasInButtonScope($.P)) {\n    p._insertFakeElement($.P);\n  }\n  p._closePElement();\n}\nfunction liEndTagInBody(p) {\n  if (p.openElements.hasInListItemScope($.LI)) {\n    p.openElements.generateImpliedEndTagsWithExclusion($.LI);\n    p.openElements.popUntilTagNamePopped($.LI);\n  }\n}\nfunction ddEndTagInBody(p, token) {\n  var tn = token.tagName;\n  if (p.openElements.hasInScope(tn)) {\n    p.openElements.generateImpliedEndTagsWithExclusion(tn);\n    p.openElements.popUntilTagNamePopped(tn);\n  }\n}\nfunction numberedHeaderEndTagInBody(p) {\n  if (p.openElements.hasNumberedHeaderInScope()) {\n    p.openElements.generateImpliedEndTags();\n    p.openElements.popUntilNumberedHeaderPopped();\n  }\n}\nfunction appletEndTagInBody(p, token) {\n  var tn = token.tagName;\n  if (p.openElements.hasInScope(tn)) {\n    p.openElements.generateImpliedEndTags();\n    p.openElements.popUntilTagNamePopped(tn);\n    p.activeFormattingElements.clearToLastMarker();\n  }\n}\nfunction brEndTagInBody(p) {\n  p._reconstructActiveFormattingElements();\n  p._insertFakeElement($.BR);\n  p.openElements.pop();\n  p.framesetOk = false;\n}\nfunction genericEndTagInBody(p, token) {\n  var tn = token.tagName;\n  for (var i = p.openElements.stackTop; i > 0; i--) {\n    var element = p.openElements.items[i];\n    if (p.treeAdapter.getTagName(element) === tn) {\n      p.openElements.generateImpliedEndTagsWithExclusion(tn);\n      p.openElements.popUntilElementPopped(element);\n      break;\n    }\n    if (p._isSpecialElement(element)) {\n      break;\n    }\n  }\n}\n\n//OPTIMIZATION: Integer comparisons are low-cost, so we can use very fast tag name length filters here.\n//It's faster than using dictionary.\nfunction endTagInBody(p, token) {\n  var tn = token.tagName;\n  switch (tn.length) {\n    case 1:\n      if (tn === $.A || tn === $.B || tn === $.I || tn === $.S || tn === $.U) {\n        callAdoptionAgency(p, token);\n      } else if (tn === $.P) {\n        pEndTagInBody(p, token);\n      } else {\n        genericEndTagInBody(p, token);\n      }\n      break;\n    case 2:\n      if (tn === $.DL || tn === $.UL || tn === $.OL) {\n        addressEndTagInBody(p, token);\n      } else if (tn === $.LI) {\n        liEndTagInBody(p, token);\n      } else if (tn === $.DD || tn === $.DT) {\n        ddEndTagInBody(p, token);\n      } else if (tn === $.H1 || tn === $.H2 || tn === $.H3 || tn === $.H4 || tn === $.H5 || tn === $.H6) {\n        numberedHeaderEndTagInBody(p, token);\n      } else if (tn === $.BR) {\n        brEndTagInBody(p, token);\n      } else if (tn === $.EM || tn === $.TT) {\n        callAdoptionAgency(p, token);\n      } else {\n        genericEndTagInBody(p, token);\n      }\n      break;\n    case 3:\n      if (tn === $.BIG) {\n        callAdoptionAgency(p, token);\n      } else if (tn === $.DIR || tn === $.DIV || tn === $.NAV || tn === $.PRE) {\n        addressEndTagInBody(p, token);\n      } else {\n        genericEndTagInBody(p, token);\n      }\n      break;\n    case 4:\n      if (tn === $.BODY) {\n        bodyEndTagInBody(p, token);\n      } else if (tn === $.HTML) {\n        htmlEndTagInBody(p, token);\n      } else if (tn === $.FORM) {\n        formEndTagInBody(p, token);\n      } else if (tn === $.CODE || tn === $.FONT || tn === $.NOBR) {\n        callAdoptionAgency(p, token);\n      } else if (tn === $.MAIN || tn === $.MENU) {\n        addressEndTagInBody(p, token);\n      } else {\n        genericEndTagInBody(p, token);\n      }\n      break;\n    case 5:\n      if (tn === $.ASIDE) {\n        addressEndTagInBody(p, token);\n      } else if (tn === $.SMALL) {\n        callAdoptionAgency(p, token);\n      } else {\n        genericEndTagInBody(p, token);\n      }\n      break;\n    case 6:\n      if (tn === $.CENTER || tn === $.FIGURE || tn === $.FOOTER || tn === $.HEADER || tn === $.HGROUP || tn === $.DIALOG) {\n        addressEndTagInBody(p, token);\n      } else if (tn === $.APPLET || tn === $.OBJECT) {\n        appletEndTagInBody(p, token);\n      } else if (tn === $.STRIKE || tn === $.STRONG) {\n        callAdoptionAgency(p, token);\n      } else {\n        genericEndTagInBody(p, token);\n      }\n      break;\n    case 7:\n      if (tn === $.ADDRESS || tn === $.ARTICLE || tn === $.DETAILS || tn === $.SECTION || tn === $.SUMMARY || tn === $.LISTING) {\n        addressEndTagInBody(p, token);\n      } else if (tn === $.MARQUEE) {\n        appletEndTagInBody(p, token);\n      } else {\n        genericEndTagInBody(p, token);\n      }\n      break;\n    case 8:\n      if (tn === $.FIELDSET) {\n        addressEndTagInBody(p, token);\n      } else if (tn === $.TEMPLATE) {\n        endTagInHead(p, token);\n      } else {\n        genericEndTagInBody(p, token);\n      }\n      break;\n    case 10:\n      if (tn === $.BLOCKQUOTE || tn === $.FIGCAPTION) {\n        addressEndTagInBody(p, token);\n      } else {\n        genericEndTagInBody(p, token);\n      }\n      break;\n    default:\n      genericEndTagInBody(p, token);\n  }\n}\nfunction eofInBody(p, token) {\n  if (p.tmplInsertionModeStackTop > -1) {\n    eofInTemplate(p, token);\n  } else {\n    p.stopped = true;\n  }\n}\n\n// The \"text\" insertion mode\n//------------------------------------------------------------------\nfunction endTagInText(p, token) {\n  if (token.tagName === $.SCRIPT) {\n    p.pendingScript = p.openElements.current;\n  }\n  p.openElements.pop();\n  p.insertionMode = p.originalInsertionMode;\n}\nfunction eofInText(p, token) {\n  p._err(ERR.eofInElementThatCanContainOnlyText);\n  p.openElements.pop();\n  p.insertionMode = p.originalInsertionMode;\n  p._processToken(token);\n}\n\n// The \"in table\" insertion mode\n//------------------------------------------------------------------\nfunction characterInTable(p, token) {\n  var curTn = p.openElements.currentTagName;\n  if (curTn === $.TABLE || curTn === $.TBODY || curTn === $.TFOOT || curTn === $.THEAD || curTn === $.TR) {\n    p.pendingCharacterTokens = [];\n    p.hasNonWhitespacePendingCharacterToken = false;\n    p.originalInsertionMode = p.insertionMode;\n    p.insertionMode = IN_TABLE_TEXT_MODE;\n    p._processToken(token);\n  } else {\n    tokenInTable(p, token);\n  }\n}\nfunction captionStartTagInTable(p, token) {\n  p.openElements.clearBackToTableContext();\n  p.activeFormattingElements.insertMarker();\n  p._insertElement(token, NS.HTML);\n  p.insertionMode = IN_CAPTION_MODE;\n}\nfunction colgroupStartTagInTable(p, token) {\n  p.openElements.clearBackToTableContext();\n  p._insertElement(token, NS.HTML);\n  p.insertionMode = IN_COLUMN_GROUP_MODE;\n}\nfunction colStartTagInTable(p, token) {\n  p.openElements.clearBackToTableContext();\n  p._insertFakeElement($.COLGROUP);\n  p.insertionMode = IN_COLUMN_GROUP_MODE;\n  p._processToken(token);\n}\nfunction tbodyStartTagInTable(p, token) {\n  p.openElements.clearBackToTableContext();\n  p._insertElement(token, NS.HTML);\n  p.insertionMode = IN_TABLE_BODY_MODE;\n}\nfunction tdStartTagInTable(p, token) {\n  p.openElements.clearBackToTableContext();\n  p._insertFakeElement($.TBODY);\n  p.insertionMode = IN_TABLE_BODY_MODE;\n  p._processToken(token);\n}\nfunction tableStartTagInTable(p, token) {\n  if (p.openElements.hasInTableScope($.TABLE)) {\n    p.openElements.popUntilTagNamePopped($.TABLE);\n    p._resetInsertionMode();\n    p._processToken(token);\n  }\n}\nfunction inputStartTagInTable(p, token) {\n  var inputType = Tokenizer.getTokenAttr(token, ATTRS.TYPE);\n  if (inputType && inputType.toLowerCase() === HIDDEN_INPUT_TYPE) {\n    p._appendElement(token, NS.HTML);\n  } else {\n    tokenInTable(p, token);\n  }\n  token.ackSelfClosing = true;\n}\nfunction formStartTagInTable(p, token) {\n  if (!p.formElement && p.openElements.tmplCount === 0) {\n    p._insertElement(token, NS.HTML);\n    p.formElement = p.openElements.current;\n    p.openElements.pop();\n  }\n}\nfunction startTagInTable(p, token) {\n  var tn = token.tagName;\n  switch (tn.length) {\n    case 2:\n      if (tn === $.TD || tn === $.TH || tn === $.TR) {\n        tdStartTagInTable(p, token);\n      } else {\n        tokenInTable(p, token);\n      }\n      break;\n    case 3:\n      if (tn === $.COL) {\n        colStartTagInTable(p, token);\n      } else {\n        tokenInTable(p, token);\n      }\n      break;\n    case 4:\n      if (tn === $.FORM) {\n        formStartTagInTable(p, token);\n      } else {\n        tokenInTable(p, token);\n      }\n      break;\n    case 5:\n      if (tn === $.TABLE) {\n        tableStartTagInTable(p, token);\n      } else if (tn === $.STYLE) {\n        startTagInHead(p, token);\n      } else if (tn === $.TBODY || tn === $.TFOOT || tn === $.THEAD) {\n        tbodyStartTagInTable(p, token);\n      } else if (tn === $.INPUT) {\n        inputStartTagInTable(p, token);\n      } else {\n        tokenInTable(p, token);\n      }\n      break;\n    case 6:\n      if (tn === $.SCRIPT) {\n        startTagInHead(p, token);\n      } else {\n        tokenInTable(p, token);\n      }\n      break;\n    case 7:\n      if (tn === $.CAPTION) {\n        captionStartTagInTable(p, token);\n      } else {\n        tokenInTable(p, token);\n      }\n      break;\n    case 8:\n      if (tn === $.COLGROUP) {\n        colgroupStartTagInTable(p, token);\n      } else if (tn === $.TEMPLATE) {\n        startTagInHead(p, token);\n      } else {\n        tokenInTable(p, token);\n      }\n      break;\n    default:\n      tokenInTable(p, token);\n  }\n}\nfunction endTagInTable(p, token) {\n  var tn = token.tagName;\n  if (tn === $.TABLE) {\n    if (p.openElements.hasInTableScope($.TABLE)) {\n      p.openElements.popUntilTagNamePopped($.TABLE);\n      p._resetInsertionMode();\n    }\n  } else if (tn === $.TEMPLATE) {\n    endTagInHead(p, token);\n  } else if (tn !== $.BODY && tn !== $.CAPTION && tn !== $.COL && tn !== $.COLGROUP && tn !== $.HTML && tn !== $.TBODY && tn !== $.TD && tn !== $.TFOOT && tn !== $.TH && tn !== $.THEAD && tn !== $.TR) {\n    tokenInTable(p, token);\n  }\n}\nfunction tokenInTable(p, token) {\n  var savedFosterParentingState = p.fosterParentingEnabled;\n  p.fosterParentingEnabled = true;\n  p._processTokenInBodyMode(token);\n  p.fosterParentingEnabled = savedFosterParentingState;\n}\n\n// The \"in table text\" insertion mode\n//------------------------------------------------------------------\nfunction whitespaceCharacterInTableText(p, token) {\n  p.pendingCharacterTokens.push(token);\n}\nfunction characterInTableText(p, token) {\n  p.pendingCharacterTokens.push(token);\n  p.hasNonWhitespacePendingCharacterToken = true;\n}\nfunction tokenInTableText(p, token) {\n  var i = 0;\n  if (p.hasNonWhitespacePendingCharacterToken) {\n    for (; i < p.pendingCharacterTokens.length; i++) {\n      tokenInTable(p, p.pendingCharacterTokens[i]);\n    }\n  } else {\n    for (; i < p.pendingCharacterTokens.length; i++) {\n      p._insertCharacters(p.pendingCharacterTokens[i]);\n    }\n  }\n  p.insertionMode = p.originalInsertionMode;\n  p._processToken(token);\n}\n\n// The \"in caption\" insertion mode\n//------------------------------------------------------------------\nfunction startTagInCaption(p, token) {\n  var tn = token.tagName;\n  if (tn === $.CAPTION || tn === $.COL || tn === $.COLGROUP || tn === $.TBODY || tn === $.TD || tn === $.TFOOT || tn === $.TH || tn === $.THEAD || tn === $.TR) {\n    if (p.openElements.hasInTableScope($.CAPTION)) {\n      p.openElements.generateImpliedEndTags();\n      p.openElements.popUntilTagNamePopped($.CAPTION);\n      p.activeFormattingElements.clearToLastMarker();\n      p.insertionMode = IN_TABLE_MODE;\n      p._processToken(token);\n    }\n  } else {\n    startTagInBody(p, token);\n  }\n}\nfunction endTagInCaption(p, token) {\n  var tn = token.tagName;\n  if (tn === $.CAPTION || tn === $.TABLE) {\n    if (p.openElements.hasInTableScope($.CAPTION)) {\n      p.openElements.generateImpliedEndTags();\n      p.openElements.popUntilTagNamePopped($.CAPTION);\n      p.activeFormattingElements.clearToLastMarker();\n      p.insertionMode = IN_TABLE_MODE;\n      if (tn === $.TABLE) {\n        p._processToken(token);\n      }\n    }\n  } else if (tn !== $.BODY && tn !== $.COL && tn !== $.COLGROUP && tn !== $.HTML && tn !== $.TBODY && tn !== $.TD && tn !== $.TFOOT && tn !== $.TH && tn !== $.THEAD && tn !== $.TR) {\n    endTagInBody(p, token);\n  }\n}\n\n// The \"in column group\" insertion mode\n//------------------------------------------------------------------\nfunction startTagInColumnGroup(p, token) {\n  var tn = token.tagName;\n  if (tn === $.HTML) {\n    startTagInBody(p, token);\n  } else if (tn === $.COL) {\n    p._appendElement(token, NS.HTML);\n    token.ackSelfClosing = true;\n  } else if (tn === $.TEMPLATE) {\n    startTagInHead(p, token);\n  } else {\n    tokenInColumnGroup(p, token);\n  }\n}\nfunction endTagInColumnGroup(p, token) {\n  var tn = token.tagName;\n  if (tn === $.COLGROUP) {\n    if (p.openElements.currentTagName === $.COLGROUP) {\n      p.openElements.pop();\n      p.insertionMode = IN_TABLE_MODE;\n    }\n  } else if (tn === $.TEMPLATE) {\n    endTagInHead(p, token);\n  } else if (tn !== $.COL) {\n    tokenInColumnGroup(p, token);\n  }\n}\nfunction tokenInColumnGroup(p, token) {\n  if (p.openElements.currentTagName === $.COLGROUP) {\n    p.openElements.pop();\n    p.insertionMode = IN_TABLE_MODE;\n    p._processToken(token);\n  }\n}\n\n// The \"in table body\" insertion mode\n//------------------------------------------------------------------\nfunction startTagInTableBody(p, token) {\n  var tn = token.tagName;\n  if (tn === $.TR) {\n    p.openElements.clearBackToTableBodyContext();\n    p._insertElement(token, NS.HTML);\n    p.insertionMode = IN_ROW_MODE;\n  } else if (tn === $.TH || tn === $.TD) {\n    p.openElements.clearBackToTableBodyContext();\n    p._insertFakeElement($.TR);\n    p.insertionMode = IN_ROW_MODE;\n    p._processToken(token);\n  } else if (tn === $.CAPTION || tn === $.COL || tn === $.COLGROUP || tn === $.TBODY || tn === $.TFOOT || tn === $.THEAD) {\n    if (p.openElements.hasTableBodyContextInTableScope()) {\n      p.openElements.clearBackToTableBodyContext();\n      p.openElements.pop();\n      p.insertionMode = IN_TABLE_MODE;\n      p._processToken(token);\n    }\n  } else {\n    startTagInTable(p, token);\n  }\n}\nfunction endTagInTableBody(p, token) {\n  var tn = token.tagName;\n  if (tn === $.TBODY || tn === $.TFOOT || tn === $.THEAD) {\n    if (p.openElements.hasInTableScope(tn)) {\n      p.openElements.clearBackToTableBodyContext();\n      p.openElements.pop();\n      p.insertionMode = IN_TABLE_MODE;\n    }\n  } else if (tn === $.TABLE) {\n    if (p.openElements.hasTableBodyContextInTableScope()) {\n      p.openElements.clearBackToTableBodyContext();\n      p.openElements.pop();\n      p.insertionMode = IN_TABLE_MODE;\n      p._processToken(token);\n    }\n  } else if (tn !== $.BODY && tn !== $.CAPTION && tn !== $.COL && tn !== $.COLGROUP || tn !== $.HTML && tn !== $.TD && tn !== $.TH && tn !== $.TR) {\n    endTagInTable(p, token);\n  }\n}\n\n// The \"in row\" insertion mode\n//------------------------------------------------------------------\nfunction startTagInRow(p, token) {\n  var tn = token.tagName;\n  if (tn === $.TH || tn === $.TD) {\n    p.openElements.clearBackToTableRowContext();\n    p._insertElement(token, NS.HTML);\n    p.insertionMode = IN_CELL_MODE;\n    p.activeFormattingElements.insertMarker();\n  } else if (tn === $.CAPTION || tn === $.COL || tn === $.COLGROUP || tn === $.TBODY || tn === $.TFOOT || tn === $.THEAD || tn === $.TR) {\n    if (p.openElements.hasInTableScope($.TR)) {\n      p.openElements.clearBackToTableRowContext();\n      p.openElements.pop();\n      p.insertionMode = IN_TABLE_BODY_MODE;\n      p._processToken(token);\n    }\n  } else {\n    startTagInTable(p, token);\n  }\n}\nfunction endTagInRow(p, token) {\n  var tn = token.tagName;\n  if (tn === $.TR) {\n    if (p.openElements.hasInTableScope($.TR)) {\n      p.openElements.clearBackToTableRowContext();\n      p.openElements.pop();\n      p.insertionMode = IN_TABLE_BODY_MODE;\n    }\n  } else if (tn === $.TABLE) {\n    if (p.openElements.hasInTableScope($.TR)) {\n      p.openElements.clearBackToTableRowContext();\n      p.openElements.pop();\n      p.insertionMode = IN_TABLE_BODY_MODE;\n      p._processToken(token);\n    }\n  } else if (tn === $.TBODY || tn === $.TFOOT || tn === $.THEAD) {\n    if (p.openElements.hasInTableScope(tn) || p.openElements.hasInTableScope($.TR)) {\n      p.openElements.clearBackToTableRowContext();\n      p.openElements.pop();\n      p.insertionMode = IN_TABLE_BODY_MODE;\n      p._processToken(token);\n    }\n  } else if (tn !== $.BODY && tn !== $.CAPTION && tn !== $.COL && tn !== $.COLGROUP || tn !== $.HTML && tn !== $.TD && tn !== $.TH) {\n    endTagInTable(p, token);\n  }\n}\n\n// The \"in cell\" insertion mode\n//------------------------------------------------------------------\nfunction startTagInCell(p, token) {\n  var tn = token.tagName;\n  if (tn === $.CAPTION || tn === $.COL || tn === $.COLGROUP || tn === $.TBODY || tn === $.TD || tn === $.TFOOT || tn === $.TH || tn === $.THEAD || tn === $.TR) {\n    if (p.openElements.hasInTableScope($.TD) || p.openElements.hasInTableScope($.TH)) {\n      p._closeTableCell();\n      p._processToken(token);\n    }\n  } else {\n    startTagInBody(p, token);\n  }\n}\nfunction endTagInCell(p, token) {\n  var tn = token.tagName;\n  if (tn === $.TD || tn === $.TH) {\n    if (p.openElements.hasInTableScope(tn)) {\n      p.openElements.generateImpliedEndTags();\n      p.openElements.popUntilTagNamePopped(tn);\n      p.activeFormattingElements.clearToLastMarker();\n      p.insertionMode = IN_ROW_MODE;\n    }\n  } else if (tn === $.TABLE || tn === $.TBODY || tn === $.TFOOT || tn === $.THEAD || tn === $.TR) {\n    if (p.openElements.hasInTableScope(tn)) {\n      p._closeTableCell();\n      p._processToken(token);\n    }\n  } else if (tn !== $.BODY && tn !== $.CAPTION && tn !== $.COL && tn !== $.COLGROUP && tn !== $.HTML) {\n    endTagInBody(p, token);\n  }\n}\n\n// The \"in select\" insertion mode\n//------------------------------------------------------------------\nfunction startTagInSelect(p, token) {\n  var tn = token.tagName;\n  if (tn === $.HTML) {\n    startTagInBody(p, token);\n  } else if (tn === $.OPTION) {\n    if (p.openElements.currentTagName === $.OPTION) {\n      p.openElements.pop();\n    }\n    p._insertElement(token, NS.HTML);\n  } else if (tn === $.OPTGROUP) {\n    if (p.openElements.currentTagName === $.OPTION) {\n      p.openElements.pop();\n    }\n    if (p.openElements.currentTagName === $.OPTGROUP) {\n      p.openElements.pop();\n    }\n    p._insertElement(token, NS.HTML);\n  } else if (tn === $.INPUT || tn === $.KEYGEN || tn === $.TEXTAREA || tn === $.SELECT) {\n    if (p.openElements.hasInSelectScope($.SELECT)) {\n      p.openElements.popUntilTagNamePopped($.SELECT);\n      p._resetInsertionMode();\n      if (tn !== $.SELECT) {\n        p._processToken(token);\n      }\n    }\n  } else if (tn === $.SCRIPT || tn === $.TEMPLATE) {\n    startTagInHead(p, token);\n  }\n}\nfunction endTagInSelect(p, token) {\n  var tn = token.tagName;\n  if (tn === $.OPTGROUP) {\n    var prevOpenElement = p.openElements.items[p.openElements.stackTop - 1];\n    var prevOpenElementTn = prevOpenElement && p.treeAdapter.getTagName(prevOpenElement);\n    if (p.openElements.currentTagName === $.OPTION && prevOpenElementTn === $.OPTGROUP) {\n      p.openElements.pop();\n    }\n    if (p.openElements.currentTagName === $.OPTGROUP) {\n      p.openElements.pop();\n    }\n  } else if (tn === $.OPTION) {\n    if (p.openElements.currentTagName === $.OPTION) {\n      p.openElements.pop();\n    }\n  } else if (tn === $.SELECT && p.openElements.hasInSelectScope($.SELECT)) {\n    p.openElements.popUntilTagNamePopped($.SELECT);\n    p._resetInsertionMode();\n  } else if (tn === $.TEMPLATE) {\n    endTagInHead(p, token);\n  }\n}\n\n//12.2.5.4.17 The \"in select in table\" insertion mode\n//------------------------------------------------------------------\nfunction startTagInSelectInTable(p, token) {\n  var tn = token.tagName;\n  if (tn === $.CAPTION || tn === $.TABLE || tn === $.TBODY || tn === $.TFOOT || tn === $.THEAD || tn === $.TR || tn === $.TD || tn === $.TH) {\n    p.openElements.popUntilTagNamePopped($.SELECT);\n    p._resetInsertionMode();\n    p._processToken(token);\n  } else {\n    startTagInSelect(p, token);\n  }\n}\nfunction endTagInSelectInTable(p, token) {\n  var tn = token.tagName;\n  if (tn === $.CAPTION || tn === $.TABLE || tn === $.TBODY || tn === $.TFOOT || tn === $.THEAD || tn === $.TR || tn === $.TD || tn === $.TH) {\n    if (p.openElements.hasInTableScope(tn)) {\n      p.openElements.popUntilTagNamePopped($.SELECT);\n      p._resetInsertionMode();\n      p._processToken(token);\n    }\n  } else {\n    endTagInSelect(p, token);\n  }\n}\n\n// The \"in template\" insertion mode\n//------------------------------------------------------------------\nfunction startTagInTemplate(p, token) {\n  var tn = token.tagName;\n  if (tn === $.BASE || tn === $.BASEFONT || tn === $.BGSOUND || tn === $.LINK || tn === $.META || tn === $.NOFRAMES || tn === $.SCRIPT || tn === $.STYLE || tn === $.TEMPLATE || tn === $.TITLE) {\n    startTagInHead(p, token);\n  } else {\n    var newInsertionMode = TEMPLATE_INSERTION_MODE_SWITCH_MAP[tn] || IN_BODY_MODE;\n    p._popTmplInsertionMode();\n    p._pushTmplInsertionMode(newInsertionMode);\n    p.insertionMode = newInsertionMode;\n    p._processToken(token);\n  }\n}\nfunction endTagInTemplate(p, token) {\n  if (token.tagName === $.TEMPLATE) {\n    endTagInHead(p, token);\n  }\n}\nfunction eofInTemplate(p, token) {\n  if (p.openElements.tmplCount > 0) {\n    p.openElements.popUntilTagNamePopped($.TEMPLATE);\n    p.activeFormattingElements.clearToLastMarker();\n    p._popTmplInsertionMode();\n    p._resetInsertionMode();\n    p._processToken(token);\n  } else {\n    p.stopped = true;\n  }\n}\n\n// The \"after body\" insertion mode\n//------------------------------------------------------------------\nfunction startTagAfterBody(p, token) {\n  if (token.tagName === $.HTML) {\n    startTagInBody(p, token);\n  } else {\n    tokenAfterBody(p, token);\n  }\n}\nfunction endTagAfterBody(p, token) {\n  if (token.tagName === $.HTML) {\n    if (!p.fragmentContext) {\n      p.insertionMode = AFTER_AFTER_BODY_MODE;\n    }\n  } else {\n    tokenAfterBody(p, token);\n  }\n}\nfunction tokenAfterBody(p, token) {\n  p.insertionMode = IN_BODY_MODE;\n  p._processToken(token);\n}\n\n// The \"in frameset\" insertion mode\n//------------------------------------------------------------------\nfunction startTagInFrameset(p, token) {\n  var tn = token.tagName;\n  if (tn === $.HTML) {\n    startTagInBody(p, token);\n  } else if (tn === $.FRAMESET) {\n    p._insertElement(token, NS.HTML);\n  } else if (tn === $.FRAME) {\n    p._appendElement(token, NS.HTML);\n    token.ackSelfClosing = true;\n  } else if (tn === $.NOFRAMES) {\n    startTagInHead(p, token);\n  }\n}\nfunction endTagInFrameset(p, token) {\n  if (token.tagName === $.FRAMESET && !p.openElements.isRootHtmlElementCurrent()) {\n    p.openElements.pop();\n    if (!p.fragmentContext && p.openElements.currentTagName !== $.FRAMESET) {\n      p.insertionMode = AFTER_FRAMESET_MODE;\n    }\n  }\n}\n\n// The \"after frameset\" insertion mode\n//------------------------------------------------------------------\nfunction startTagAfterFrameset(p, token) {\n  var tn = token.tagName;\n  if (tn === $.HTML) {\n    startTagInBody(p, token);\n  } else if (tn === $.NOFRAMES) {\n    startTagInHead(p, token);\n  }\n}\nfunction endTagAfterFrameset(p, token) {\n  if (token.tagName === $.HTML) {\n    p.insertionMode = AFTER_AFTER_FRAMESET_MODE;\n  }\n}\n\n// The \"after after body\" insertion mode\n//------------------------------------------------------------------\nfunction startTagAfterAfterBody(p, token) {\n  if (token.tagName === $.HTML) {\n    startTagInBody(p, token);\n  } else {\n    tokenAfterAfterBody(p, token);\n  }\n}\nfunction tokenAfterAfterBody(p, token) {\n  p.insertionMode = IN_BODY_MODE;\n  p._processToken(token);\n}\n\n// The \"after after frameset\" insertion mode\n//------------------------------------------------------------------\nfunction startTagAfterAfterFrameset(p, token) {\n  var tn = token.tagName;\n  if (tn === $.HTML) {\n    startTagInBody(p, token);\n  } else if (tn === $.NOFRAMES) {\n    startTagInHead(p, token);\n  }\n}\n\n// The rules for parsing tokens in foreign content\n//------------------------------------------------------------------\nfunction nullCharacterInForeignContent(p, token) {\n  token.chars = unicode.REPLACEMENT_CHARACTER;\n  p._insertCharacters(token);\n}\nfunction characterInForeignContent(p, token) {\n  p._insertCharacters(token);\n  p.framesetOk = false;\n}\nfunction startTagInForeignContent(p, token) {\n  if (foreignContent.causesExit(token) && !p.fragmentContext) {\n    while (p.treeAdapter.getNamespaceURI(p.openElements.current) !== NS.HTML && !p._isIntegrationPoint(p.openElements.current)) {\n      p.openElements.pop();\n    }\n    p._processToken(token);\n  } else {\n    var current = p._getAdjustedCurrentElement();\n    var currentNs = p.treeAdapter.getNamespaceURI(current);\n    if (currentNs === NS.MATHML) {\n      foreignContent.adjustTokenMathMLAttrs(token);\n    } else if (currentNs === NS.SVG) {\n      foreignContent.adjustTokenSVGTagName(token);\n      foreignContent.adjustTokenSVGAttrs(token);\n    }\n    foreignContent.adjustTokenXMLAttrs(token);\n    if (token.selfClosing) {\n      p._appendElement(token, currentNs);\n    } else {\n      p._insertElement(token, currentNs);\n    }\n    token.ackSelfClosing = true;\n  }\n}\nfunction endTagInForeignContent(p, token) {\n  for (var i = p.openElements.stackTop; i > 0; i--) {\n    var element = p.openElements.items[i];\n    if (p.treeAdapter.getNamespaceURI(element) === NS.HTML) {\n      p._processToken(token);\n      break;\n    }\n    if (p.treeAdapter.getTagName(element).toLowerCase() === token.tagName) {\n      p.openElements.popUntilElementPopped(element);\n      break;\n    }\n  }\n}","map":{"version":3,"names":["Tokenizer","require","OpenElementStack","FormattingElementList","LocationInfoParserMixin","ErrorReportingParserMixin","Mixin","defaultTreeAdapter","mergeOptions","doctype","foreignContent","ERR","unicode","HTML","$","TAG_NAMES","NS","NAMESPACES","ATTRS","DEFAULT_OPTIONS","scriptingEnabled","sourceCodeLocationInfo","onParseError","treeAdapter","HIDDEN_INPUT_TYPE","AA_OUTER_LOOP_ITER","AA_INNER_LOOP_ITER","INITIAL_MODE","BEFORE_HTML_MODE","BEFORE_HEAD_MODE","IN_HEAD_MODE","IN_HEAD_NO_SCRIPT_MODE","AFTER_HEAD_MODE","IN_BODY_MODE","TEXT_MODE","IN_TABLE_MODE","IN_TABLE_TEXT_MODE","IN_CAPTION_MODE","IN_COLUMN_GROUP_MODE","IN_TABLE_BODY_MODE","IN_ROW_MODE","IN_CELL_MODE","IN_SELECT_MODE","IN_SELECT_IN_TABLE_MODE","IN_TEMPLATE_MODE","AFTER_BODY_MODE","IN_FRAMESET_MODE","AFTER_FRAMESET_MODE","AFTER_AFTER_BODY_MODE","AFTER_AFTER_FRAMESET_MODE","INSERTION_MODE_RESET_MAP","TR","TBODY","THEAD","TFOOT","CAPTION","COLGROUP","TABLE","BODY","FRAMESET","TEMPLATE_INSERTION_MODE_SWITCH_MAP","COL","TD","TH","TOKEN_HANDLERS","CHARACTER_TOKEN","tokenInInitialMode","NULL_CHARACTER_TOKEN","WHITESPACE_CHARACTER_TOKEN","ignoreToken","COMMENT_TOKEN","appendComment","DOCTYPE_TOKEN","doctypeInInitialMode","START_TAG_TOKEN","END_TAG_TOKEN","EOF_TOKEN","tokenBeforeHtml","startTagBeforeHtml","endTagBeforeHtml","tokenBeforeHead","misplacedDoctype","startTagBeforeHead","endTagBeforeHead","tokenInHead","insertCharacters","startTagInHead","endTagInHead","tokenInHeadNoScript","startTagInHeadNoScript","endTagInHeadNoScript","tokenAfterHead","startTagAfterHead","endTagAfterHead","characterInBody","whitespaceCharacterInBody","startTagInBody","endTagInBody","eofInBody","endTagInText","eofInText","characterInTable","startTagInTable","endTagInTable","characterInTableText","whitespaceCharacterInTableText","tokenInTableText","startTagInCaption","endTagInCaption","tokenInColumnGroup","startTagInColumnGroup","endTagInColumnGroup","startTagInTableBody","endTagInTableBody","startTagInRow","endTagInRow","startTagInCell","endTagInCell","startTagInSelect","endTagInSelect","startTagInSelectInTable","endTagInSelectInTable","startTagInTemplate","endTagInTemplate","eofInTemplate","tokenAfterBody","appendCommentToRootHtmlElement","startTagAfterBody","endTagAfterBody","stopParsing","startTagInFrameset","endTagInFrameset","startTagAfterFrameset","endTagAfterFrameset","tokenAfterAfterBody","appendCommentToDocument","startTagAfterAfterBody","startTagAfterAfterFrameset","Parser","options","pendingScript","install","html","document","createDocument","_bootstrap","tokenizer","write","_runParsingLoop","fragmentContext","createElement","TEMPLATE","documentMock","getTagName","_pushTmplInsertionMode","_initTokenizerForFragmentParsing","_insertFakeRootElement","_resetInsertionMode","_findFormInFragmentContext","rootElement","getFirstChild","fragment","createDocumentFragment","_adoptNodes","stopped","insertionMode","originalInsertionMode","headElement","formElement","openElements","activeFormattingElements","tmplInsertionModeStack","tmplInsertionModeStackTop","currentTmplInsertionMode","pendingCharacterTokens","hasNonWhitespacePendingCharacterToken","framesetOk","skipNextNewLine","fosterParentingEnabled","scriptHandler","_setupTokenizerCDATAMode","token","getNextToken","type","HIBERNATION_TOKEN","chars","length","substr","_processInputToken","writeCallback","script","current","_getAdjustedCurrentElement","allowCDATA","getNamespaceURI","_isIntegrationPoint","currentToken","nextTokenizerState","_insertElement","state","MODE","PLAINTEXT","stackTop","node","FORM","getParentNode","tn","TITLE","TEXTAREA","RCDATA","STYLE","XMP","IFRAME","NOEMBED","NOFRAMES","NOSCRIPT","RAWTEXT","SCRIPT","SCRIPT_DATA","name","publicId","systemId","setDocumentType","element","_shouldFosterParentOnInsertion","_fosterParentElement","parent","currentTmplContent","appendChild","namespaceURI","tagName","attrs","_attachElementToTree","push","tmpl","content","setTemplateContent","commentNode","createCommentNode","data","_fosterParentText","insertText","donor","recipient","child","detachNode","ns","ANNOTATION_XML","MATHML","SVG","isCharacterToken","isMathMLTextStartTag","MGLYPH","MALIGNMARK","characterInForeignContent","nullCharacterInForeignContent","startTagInForeignContent","endTagInForeignContent","_shouldProcessTokenInForeignContent","_processTokenInForeignContent","_processToken","selfClosing","ackSelfClosing","_err","nonVoidHtmlElementStartTagWithTrailingSolidus","foreignNS","getAttrList","isIntegrationPoint","listLength","unopenIdx","entry","entries","MARKER_ENTRY","contains","i","generateImpliedEndTags","popUntilTableCellPopped","clearToLastMarker","generateImpliedEndTagsWithExclusion","P","popUntilTagNamePopped","last","items","newInsertionMode","HEAD","SELECT","_resetInsertionModeForSelect","selectIdx","ancestor","mode","pop","_isElementCausesFosterParenting","location","beforeElement","openElement","getTemplateContent","_findFosterParentingLocation","insertBefore","insertTextBefore","SPECIAL_ELEMENTS","module","exports","aaObtainFormattingElementEntry","p","formattingElementEntry","getElementEntryInScopeWithTagName","removeEntry","hasInScope","genericEndTagInBody","aaObtainFurthestBlock","furthestBlock","_isSpecialElement","popUntilElementPopped","aaInnerLoop","formattingElement","lastElement","nextElement","getCommonAncestor","elementEntry","getElementEntry","counterOverflow","shouldRemoveFromOpenElements","remove","aaRecreateElementFromEntry","bookmark","newElement","replace","aaInsertLastNodeInCommonAncestor","commonAncestor","aaReplaceFormattingElement","insertElementAfterBookmark","insertAfter","callAdoptionAgency","_appendCommentNode","_insertCharacters","_setDocumentType","forceQuirks","DOCUMENT_MODE","QUIRKS","getDocumentMode","isConforming","nonConformingDoctype","setDocumentMode","missingDoctype","beforeToken","BR","endTagWithoutMatchingOpenElement","_insertFakeElement","BASE","BASEFONT","BGSOUND","LINK","META","_appendElement","_switchToTextParsing","_insertTemplate","insertMarker","misplacedStartTagForHeadElement","tmplCount","generateImpliedEndTagsThoroughly","currentTagName","closingOfElementWithOpenChildElements","_popTmplInsertionMode","nestedNoscriptInHead","errCode","openElementsLeftAfterEof","disallowedContentInNoscriptInHead","abandonedHeadElementChild","_reconstructActiveFormattingElements","htmlStartTagInBody","adoptAttributes","bodyStartTagInBody","bodyElement","tryPeekProperlyNestedBodyElement","framesetStartTagInBody","popAllUpToHtmlElement","addressStartTagInBody","hasInButtonScope","_closePElement","numberedHeaderStartTagInBody","H1","H2","H3","H4","H5","H6","preStartTagInBody","formStartTagInBody","inTemplate","listItemStartTagInBody","elementTn","closeTn","LI","DD","DT","ADDRESS","DIV","plaintextStartTagInBody","buttonStartTagInBody","BUTTON","aStartTagInBody","activeElementEntry","A","pushElement","bStartTagInBody","nobrStartTagInBody","NOBR","appletStartTagInBody","tableStartTagInBody","areaStartTagInBody","inputStartTagInBody","inputType","getTokenAttr","TYPE","toLowerCase","paramStartTagInBody","hrStartTagInBody","imageStartTagInBody","IMG","textareaStartTagInBody","xmpStartTagInBody","iframeStartTagInBody","noembedStartTagInBody","selectStartTagInBody","optgroupStartTagInBody","OPTION","rbStartTagInBody","RUBY","rtStartTagInBody","RTC","menuStartTagInBody","mathStartTagInBody","adjustTokenMathMLAttrs","adjustTokenXMLAttrs","svgStartTagInBody","adjustTokenSVGAttrs","genericStartTagInBody","I","S","B","U","DL","OL","UL","EM","TT","HR","RB","RT","RP","DIR","NAV","PRE","BIG","WBR","MAIN","MENU","CODE","FONT","AREA","MATH","ASIDE","SMALL","EMBED","INPUT","PARAM","TRACK","IMAGE","FRAME","CENTER","FIGURE","FOOTER","HEADER","HGROUP","DIALOG","STRIKE","STRONG","APPLET","OBJECT","KEYGEN","SOURCE","DETAILS","ARTICLE","SECTION","SUMMARY","LISTING","MARQUEE","FIELDSET","OPTGROUP","BLOCKQUOTE","FIGCAPTION","bodyEndTagInBody","htmlEndTagInBody","addressEndTagInBody","formEndTagInBody","pEndTagInBody","liEndTagInBody","hasInListItemScope","ddEndTagInBody","numberedHeaderEndTagInBody","hasNumberedHeaderInScope","popUntilNumberedHeaderPopped","appletEndTagInBody","brEndTagInBody","eofInElementThatCanContainOnlyText","curTn","tokenInTable","captionStartTagInTable","clearBackToTableContext","colgroupStartTagInTable","colStartTagInTable","tbodyStartTagInTable","tdStartTagInTable","tableStartTagInTable","hasInTableScope","inputStartTagInTable","formStartTagInTable","savedFosterParentingState","_processTokenInBodyMode","clearBackToTableBodyContext","hasTableBodyContextInTableScope","clearBackToTableRowContext","_closeTableCell","hasInSelectScope","prevOpenElement","prevOpenElementTn","isRootHtmlElementCurrent","REPLACEMENT_CHARACTER","causesExit","currentNs","adjustTokenSVGTagName"],"sources":["/home/kty/workspace/seb41_pre_001/client/node_modules/parse5/lib/parser/index.js"],"sourcesContent":["'use strict';\n\nconst Tokenizer = require('../tokenizer');\nconst OpenElementStack = require('./open-element-stack');\nconst FormattingElementList = require('./formatting-element-list');\nconst LocationInfoParserMixin = require('../extensions/location-info/parser-mixin');\nconst ErrorReportingParserMixin = require('../extensions/error-reporting/parser-mixin');\nconst Mixin = require('../utils/mixin');\nconst defaultTreeAdapter = require('../tree-adapters/default');\nconst mergeOptions = require('../utils/merge-options');\nconst doctype = require('../common/doctype');\nconst foreignContent = require('../common/foreign-content');\nconst ERR = require('../common/error-codes');\nconst unicode = require('../common/unicode');\nconst HTML = require('../common/html');\n\n//Aliases\nconst $ = HTML.TAG_NAMES;\nconst NS = HTML.NAMESPACES;\nconst ATTRS = HTML.ATTRS;\n\nconst DEFAULT_OPTIONS = {\n    scriptingEnabled: true,\n    sourceCodeLocationInfo: false,\n    onParseError: null,\n    treeAdapter: defaultTreeAdapter\n};\n\n//Misc constants\nconst HIDDEN_INPUT_TYPE = 'hidden';\n\n//Adoption agency loops iteration count\nconst AA_OUTER_LOOP_ITER = 8;\nconst AA_INNER_LOOP_ITER = 3;\n\n//Insertion modes\nconst INITIAL_MODE = 'INITIAL_MODE';\nconst BEFORE_HTML_MODE = 'BEFORE_HTML_MODE';\nconst BEFORE_HEAD_MODE = 'BEFORE_HEAD_MODE';\nconst IN_HEAD_MODE = 'IN_HEAD_MODE';\nconst IN_HEAD_NO_SCRIPT_MODE = 'IN_HEAD_NO_SCRIPT_MODE';\nconst AFTER_HEAD_MODE = 'AFTER_HEAD_MODE';\nconst IN_BODY_MODE = 'IN_BODY_MODE';\nconst TEXT_MODE = 'TEXT_MODE';\nconst IN_TABLE_MODE = 'IN_TABLE_MODE';\nconst IN_TABLE_TEXT_MODE = 'IN_TABLE_TEXT_MODE';\nconst IN_CAPTION_MODE = 'IN_CAPTION_MODE';\nconst IN_COLUMN_GROUP_MODE = 'IN_COLUMN_GROUP_MODE';\nconst IN_TABLE_BODY_MODE = 'IN_TABLE_BODY_MODE';\nconst IN_ROW_MODE = 'IN_ROW_MODE';\nconst IN_CELL_MODE = 'IN_CELL_MODE';\nconst IN_SELECT_MODE = 'IN_SELECT_MODE';\nconst IN_SELECT_IN_TABLE_MODE = 'IN_SELECT_IN_TABLE_MODE';\nconst IN_TEMPLATE_MODE = 'IN_TEMPLATE_MODE';\nconst AFTER_BODY_MODE = 'AFTER_BODY_MODE';\nconst IN_FRAMESET_MODE = 'IN_FRAMESET_MODE';\nconst AFTER_FRAMESET_MODE = 'AFTER_FRAMESET_MODE';\nconst AFTER_AFTER_BODY_MODE = 'AFTER_AFTER_BODY_MODE';\nconst AFTER_AFTER_FRAMESET_MODE = 'AFTER_AFTER_FRAMESET_MODE';\n\n//Insertion mode reset map\nconst INSERTION_MODE_RESET_MAP = {\n    [$.TR]: IN_ROW_MODE,\n    [$.TBODY]: IN_TABLE_BODY_MODE,\n    [$.THEAD]: IN_TABLE_BODY_MODE,\n    [$.TFOOT]: IN_TABLE_BODY_MODE,\n    [$.CAPTION]: IN_CAPTION_MODE,\n    [$.COLGROUP]: IN_COLUMN_GROUP_MODE,\n    [$.TABLE]: IN_TABLE_MODE,\n    [$.BODY]: IN_BODY_MODE,\n    [$.FRAMESET]: IN_FRAMESET_MODE\n};\n\n//Template insertion mode switch map\nconst TEMPLATE_INSERTION_MODE_SWITCH_MAP = {\n    [$.CAPTION]: IN_TABLE_MODE,\n    [$.COLGROUP]: IN_TABLE_MODE,\n    [$.TBODY]: IN_TABLE_MODE,\n    [$.TFOOT]: IN_TABLE_MODE,\n    [$.THEAD]: IN_TABLE_MODE,\n    [$.COL]: IN_COLUMN_GROUP_MODE,\n    [$.TR]: IN_TABLE_BODY_MODE,\n    [$.TD]: IN_ROW_MODE,\n    [$.TH]: IN_ROW_MODE\n};\n\n//Token handlers map for insertion modes\nconst TOKEN_HANDLERS = {\n    [INITIAL_MODE]: {\n        [Tokenizer.CHARACTER_TOKEN]: tokenInInitialMode,\n        [Tokenizer.NULL_CHARACTER_TOKEN]: tokenInInitialMode,\n        [Tokenizer.WHITESPACE_CHARACTER_TOKEN]: ignoreToken,\n        [Tokenizer.COMMENT_TOKEN]: appendComment,\n        [Tokenizer.DOCTYPE_TOKEN]: doctypeInInitialMode,\n        [Tokenizer.START_TAG_TOKEN]: tokenInInitialMode,\n        [Tokenizer.END_TAG_TOKEN]: tokenInInitialMode,\n        [Tokenizer.EOF_TOKEN]: tokenInInitialMode\n    },\n    [BEFORE_HTML_MODE]: {\n        [Tokenizer.CHARACTER_TOKEN]: tokenBeforeHtml,\n        [Tokenizer.NULL_CHARACTER_TOKEN]: tokenBeforeHtml,\n        [Tokenizer.WHITESPACE_CHARACTER_TOKEN]: ignoreToken,\n        [Tokenizer.COMMENT_TOKEN]: appendComment,\n        [Tokenizer.DOCTYPE_TOKEN]: ignoreToken,\n        [Tokenizer.START_TAG_TOKEN]: startTagBeforeHtml,\n        [Tokenizer.END_TAG_TOKEN]: endTagBeforeHtml,\n        [Tokenizer.EOF_TOKEN]: tokenBeforeHtml\n    },\n    [BEFORE_HEAD_MODE]: {\n        [Tokenizer.CHARACTER_TOKEN]: tokenBeforeHead,\n        [Tokenizer.NULL_CHARACTER_TOKEN]: tokenBeforeHead,\n        [Tokenizer.WHITESPACE_CHARACTER_TOKEN]: ignoreToken,\n        [Tokenizer.COMMENT_TOKEN]: appendComment,\n        [Tokenizer.DOCTYPE_TOKEN]: misplacedDoctype,\n        [Tokenizer.START_TAG_TOKEN]: startTagBeforeHead,\n        [Tokenizer.END_TAG_TOKEN]: endTagBeforeHead,\n        [Tokenizer.EOF_TOKEN]: tokenBeforeHead\n    },\n    [IN_HEAD_MODE]: {\n        [Tokenizer.CHARACTER_TOKEN]: tokenInHead,\n        [Tokenizer.NULL_CHARACTER_TOKEN]: tokenInHead,\n        [Tokenizer.WHITESPACE_CHARACTER_TOKEN]: insertCharacters,\n        [Tokenizer.COMMENT_TOKEN]: appendComment,\n        [Tokenizer.DOCTYPE_TOKEN]: misplacedDoctype,\n        [Tokenizer.START_TAG_TOKEN]: startTagInHead,\n        [Tokenizer.END_TAG_TOKEN]: endTagInHead,\n        [Tokenizer.EOF_TOKEN]: tokenInHead\n    },\n    [IN_HEAD_NO_SCRIPT_MODE]: {\n        [Tokenizer.CHARACTER_TOKEN]: tokenInHeadNoScript,\n        [Tokenizer.NULL_CHARACTER_TOKEN]: tokenInHeadNoScript,\n        [Tokenizer.WHITESPACE_CHARACTER_TOKEN]: insertCharacters,\n        [Tokenizer.COMMENT_TOKEN]: appendComment,\n        [Tokenizer.DOCTYPE_TOKEN]: misplacedDoctype,\n        [Tokenizer.START_TAG_TOKEN]: startTagInHeadNoScript,\n        [Tokenizer.END_TAG_TOKEN]: endTagInHeadNoScript,\n        [Tokenizer.EOF_TOKEN]: tokenInHeadNoScript\n    },\n    [AFTER_HEAD_MODE]: {\n        [Tokenizer.CHARACTER_TOKEN]: tokenAfterHead,\n        [Tokenizer.NULL_CHARACTER_TOKEN]: tokenAfterHead,\n        [Tokenizer.WHITESPACE_CHARACTER_TOKEN]: insertCharacters,\n        [Tokenizer.COMMENT_TOKEN]: appendComment,\n        [Tokenizer.DOCTYPE_TOKEN]: misplacedDoctype,\n        [Tokenizer.START_TAG_TOKEN]: startTagAfterHead,\n        [Tokenizer.END_TAG_TOKEN]: endTagAfterHead,\n        [Tokenizer.EOF_TOKEN]: tokenAfterHead\n    },\n    [IN_BODY_MODE]: {\n        [Tokenizer.CHARACTER_TOKEN]: characterInBody,\n        [Tokenizer.NULL_CHARACTER_TOKEN]: ignoreToken,\n        [Tokenizer.WHITESPACE_CHARACTER_TOKEN]: whitespaceCharacterInBody,\n        [Tokenizer.COMMENT_TOKEN]: appendComment,\n        [Tokenizer.DOCTYPE_TOKEN]: ignoreToken,\n        [Tokenizer.START_TAG_TOKEN]: startTagInBody,\n        [Tokenizer.END_TAG_TOKEN]: endTagInBody,\n        [Tokenizer.EOF_TOKEN]: eofInBody\n    },\n    [TEXT_MODE]: {\n        [Tokenizer.CHARACTER_TOKEN]: insertCharacters,\n        [Tokenizer.NULL_CHARACTER_TOKEN]: insertCharacters,\n        [Tokenizer.WHITESPACE_CHARACTER_TOKEN]: insertCharacters,\n        [Tokenizer.COMMENT_TOKEN]: ignoreToken,\n        [Tokenizer.DOCTYPE_TOKEN]: ignoreToken,\n        [Tokenizer.START_TAG_TOKEN]: ignoreToken,\n        [Tokenizer.END_TAG_TOKEN]: endTagInText,\n        [Tokenizer.EOF_TOKEN]: eofInText\n    },\n    [IN_TABLE_MODE]: {\n        [Tokenizer.CHARACTER_TOKEN]: characterInTable,\n        [Tokenizer.NULL_CHARACTER_TOKEN]: characterInTable,\n        [Tokenizer.WHITESPACE_CHARACTER_TOKEN]: characterInTable,\n        [Tokenizer.COMMENT_TOKEN]: appendComment,\n        [Tokenizer.DOCTYPE_TOKEN]: ignoreToken,\n        [Tokenizer.START_TAG_TOKEN]: startTagInTable,\n        [Tokenizer.END_TAG_TOKEN]: endTagInTable,\n        [Tokenizer.EOF_TOKEN]: eofInBody\n    },\n    [IN_TABLE_TEXT_MODE]: {\n        [Tokenizer.CHARACTER_TOKEN]: characterInTableText,\n        [Tokenizer.NULL_CHARACTER_TOKEN]: ignoreToken,\n        [Tokenizer.WHITESPACE_CHARACTER_TOKEN]: whitespaceCharacterInTableText,\n        [Tokenizer.COMMENT_TOKEN]: tokenInTableText,\n        [Tokenizer.DOCTYPE_TOKEN]: tokenInTableText,\n        [Tokenizer.START_TAG_TOKEN]: tokenInTableText,\n        [Tokenizer.END_TAG_TOKEN]: tokenInTableText,\n        [Tokenizer.EOF_TOKEN]: tokenInTableText\n    },\n    [IN_CAPTION_MODE]: {\n        [Tokenizer.CHARACTER_TOKEN]: characterInBody,\n        [Tokenizer.NULL_CHARACTER_TOKEN]: ignoreToken,\n        [Tokenizer.WHITESPACE_CHARACTER_TOKEN]: whitespaceCharacterInBody,\n        [Tokenizer.COMMENT_TOKEN]: appendComment,\n        [Tokenizer.DOCTYPE_TOKEN]: ignoreToken,\n        [Tokenizer.START_TAG_TOKEN]: startTagInCaption,\n        [Tokenizer.END_TAG_TOKEN]: endTagInCaption,\n        [Tokenizer.EOF_TOKEN]: eofInBody\n    },\n    [IN_COLUMN_GROUP_MODE]: {\n        [Tokenizer.CHARACTER_TOKEN]: tokenInColumnGroup,\n        [Tokenizer.NULL_CHARACTER_TOKEN]: tokenInColumnGroup,\n        [Tokenizer.WHITESPACE_CHARACTER_TOKEN]: insertCharacters,\n        [Tokenizer.COMMENT_TOKEN]: appendComment,\n        [Tokenizer.DOCTYPE_TOKEN]: ignoreToken,\n        [Tokenizer.START_TAG_TOKEN]: startTagInColumnGroup,\n        [Tokenizer.END_TAG_TOKEN]: endTagInColumnGroup,\n        [Tokenizer.EOF_TOKEN]: eofInBody\n    },\n    [IN_TABLE_BODY_MODE]: {\n        [Tokenizer.CHARACTER_TOKEN]: characterInTable,\n        [Tokenizer.NULL_CHARACTER_TOKEN]: characterInTable,\n        [Tokenizer.WHITESPACE_CHARACTER_TOKEN]: characterInTable,\n        [Tokenizer.COMMENT_TOKEN]: appendComment,\n        [Tokenizer.DOCTYPE_TOKEN]: ignoreToken,\n        [Tokenizer.START_TAG_TOKEN]: startTagInTableBody,\n        [Tokenizer.END_TAG_TOKEN]: endTagInTableBody,\n        [Tokenizer.EOF_TOKEN]: eofInBody\n    },\n    [IN_ROW_MODE]: {\n        [Tokenizer.CHARACTER_TOKEN]: characterInTable,\n        [Tokenizer.NULL_CHARACTER_TOKEN]: characterInTable,\n        [Tokenizer.WHITESPACE_CHARACTER_TOKEN]: characterInTable,\n        [Tokenizer.COMMENT_TOKEN]: appendComment,\n        [Tokenizer.DOCTYPE_TOKEN]: ignoreToken,\n        [Tokenizer.START_TAG_TOKEN]: startTagInRow,\n        [Tokenizer.END_TAG_TOKEN]: endTagInRow,\n        [Tokenizer.EOF_TOKEN]: eofInBody\n    },\n    [IN_CELL_MODE]: {\n        [Tokenizer.CHARACTER_TOKEN]: characterInBody,\n        [Tokenizer.NULL_CHARACTER_TOKEN]: ignoreToken,\n        [Tokenizer.WHITESPACE_CHARACTER_TOKEN]: whitespaceCharacterInBody,\n        [Tokenizer.COMMENT_TOKEN]: appendComment,\n        [Tokenizer.DOCTYPE_TOKEN]: ignoreToken,\n        [Tokenizer.START_TAG_TOKEN]: startTagInCell,\n        [Tokenizer.END_TAG_TOKEN]: endTagInCell,\n        [Tokenizer.EOF_TOKEN]: eofInBody\n    },\n    [IN_SELECT_MODE]: {\n        [Tokenizer.CHARACTER_TOKEN]: insertCharacters,\n        [Tokenizer.NULL_CHARACTER_TOKEN]: ignoreToken,\n        [Tokenizer.WHITESPACE_CHARACTER_TOKEN]: insertCharacters,\n        [Tokenizer.COMMENT_TOKEN]: appendComment,\n        [Tokenizer.DOCTYPE_TOKEN]: ignoreToken,\n        [Tokenizer.START_TAG_TOKEN]: startTagInSelect,\n        [Tokenizer.END_TAG_TOKEN]: endTagInSelect,\n        [Tokenizer.EOF_TOKEN]: eofInBody\n    },\n    [IN_SELECT_IN_TABLE_MODE]: {\n        [Tokenizer.CHARACTER_TOKEN]: insertCharacters,\n        [Tokenizer.NULL_CHARACTER_TOKEN]: ignoreToken,\n        [Tokenizer.WHITESPACE_CHARACTER_TOKEN]: insertCharacters,\n        [Tokenizer.COMMENT_TOKEN]: appendComment,\n        [Tokenizer.DOCTYPE_TOKEN]: ignoreToken,\n        [Tokenizer.START_TAG_TOKEN]: startTagInSelectInTable,\n        [Tokenizer.END_TAG_TOKEN]: endTagInSelectInTable,\n        [Tokenizer.EOF_TOKEN]: eofInBody\n    },\n    [IN_TEMPLATE_MODE]: {\n        [Tokenizer.CHARACTER_TOKEN]: characterInBody,\n        [Tokenizer.NULL_CHARACTER_TOKEN]: ignoreToken,\n        [Tokenizer.WHITESPACE_CHARACTER_TOKEN]: whitespaceCharacterInBody,\n        [Tokenizer.COMMENT_TOKEN]: appendComment,\n        [Tokenizer.DOCTYPE_TOKEN]: ignoreToken,\n        [Tokenizer.START_TAG_TOKEN]: startTagInTemplate,\n        [Tokenizer.END_TAG_TOKEN]: endTagInTemplate,\n        [Tokenizer.EOF_TOKEN]: eofInTemplate\n    },\n    [AFTER_BODY_MODE]: {\n        [Tokenizer.CHARACTER_TOKEN]: tokenAfterBody,\n        [Tokenizer.NULL_CHARACTER_TOKEN]: tokenAfterBody,\n        [Tokenizer.WHITESPACE_CHARACTER_TOKEN]: whitespaceCharacterInBody,\n        [Tokenizer.COMMENT_TOKEN]: appendCommentToRootHtmlElement,\n        [Tokenizer.DOCTYPE_TOKEN]: ignoreToken,\n        [Tokenizer.START_TAG_TOKEN]: startTagAfterBody,\n        [Tokenizer.END_TAG_TOKEN]: endTagAfterBody,\n        [Tokenizer.EOF_TOKEN]: stopParsing\n    },\n    [IN_FRAMESET_MODE]: {\n        [Tokenizer.CHARACTER_TOKEN]: ignoreToken,\n        [Tokenizer.NULL_CHARACTER_TOKEN]: ignoreToken,\n        [Tokenizer.WHITESPACE_CHARACTER_TOKEN]: insertCharacters,\n        [Tokenizer.COMMENT_TOKEN]: appendComment,\n        [Tokenizer.DOCTYPE_TOKEN]: ignoreToken,\n        [Tokenizer.START_TAG_TOKEN]: startTagInFrameset,\n        [Tokenizer.END_TAG_TOKEN]: endTagInFrameset,\n        [Tokenizer.EOF_TOKEN]: stopParsing\n    },\n    [AFTER_FRAMESET_MODE]: {\n        [Tokenizer.CHARACTER_TOKEN]: ignoreToken,\n        [Tokenizer.NULL_CHARACTER_TOKEN]: ignoreToken,\n        [Tokenizer.WHITESPACE_CHARACTER_TOKEN]: insertCharacters,\n        [Tokenizer.COMMENT_TOKEN]: appendComment,\n        [Tokenizer.DOCTYPE_TOKEN]: ignoreToken,\n        [Tokenizer.START_TAG_TOKEN]: startTagAfterFrameset,\n        [Tokenizer.END_TAG_TOKEN]: endTagAfterFrameset,\n        [Tokenizer.EOF_TOKEN]: stopParsing\n    },\n    [AFTER_AFTER_BODY_MODE]: {\n        [Tokenizer.CHARACTER_TOKEN]: tokenAfterAfterBody,\n        [Tokenizer.NULL_CHARACTER_TOKEN]: tokenAfterAfterBody,\n        [Tokenizer.WHITESPACE_CHARACTER_TOKEN]: whitespaceCharacterInBody,\n        [Tokenizer.COMMENT_TOKEN]: appendCommentToDocument,\n        [Tokenizer.DOCTYPE_TOKEN]: ignoreToken,\n        [Tokenizer.START_TAG_TOKEN]: startTagAfterAfterBody,\n        [Tokenizer.END_TAG_TOKEN]: tokenAfterAfterBody,\n        [Tokenizer.EOF_TOKEN]: stopParsing\n    },\n    [AFTER_AFTER_FRAMESET_MODE]: {\n        [Tokenizer.CHARACTER_TOKEN]: ignoreToken,\n        [Tokenizer.NULL_CHARACTER_TOKEN]: ignoreToken,\n        [Tokenizer.WHITESPACE_CHARACTER_TOKEN]: whitespaceCharacterInBody,\n        [Tokenizer.COMMENT_TOKEN]: appendCommentToDocument,\n        [Tokenizer.DOCTYPE_TOKEN]: ignoreToken,\n        [Tokenizer.START_TAG_TOKEN]: startTagAfterAfterFrameset,\n        [Tokenizer.END_TAG_TOKEN]: ignoreToken,\n        [Tokenizer.EOF_TOKEN]: stopParsing\n    }\n};\n\n//Parser\nclass Parser {\n    constructor(options) {\n        this.options = mergeOptions(DEFAULT_OPTIONS, options);\n\n        this.treeAdapter = this.options.treeAdapter;\n        this.pendingScript = null;\n\n        if (this.options.sourceCodeLocationInfo) {\n            Mixin.install(this, LocationInfoParserMixin);\n        }\n\n        if (this.options.onParseError) {\n            Mixin.install(this, ErrorReportingParserMixin, { onParseError: this.options.onParseError });\n        }\n    }\n\n    // API\n    parse(html) {\n        const document = this.treeAdapter.createDocument();\n\n        this._bootstrap(document, null);\n        this.tokenizer.write(html, true);\n        this._runParsingLoop(null);\n\n        return document;\n    }\n\n    parseFragment(html, fragmentContext) {\n        //NOTE: use <template> element as a fragment context if context element was not provided,\n        //so we will parse in \"forgiving\" manner\n        if (!fragmentContext) {\n            fragmentContext = this.treeAdapter.createElement($.TEMPLATE, NS.HTML, []);\n        }\n\n        //NOTE: create fake element which will be used as 'document' for fragment parsing.\n        //This is important for jsdom there 'document' can't be recreated, therefore\n        //fragment parsing causes messing of the main `document`.\n        const documentMock = this.treeAdapter.createElement('documentmock', NS.HTML, []);\n\n        this._bootstrap(documentMock, fragmentContext);\n\n        if (this.treeAdapter.getTagName(fragmentContext) === $.TEMPLATE) {\n            this._pushTmplInsertionMode(IN_TEMPLATE_MODE);\n        }\n\n        this._initTokenizerForFragmentParsing();\n        this._insertFakeRootElement();\n        this._resetInsertionMode();\n        this._findFormInFragmentContext();\n        this.tokenizer.write(html, true);\n        this._runParsingLoop(null);\n\n        const rootElement = this.treeAdapter.getFirstChild(documentMock);\n        const fragment = this.treeAdapter.createDocumentFragment();\n\n        this._adoptNodes(rootElement, fragment);\n\n        return fragment;\n    }\n\n    //Bootstrap parser\n    _bootstrap(document, fragmentContext) {\n        this.tokenizer = new Tokenizer(this.options);\n\n        this.stopped = false;\n\n        this.insertionMode = INITIAL_MODE;\n        this.originalInsertionMode = '';\n\n        this.document = document;\n        this.fragmentContext = fragmentContext;\n\n        this.headElement = null;\n        this.formElement = null;\n\n        this.openElements = new OpenElementStack(this.document, this.treeAdapter);\n        this.activeFormattingElements = new FormattingElementList(this.treeAdapter);\n\n        this.tmplInsertionModeStack = [];\n        this.tmplInsertionModeStackTop = -1;\n        this.currentTmplInsertionMode = null;\n\n        this.pendingCharacterTokens = [];\n        this.hasNonWhitespacePendingCharacterToken = false;\n\n        this.framesetOk = true;\n        this.skipNextNewLine = false;\n        this.fosterParentingEnabled = false;\n    }\n\n    //Errors\n    _err() {\n        // NOTE: err reporting is noop by default. Enabled by mixin.\n    }\n\n    //Parsing loop\n    _runParsingLoop(scriptHandler) {\n        while (!this.stopped) {\n            this._setupTokenizerCDATAMode();\n\n            const token = this.tokenizer.getNextToken();\n\n            if (token.type === Tokenizer.HIBERNATION_TOKEN) {\n                break;\n            }\n\n            if (this.skipNextNewLine) {\n                this.skipNextNewLine = false;\n\n                if (token.type === Tokenizer.WHITESPACE_CHARACTER_TOKEN && token.chars[0] === '\\n') {\n                    if (token.chars.length === 1) {\n                        continue;\n                    }\n\n                    token.chars = token.chars.substr(1);\n                }\n            }\n\n            this._processInputToken(token);\n\n            if (scriptHandler && this.pendingScript) {\n                break;\n            }\n        }\n    }\n\n    runParsingLoopForCurrentChunk(writeCallback, scriptHandler) {\n        this._runParsingLoop(scriptHandler);\n\n        if (scriptHandler && this.pendingScript) {\n            const script = this.pendingScript;\n\n            this.pendingScript = null;\n\n            scriptHandler(script);\n\n            return;\n        }\n\n        if (writeCallback) {\n            writeCallback();\n        }\n    }\n\n    //Text parsing\n    _setupTokenizerCDATAMode() {\n        const current = this._getAdjustedCurrentElement();\n\n        this.tokenizer.allowCDATA =\n            current &&\n            current !== this.document &&\n            this.treeAdapter.getNamespaceURI(current) !== NS.HTML &&\n            !this._isIntegrationPoint(current);\n    }\n\n    _switchToTextParsing(currentToken, nextTokenizerState) {\n        this._insertElement(currentToken, NS.HTML);\n        this.tokenizer.state = nextTokenizerState;\n        this.originalInsertionMode = this.insertionMode;\n        this.insertionMode = TEXT_MODE;\n    }\n\n    switchToPlaintextParsing() {\n        this.insertionMode = TEXT_MODE;\n        this.originalInsertionMode = IN_BODY_MODE;\n        this.tokenizer.state = Tokenizer.MODE.PLAINTEXT;\n    }\n\n    //Fragment parsing\n    _getAdjustedCurrentElement() {\n        return this.openElements.stackTop === 0 && this.fragmentContext\n            ? this.fragmentContext\n            : this.openElements.current;\n    }\n\n    _findFormInFragmentContext() {\n        let node = this.fragmentContext;\n\n        do {\n            if (this.treeAdapter.getTagName(node) === $.FORM) {\n                this.formElement = node;\n                break;\n            }\n\n            node = this.treeAdapter.getParentNode(node);\n        } while (node);\n    }\n\n    _initTokenizerForFragmentParsing() {\n        if (this.treeAdapter.getNamespaceURI(this.fragmentContext) === NS.HTML) {\n            const tn = this.treeAdapter.getTagName(this.fragmentContext);\n\n            if (tn === $.TITLE || tn === $.TEXTAREA) {\n                this.tokenizer.state = Tokenizer.MODE.RCDATA;\n            } else if (\n                tn === $.STYLE ||\n                tn === $.XMP ||\n                tn === $.IFRAME ||\n                tn === $.NOEMBED ||\n                tn === $.NOFRAMES ||\n                tn === $.NOSCRIPT\n            ) {\n                this.tokenizer.state = Tokenizer.MODE.RAWTEXT;\n            } else if (tn === $.SCRIPT) {\n                this.tokenizer.state = Tokenizer.MODE.SCRIPT_DATA;\n            } else if (tn === $.PLAINTEXT) {\n                this.tokenizer.state = Tokenizer.MODE.PLAINTEXT;\n            }\n        }\n    }\n\n    //Tree mutation\n    _setDocumentType(token) {\n        const name = token.name || '';\n        const publicId = token.publicId || '';\n        const systemId = token.systemId || '';\n\n        this.treeAdapter.setDocumentType(this.document, name, publicId, systemId);\n    }\n\n    _attachElementToTree(element) {\n        if (this._shouldFosterParentOnInsertion()) {\n            this._fosterParentElement(element);\n        } else {\n            const parent = this.openElements.currentTmplContent || this.openElements.current;\n\n            this.treeAdapter.appendChild(parent, element);\n        }\n    }\n\n    _appendElement(token, namespaceURI) {\n        const element = this.treeAdapter.createElement(token.tagName, namespaceURI, token.attrs);\n\n        this._attachElementToTree(element);\n    }\n\n    _insertElement(token, namespaceURI) {\n        const element = this.treeAdapter.createElement(token.tagName, namespaceURI, token.attrs);\n\n        this._attachElementToTree(element);\n        this.openElements.push(element);\n    }\n\n    _insertFakeElement(tagName) {\n        const element = this.treeAdapter.createElement(tagName, NS.HTML, []);\n\n        this._attachElementToTree(element);\n        this.openElements.push(element);\n    }\n\n    _insertTemplate(token) {\n        const tmpl = this.treeAdapter.createElement(token.tagName, NS.HTML, token.attrs);\n        const content = this.treeAdapter.createDocumentFragment();\n\n        this.treeAdapter.setTemplateContent(tmpl, content);\n        this._attachElementToTree(tmpl);\n        this.openElements.push(tmpl);\n    }\n\n    _insertFakeRootElement() {\n        const element = this.treeAdapter.createElement($.HTML, NS.HTML, []);\n\n        this.treeAdapter.appendChild(this.openElements.current, element);\n        this.openElements.push(element);\n    }\n\n    _appendCommentNode(token, parent) {\n        const commentNode = this.treeAdapter.createCommentNode(token.data);\n\n        this.treeAdapter.appendChild(parent, commentNode);\n    }\n\n    _insertCharacters(token) {\n        if (this._shouldFosterParentOnInsertion()) {\n            this._fosterParentText(token.chars);\n        } else {\n            const parent = this.openElements.currentTmplContent || this.openElements.current;\n\n            this.treeAdapter.insertText(parent, token.chars);\n        }\n    }\n\n    _adoptNodes(donor, recipient) {\n        for (let child = this.treeAdapter.getFirstChild(donor); child; child = this.treeAdapter.getFirstChild(donor)) {\n            this.treeAdapter.detachNode(child);\n            this.treeAdapter.appendChild(recipient, child);\n        }\n    }\n\n    //Token processing\n    _shouldProcessTokenInForeignContent(token) {\n        const current = this._getAdjustedCurrentElement();\n\n        if (!current || current === this.document) {\n            return false;\n        }\n\n        const ns = this.treeAdapter.getNamespaceURI(current);\n\n        if (ns === NS.HTML) {\n            return false;\n        }\n\n        if (\n            this.treeAdapter.getTagName(current) === $.ANNOTATION_XML &&\n            ns === NS.MATHML &&\n            token.type === Tokenizer.START_TAG_TOKEN &&\n            token.tagName === $.SVG\n        ) {\n            return false;\n        }\n\n        const isCharacterToken =\n            token.type === Tokenizer.CHARACTER_TOKEN ||\n            token.type === Tokenizer.NULL_CHARACTER_TOKEN ||\n            token.type === Tokenizer.WHITESPACE_CHARACTER_TOKEN;\n\n        const isMathMLTextStartTag =\n            token.type === Tokenizer.START_TAG_TOKEN && token.tagName !== $.MGLYPH && token.tagName !== $.MALIGNMARK;\n\n        if ((isMathMLTextStartTag || isCharacterToken) && this._isIntegrationPoint(current, NS.MATHML)) {\n            return false;\n        }\n\n        if (\n            (token.type === Tokenizer.START_TAG_TOKEN || isCharacterToken) &&\n            this._isIntegrationPoint(current, NS.HTML)\n        ) {\n            return false;\n        }\n\n        return token.type !== Tokenizer.EOF_TOKEN;\n    }\n\n    _processToken(token) {\n        TOKEN_HANDLERS[this.insertionMode][token.type](this, token);\n    }\n\n    _processTokenInBodyMode(token) {\n        TOKEN_HANDLERS[IN_BODY_MODE][token.type](this, token);\n    }\n\n    _processTokenInForeignContent(token) {\n        if (token.type === Tokenizer.CHARACTER_TOKEN) {\n            characterInForeignContent(this, token);\n        } else if (token.type === Tokenizer.NULL_CHARACTER_TOKEN) {\n            nullCharacterInForeignContent(this, token);\n        } else if (token.type === Tokenizer.WHITESPACE_CHARACTER_TOKEN) {\n            insertCharacters(this, token);\n        } else if (token.type === Tokenizer.COMMENT_TOKEN) {\n            appendComment(this, token);\n        } else if (token.type === Tokenizer.START_TAG_TOKEN) {\n            startTagInForeignContent(this, token);\n        } else if (token.type === Tokenizer.END_TAG_TOKEN) {\n            endTagInForeignContent(this, token);\n        }\n    }\n\n    _processInputToken(token) {\n        if (this._shouldProcessTokenInForeignContent(token)) {\n            this._processTokenInForeignContent(token);\n        } else {\n            this._processToken(token);\n        }\n\n        if (token.type === Tokenizer.START_TAG_TOKEN && token.selfClosing && !token.ackSelfClosing) {\n            this._err(ERR.nonVoidHtmlElementStartTagWithTrailingSolidus);\n        }\n    }\n\n    //Integration points\n    _isIntegrationPoint(element, foreignNS) {\n        const tn = this.treeAdapter.getTagName(element);\n        const ns = this.treeAdapter.getNamespaceURI(element);\n        const attrs = this.treeAdapter.getAttrList(element);\n\n        return foreignContent.isIntegrationPoint(tn, ns, attrs, foreignNS);\n    }\n\n    //Active formatting elements reconstruction\n    _reconstructActiveFormattingElements() {\n        const listLength = this.activeFormattingElements.length;\n\n        if (listLength) {\n            let unopenIdx = listLength;\n            let entry = null;\n\n            do {\n                unopenIdx--;\n                entry = this.activeFormattingElements.entries[unopenIdx];\n\n                if (entry.type === FormattingElementList.MARKER_ENTRY || this.openElements.contains(entry.element)) {\n                    unopenIdx++;\n                    break;\n                }\n            } while (unopenIdx > 0);\n\n            for (let i = unopenIdx; i < listLength; i++) {\n                entry = this.activeFormattingElements.entries[i];\n                this._insertElement(entry.token, this.treeAdapter.getNamespaceURI(entry.element));\n                entry.element = this.openElements.current;\n            }\n        }\n    }\n\n    //Close elements\n    _closeTableCell() {\n        this.openElements.generateImpliedEndTags();\n        this.openElements.popUntilTableCellPopped();\n        this.activeFormattingElements.clearToLastMarker();\n        this.insertionMode = IN_ROW_MODE;\n    }\n\n    _closePElement() {\n        this.openElements.generateImpliedEndTagsWithExclusion($.P);\n        this.openElements.popUntilTagNamePopped($.P);\n    }\n\n    //Insertion modes\n    _resetInsertionMode() {\n        for (let i = this.openElements.stackTop, last = false; i >= 0; i--) {\n            let element = this.openElements.items[i];\n\n            if (i === 0) {\n                last = true;\n\n                if (this.fragmentContext) {\n                    element = this.fragmentContext;\n                }\n            }\n\n            const tn = this.treeAdapter.getTagName(element);\n            const newInsertionMode = INSERTION_MODE_RESET_MAP[tn];\n\n            if (newInsertionMode) {\n                this.insertionMode = newInsertionMode;\n                break;\n            } else if (!last && (tn === $.TD || tn === $.TH)) {\n                this.insertionMode = IN_CELL_MODE;\n                break;\n            } else if (!last && tn === $.HEAD) {\n                this.insertionMode = IN_HEAD_MODE;\n                break;\n            } else if (tn === $.SELECT) {\n                this._resetInsertionModeForSelect(i);\n                break;\n            } else if (tn === $.TEMPLATE) {\n                this.insertionMode = this.currentTmplInsertionMode;\n                break;\n            } else if (tn === $.HTML) {\n                this.insertionMode = this.headElement ? AFTER_HEAD_MODE : BEFORE_HEAD_MODE;\n                break;\n            } else if (last) {\n                this.insertionMode = IN_BODY_MODE;\n                break;\n            }\n        }\n    }\n\n    _resetInsertionModeForSelect(selectIdx) {\n        if (selectIdx > 0) {\n            for (let i = selectIdx - 1; i > 0; i--) {\n                const ancestor = this.openElements.items[i];\n                const tn = this.treeAdapter.getTagName(ancestor);\n\n                if (tn === $.TEMPLATE) {\n                    break;\n                } else if (tn === $.TABLE) {\n                    this.insertionMode = IN_SELECT_IN_TABLE_MODE;\n                    return;\n                }\n            }\n        }\n\n        this.insertionMode = IN_SELECT_MODE;\n    }\n\n    _pushTmplInsertionMode(mode) {\n        this.tmplInsertionModeStack.push(mode);\n        this.tmplInsertionModeStackTop++;\n        this.currentTmplInsertionMode = mode;\n    }\n\n    _popTmplInsertionMode() {\n        this.tmplInsertionModeStack.pop();\n        this.tmplInsertionModeStackTop--;\n        this.currentTmplInsertionMode = this.tmplInsertionModeStack[this.tmplInsertionModeStackTop];\n    }\n\n    //Foster parenting\n    _isElementCausesFosterParenting(element) {\n        const tn = this.treeAdapter.getTagName(element);\n\n        return tn === $.TABLE || tn === $.TBODY || tn === $.TFOOT || tn === $.THEAD || tn === $.TR;\n    }\n\n    _shouldFosterParentOnInsertion() {\n        return this.fosterParentingEnabled && this._isElementCausesFosterParenting(this.openElements.current);\n    }\n\n    _findFosterParentingLocation() {\n        const location = {\n            parent: null,\n            beforeElement: null\n        };\n\n        for (let i = this.openElements.stackTop; i >= 0; i--) {\n            const openElement = this.openElements.items[i];\n            const tn = this.treeAdapter.getTagName(openElement);\n            const ns = this.treeAdapter.getNamespaceURI(openElement);\n\n            if (tn === $.TEMPLATE && ns === NS.HTML) {\n                location.parent = this.treeAdapter.getTemplateContent(openElement);\n                break;\n            } else if (tn === $.TABLE) {\n                location.parent = this.treeAdapter.getParentNode(openElement);\n\n                if (location.parent) {\n                    location.beforeElement = openElement;\n                } else {\n                    location.parent = this.openElements.items[i - 1];\n                }\n\n                break;\n            }\n        }\n\n        if (!location.parent) {\n            location.parent = this.openElements.items[0];\n        }\n\n        return location;\n    }\n\n    _fosterParentElement(element) {\n        const location = this._findFosterParentingLocation();\n\n        if (location.beforeElement) {\n            this.treeAdapter.insertBefore(location.parent, element, location.beforeElement);\n        } else {\n            this.treeAdapter.appendChild(location.parent, element);\n        }\n    }\n\n    _fosterParentText(chars) {\n        const location = this._findFosterParentingLocation();\n\n        if (location.beforeElement) {\n            this.treeAdapter.insertTextBefore(location.parent, chars, location.beforeElement);\n        } else {\n            this.treeAdapter.insertText(location.parent, chars);\n        }\n    }\n\n    //Special elements\n    _isSpecialElement(element) {\n        const tn = this.treeAdapter.getTagName(element);\n        const ns = this.treeAdapter.getNamespaceURI(element);\n\n        return HTML.SPECIAL_ELEMENTS[ns][tn];\n    }\n}\n\nmodule.exports = Parser;\n\n//Adoption agency algorithm\n//(see: http://www.whatwg.org/specs/web-apps/current-work/multipage/tree-construction.html#adoptionAgency)\n//------------------------------------------------------------------\n\n//Steps 5-8 of the algorithm\nfunction aaObtainFormattingElementEntry(p, token) {\n    let formattingElementEntry = p.activeFormattingElements.getElementEntryInScopeWithTagName(token.tagName);\n\n    if (formattingElementEntry) {\n        if (!p.openElements.contains(formattingElementEntry.element)) {\n            p.activeFormattingElements.removeEntry(formattingElementEntry);\n            formattingElementEntry = null;\n        } else if (!p.openElements.hasInScope(token.tagName)) {\n            formattingElementEntry = null;\n        }\n    } else {\n        genericEndTagInBody(p, token);\n    }\n\n    return formattingElementEntry;\n}\n\n//Steps 9 and 10 of the algorithm\nfunction aaObtainFurthestBlock(p, formattingElementEntry) {\n    let furthestBlock = null;\n\n    for (let i = p.openElements.stackTop; i >= 0; i--) {\n        const element = p.openElements.items[i];\n\n        if (element === formattingElementEntry.element) {\n            break;\n        }\n\n        if (p._isSpecialElement(element)) {\n            furthestBlock = element;\n        }\n    }\n\n    if (!furthestBlock) {\n        p.openElements.popUntilElementPopped(formattingElementEntry.element);\n        p.activeFormattingElements.removeEntry(formattingElementEntry);\n    }\n\n    return furthestBlock;\n}\n\n//Step 13 of the algorithm\nfunction aaInnerLoop(p, furthestBlock, formattingElement) {\n    let lastElement = furthestBlock;\n    let nextElement = p.openElements.getCommonAncestor(furthestBlock);\n\n    for (let i = 0, element = nextElement; element !== formattingElement; i++, element = nextElement) {\n        //NOTE: store next element for the next loop iteration (it may be deleted from the stack by step 9.5)\n        nextElement = p.openElements.getCommonAncestor(element);\n\n        const elementEntry = p.activeFormattingElements.getElementEntry(element);\n        const counterOverflow = elementEntry && i >= AA_INNER_LOOP_ITER;\n        const shouldRemoveFromOpenElements = !elementEntry || counterOverflow;\n\n        if (shouldRemoveFromOpenElements) {\n            if (counterOverflow) {\n                p.activeFormattingElements.removeEntry(elementEntry);\n            }\n\n            p.openElements.remove(element);\n        } else {\n            element = aaRecreateElementFromEntry(p, elementEntry);\n\n            if (lastElement === furthestBlock) {\n                p.activeFormattingElements.bookmark = elementEntry;\n            }\n\n            p.treeAdapter.detachNode(lastElement);\n            p.treeAdapter.appendChild(element, lastElement);\n            lastElement = element;\n        }\n    }\n\n    return lastElement;\n}\n\n//Step 13.7 of the algorithm\nfunction aaRecreateElementFromEntry(p, elementEntry) {\n    const ns = p.treeAdapter.getNamespaceURI(elementEntry.element);\n    const newElement = p.treeAdapter.createElement(elementEntry.token.tagName, ns, elementEntry.token.attrs);\n\n    p.openElements.replace(elementEntry.element, newElement);\n    elementEntry.element = newElement;\n\n    return newElement;\n}\n\n//Step 14 of the algorithm\nfunction aaInsertLastNodeInCommonAncestor(p, commonAncestor, lastElement) {\n    if (p._isElementCausesFosterParenting(commonAncestor)) {\n        p._fosterParentElement(lastElement);\n    } else {\n        const tn = p.treeAdapter.getTagName(commonAncestor);\n        const ns = p.treeAdapter.getNamespaceURI(commonAncestor);\n\n        if (tn === $.TEMPLATE && ns === NS.HTML) {\n            commonAncestor = p.treeAdapter.getTemplateContent(commonAncestor);\n        }\n\n        p.treeAdapter.appendChild(commonAncestor, lastElement);\n    }\n}\n\n//Steps 15-19 of the algorithm\nfunction aaReplaceFormattingElement(p, furthestBlock, formattingElementEntry) {\n    const ns = p.treeAdapter.getNamespaceURI(formattingElementEntry.element);\n    const token = formattingElementEntry.token;\n    const newElement = p.treeAdapter.createElement(token.tagName, ns, token.attrs);\n\n    p._adoptNodes(furthestBlock, newElement);\n    p.treeAdapter.appendChild(furthestBlock, newElement);\n\n    p.activeFormattingElements.insertElementAfterBookmark(newElement, formattingElementEntry.token);\n    p.activeFormattingElements.removeEntry(formattingElementEntry);\n\n    p.openElements.remove(formattingElementEntry.element);\n    p.openElements.insertAfter(furthestBlock, newElement);\n}\n\n//Algorithm entry point\nfunction callAdoptionAgency(p, token) {\n    let formattingElementEntry;\n\n    for (let i = 0; i < AA_OUTER_LOOP_ITER; i++) {\n        formattingElementEntry = aaObtainFormattingElementEntry(p, token, formattingElementEntry);\n\n        if (!formattingElementEntry) {\n            break;\n        }\n\n        const furthestBlock = aaObtainFurthestBlock(p, formattingElementEntry);\n\n        if (!furthestBlock) {\n            break;\n        }\n\n        p.activeFormattingElements.bookmark = formattingElementEntry;\n\n        const lastElement = aaInnerLoop(p, furthestBlock, formattingElementEntry.element);\n        const commonAncestor = p.openElements.getCommonAncestor(formattingElementEntry.element);\n\n        p.treeAdapter.detachNode(lastElement);\n        aaInsertLastNodeInCommonAncestor(p, commonAncestor, lastElement);\n        aaReplaceFormattingElement(p, furthestBlock, formattingElementEntry);\n    }\n}\n\n//Generic token handlers\n//------------------------------------------------------------------\nfunction ignoreToken() {\n    //NOTE: do nothing =)\n}\n\nfunction misplacedDoctype(p) {\n    p._err(ERR.misplacedDoctype);\n}\n\nfunction appendComment(p, token) {\n    p._appendCommentNode(token, p.openElements.currentTmplContent || p.openElements.current);\n}\n\nfunction appendCommentToRootHtmlElement(p, token) {\n    p._appendCommentNode(token, p.openElements.items[0]);\n}\n\nfunction appendCommentToDocument(p, token) {\n    p._appendCommentNode(token, p.document);\n}\n\nfunction insertCharacters(p, token) {\n    p._insertCharacters(token);\n}\n\nfunction stopParsing(p) {\n    p.stopped = true;\n}\n\n// The \"initial\" insertion mode\n//------------------------------------------------------------------\nfunction doctypeInInitialMode(p, token) {\n    p._setDocumentType(token);\n\n    const mode = token.forceQuirks ? HTML.DOCUMENT_MODE.QUIRKS : doctype.getDocumentMode(token);\n\n    if (!doctype.isConforming(token)) {\n        p._err(ERR.nonConformingDoctype);\n    }\n\n    p.treeAdapter.setDocumentMode(p.document, mode);\n\n    p.insertionMode = BEFORE_HTML_MODE;\n}\n\nfunction tokenInInitialMode(p, token) {\n    p._err(ERR.missingDoctype, { beforeToken: true });\n    p.treeAdapter.setDocumentMode(p.document, HTML.DOCUMENT_MODE.QUIRKS);\n    p.insertionMode = BEFORE_HTML_MODE;\n    p._processToken(token);\n}\n\n// The \"before html\" insertion mode\n//------------------------------------------------------------------\nfunction startTagBeforeHtml(p, token) {\n    if (token.tagName === $.HTML) {\n        p._insertElement(token, NS.HTML);\n        p.insertionMode = BEFORE_HEAD_MODE;\n    } else {\n        tokenBeforeHtml(p, token);\n    }\n}\n\nfunction endTagBeforeHtml(p, token) {\n    const tn = token.tagName;\n\n    if (tn === $.HTML || tn === $.HEAD || tn === $.BODY || tn === $.BR) {\n        tokenBeforeHtml(p, token);\n    }\n}\n\nfunction tokenBeforeHtml(p, token) {\n    p._insertFakeRootElement();\n    p.insertionMode = BEFORE_HEAD_MODE;\n    p._processToken(token);\n}\n\n// The \"before head\" insertion mode\n//------------------------------------------------------------------\nfunction startTagBeforeHead(p, token) {\n    const tn = token.tagName;\n\n    if (tn === $.HTML) {\n        startTagInBody(p, token);\n    } else if (tn === $.HEAD) {\n        p._insertElement(token, NS.HTML);\n        p.headElement = p.openElements.current;\n        p.insertionMode = IN_HEAD_MODE;\n    } else {\n        tokenBeforeHead(p, token);\n    }\n}\n\nfunction endTagBeforeHead(p, token) {\n    const tn = token.tagName;\n\n    if (tn === $.HEAD || tn === $.BODY || tn === $.HTML || tn === $.BR) {\n        tokenBeforeHead(p, token);\n    } else {\n        p._err(ERR.endTagWithoutMatchingOpenElement);\n    }\n}\n\nfunction tokenBeforeHead(p, token) {\n    p._insertFakeElement($.HEAD);\n    p.headElement = p.openElements.current;\n    p.insertionMode = IN_HEAD_MODE;\n    p._processToken(token);\n}\n\n// The \"in head\" insertion mode\n//------------------------------------------------------------------\nfunction startTagInHead(p, token) {\n    const tn = token.tagName;\n\n    if (tn === $.HTML) {\n        startTagInBody(p, token);\n    } else if (tn === $.BASE || tn === $.BASEFONT || tn === $.BGSOUND || tn === $.LINK || tn === $.META) {\n        p._appendElement(token, NS.HTML);\n        token.ackSelfClosing = true;\n    } else if (tn === $.TITLE) {\n        p._switchToTextParsing(token, Tokenizer.MODE.RCDATA);\n    } else if (tn === $.NOSCRIPT) {\n        if (p.options.scriptingEnabled) {\n            p._switchToTextParsing(token, Tokenizer.MODE.RAWTEXT);\n        } else {\n            p._insertElement(token, NS.HTML);\n            p.insertionMode = IN_HEAD_NO_SCRIPT_MODE;\n        }\n    } else if (tn === $.NOFRAMES || tn === $.STYLE) {\n        p._switchToTextParsing(token, Tokenizer.MODE.RAWTEXT);\n    } else if (tn === $.SCRIPT) {\n        p._switchToTextParsing(token, Tokenizer.MODE.SCRIPT_DATA);\n    } else if (tn === $.TEMPLATE) {\n        p._insertTemplate(token, NS.HTML);\n        p.activeFormattingElements.insertMarker();\n        p.framesetOk = false;\n        p.insertionMode = IN_TEMPLATE_MODE;\n        p._pushTmplInsertionMode(IN_TEMPLATE_MODE);\n    } else if (tn === $.HEAD) {\n        p._err(ERR.misplacedStartTagForHeadElement);\n    } else {\n        tokenInHead(p, token);\n    }\n}\n\nfunction endTagInHead(p, token) {\n    const tn = token.tagName;\n\n    if (tn === $.HEAD) {\n        p.openElements.pop();\n        p.insertionMode = AFTER_HEAD_MODE;\n    } else if (tn === $.BODY || tn === $.BR || tn === $.HTML) {\n        tokenInHead(p, token);\n    } else if (tn === $.TEMPLATE) {\n        if (p.openElements.tmplCount > 0) {\n            p.openElements.generateImpliedEndTagsThoroughly();\n\n            if (p.openElements.currentTagName !== $.TEMPLATE) {\n                p._err(ERR.closingOfElementWithOpenChildElements);\n            }\n\n            p.openElements.popUntilTagNamePopped($.TEMPLATE);\n            p.activeFormattingElements.clearToLastMarker();\n            p._popTmplInsertionMode();\n            p._resetInsertionMode();\n        } else {\n            p._err(ERR.endTagWithoutMatchingOpenElement);\n        }\n    } else {\n        p._err(ERR.endTagWithoutMatchingOpenElement);\n    }\n}\n\nfunction tokenInHead(p, token) {\n    p.openElements.pop();\n    p.insertionMode = AFTER_HEAD_MODE;\n    p._processToken(token);\n}\n\n// The \"in head no script\" insertion mode\n//------------------------------------------------------------------\nfunction startTagInHeadNoScript(p, token) {\n    const tn = token.tagName;\n\n    if (tn === $.HTML) {\n        startTagInBody(p, token);\n    } else if (\n        tn === $.BASEFONT ||\n        tn === $.BGSOUND ||\n        tn === $.HEAD ||\n        tn === $.LINK ||\n        tn === $.META ||\n        tn === $.NOFRAMES ||\n        tn === $.STYLE\n    ) {\n        startTagInHead(p, token);\n    } else if (tn === $.NOSCRIPT) {\n        p._err(ERR.nestedNoscriptInHead);\n    } else {\n        tokenInHeadNoScript(p, token);\n    }\n}\n\nfunction endTagInHeadNoScript(p, token) {\n    const tn = token.tagName;\n\n    if (tn === $.NOSCRIPT) {\n        p.openElements.pop();\n        p.insertionMode = IN_HEAD_MODE;\n    } else if (tn === $.BR) {\n        tokenInHeadNoScript(p, token);\n    } else {\n        p._err(ERR.endTagWithoutMatchingOpenElement);\n    }\n}\n\nfunction tokenInHeadNoScript(p, token) {\n    const errCode =\n        token.type === Tokenizer.EOF_TOKEN ? ERR.openElementsLeftAfterEof : ERR.disallowedContentInNoscriptInHead;\n\n    p._err(errCode);\n    p.openElements.pop();\n    p.insertionMode = IN_HEAD_MODE;\n    p._processToken(token);\n}\n\n// The \"after head\" insertion mode\n//------------------------------------------------------------------\nfunction startTagAfterHead(p, token) {\n    const tn = token.tagName;\n\n    if (tn === $.HTML) {\n        startTagInBody(p, token);\n    } else if (tn === $.BODY) {\n        p._insertElement(token, NS.HTML);\n        p.framesetOk = false;\n        p.insertionMode = IN_BODY_MODE;\n    } else if (tn === $.FRAMESET) {\n        p._insertElement(token, NS.HTML);\n        p.insertionMode = IN_FRAMESET_MODE;\n    } else if (\n        tn === $.BASE ||\n        tn === $.BASEFONT ||\n        tn === $.BGSOUND ||\n        tn === $.LINK ||\n        tn === $.META ||\n        tn === $.NOFRAMES ||\n        tn === $.SCRIPT ||\n        tn === $.STYLE ||\n        tn === $.TEMPLATE ||\n        tn === $.TITLE\n    ) {\n        p._err(ERR.abandonedHeadElementChild);\n        p.openElements.push(p.headElement);\n        startTagInHead(p, token);\n        p.openElements.remove(p.headElement);\n    } else if (tn === $.HEAD) {\n        p._err(ERR.misplacedStartTagForHeadElement);\n    } else {\n        tokenAfterHead(p, token);\n    }\n}\n\nfunction endTagAfterHead(p, token) {\n    const tn = token.tagName;\n\n    if (tn === $.BODY || tn === $.HTML || tn === $.BR) {\n        tokenAfterHead(p, token);\n    } else if (tn === $.TEMPLATE) {\n        endTagInHead(p, token);\n    } else {\n        p._err(ERR.endTagWithoutMatchingOpenElement);\n    }\n}\n\nfunction tokenAfterHead(p, token) {\n    p._insertFakeElement($.BODY);\n    p.insertionMode = IN_BODY_MODE;\n    p._processToken(token);\n}\n\n// The \"in body\" insertion mode\n//------------------------------------------------------------------\nfunction whitespaceCharacterInBody(p, token) {\n    p._reconstructActiveFormattingElements();\n    p._insertCharacters(token);\n}\n\nfunction characterInBody(p, token) {\n    p._reconstructActiveFormattingElements();\n    p._insertCharacters(token);\n    p.framesetOk = false;\n}\n\nfunction htmlStartTagInBody(p, token) {\n    if (p.openElements.tmplCount === 0) {\n        p.treeAdapter.adoptAttributes(p.openElements.items[0], token.attrs);\n    }\n}\n\nfunction bodyStartTagInBody(p, token) {\n    const bodyElement = p.openElements.tryPeekProperlyNestedBodyElement();\n\n    if (bodyElement && p.openElements.tmplCount === 0) {\n        p.framesetOk = false;\n        p.treeAdapter.adoptAttributes(bodyElement, token.attrs);\n    }\n}\n\nfunction framesetStartTagInBody(p, token) {\n    const bodyElement = p.openElements.tryPeekProperlyNestedBodyElement();\n\n    if (p.framesetOk && bodyElement) {\n        p.treeAdapter.detachNode(bodyElement);\n        p.openElements.popAllUpToHtmlElement();\n        p._insertElement(token, NS.HTML);\n        p.insertionMode = IN_FRAMESET_MODE;\n    }\n}\n\nfunction addressStartTagInBody(p, token) {\n    if (p.openElements.hasInButtonScope($.P)) {\n        p._closePElement();\n    }\n\n    p._insertElement(token, NS.HTML);\n}\n\nfunction numberedHeaderStartTagInBody(p, token) {\n    if (p.openElements.hasInButtonScope($.P)) {\n        p._closePElement();\n    }\n\n    const tn = p.openElements.currentTagName;\n\n    if (tn === $.H1 || tn === $.H2 || tn === $.H3 || tn === $.H4 || tn === $.H5 || tn === $.H6) {\n        p.openElements.pop();\n    }\n\n    p._insertElement(token, NS.HTML);\n}\n\nfunction preStartTagInBody(p, token) {\n    if (p.openElements.hasInButtonScope($.P)) {\n        p._closePElement();\n    }\n\n    p._insertElement(token, NS.HTML);\n    //NOTE: If the next token is a U+000A LINE FEED (LF) character token, then ignore that token and move\n    //on to the next one. (Newlines at the start of pre blocks are ignored as an authoring convenience.)\n    p.skipNextNewLine = true;\n    p.framesetOk = false;\n}\n\nfunction formStartTagInBody(p, token) {\n    const inTemplate = p.openElements.tmplCount > 0;\n\n    if (!p.formElement || inTemplate) {\n        if (p.openElements.hasInButtonScope($.P)) {\n            p._closePElement();\n        }\n\n        p._insertElement(token, NS.HTML);\n\n        if (!inTemplate) {\n            p.formElement = p.openElements.current;\n        }\n    }\n}\n\nfunction listItemStartTagInBody(p, token) {\n    p.framesetOk = false;\n\n    const tn = token.tagName;\n\n    for (let i = p.openElements.stackTop; i >= 0; i--) {\n        const element = p.openElements.items[i];\n        const elementTn = p.treeAdapter.getTagName(element);\n        let closeTn = null;\n\n        if (tn === $.LI && elementTn === $.LI) {\n            closeTn = $.LI;\n        } else if ((tn === $.DD || tn === $.DT) && (elementTn === $.DD || elementTn === $.DT)) {\n            closeTn = elementTn;\n        }\n\n        if (closeTn) {\n            p.openElements.generateImpliedEndTagsWithExclusion(closeTn);\n            p.openElements.popUntilTagNamePopped(closeTn);\n            break;\n        }\n\n        if (elementTn !== $.ADDRESS && elementTn !== $.DIV && elementTn !== $.P && p._isSpecialElement(element)) {\n            break;\n        }\n    }\n\n    if (p.openElements.hasInButtonScope($.P)) {\n        p._closePElement();\n    }\n\n    p._insertElement(token, NS.HTML);\n}\n\nfunction plaintextStartTagInBody(p, token) {\n    if (p.openElements.hasInButtonScope($.P)) {\n        p._closePElement();\n    }\n\n    p._insertElement(token, NS.HTML);\n    p.tokenizer.state = Tokenizer.MODE.PLAINTEXT;\n}\n\nfunction buttonStartTagInBody(p, token) {\n    if (p.openElements.hasInScope($.BUTTON)) {\n        p.openElements.generateImpliedEndTags();\n        p.openElements.popUntilTagNamePopped($.BUTTON);\n    }\n\n    p._reconstructActiveFormattingElements();\n    p._insertElement(token, NS.HTML);\n    p.framesetOk = false;\n}\n\nfunction aStartTagInBody(p, token) {\n    const activeElementEntry = p.activeFormattingElements.getElementEntryInScopeWithTagName($.A);\n\n    if (activeElementEntry) {\n        callAdoptionAgency(p, token);\n        p.openElements.remove(activeElementEntry.element);\n        p.activeFormattingElements.removeEntry(activeElementEntry);\n    }\n\n    p._reconstructActiveFormattingElements();\n    p._insertElement(token, NS.HTML);\n    p.activeFormattingElements.pushElement(p.openElements.current, token);\n}\n\nfunction bStartTagInBody(p, token) {\n    p._reconstructActiveFormattingElements();\n    p._insertElement(token, NS.HTML);\n    p.activeFormattingElements.pushElement(p.openElements.current, token);\n}\n\nfunction nobrStartTagInBody(p, token) {\n    p._reconstructActiveFormattingElements();\n\n    if (p.openElements.hasInScope($.NOBR)) {\n        callAdoptionAgency(p, token);\n        p._reconstructActiveFormattingElements();\n    }\n\n    p._insertElement(token, NS.HTML);\n    p.activeFormattingElements.pushElement(p.openElements.current, token);\n}\n\nfunction appletStartTagInBody(p, token) {\n    p._reconstructActiveFormattingElements();\n    p._insertElement(token, NS.HTML);\n    p.activeFormattingElements.insertMarker();\n    p.framesetOk = false;\n}\n\nfunction tableStartTagInBody(p, token) {\n    if (\n        p.treeAdapter.getDocumentMode(p.document) !== HTML.DOCUMENT_MODE.QUIRKS &&\n        p.openElements.hasInButtonScope($.P)\n    ) {\n        p._closePElement();\n    }\n\n    p._insertElement(token, NS.HTML);\n    p.framesetOk = false;\n    p.insertionMode = IN_TABLE_MODE;\n}\n\nfunction areaStartTagInBody(p, token) {\n    p._reconstructActiveFormattingElements();\n    p._appendElement(token, NS.HTML);\n    p.framesetOk = false;\n    token.ackSelfClosing = true;\n}\n\nfunction inputStartTagInBody(p, token) {\n    p._reconstructActiveFormattingElements();\n    p._appendElement(token, NS.HTML);\n\n    const inputType = Tokenizer.getTokenAttr(token, ATTRS.TYPE);\n\n    if (!inputType || inputType.toLowerCase() !== HIDDEN_INPUT_TYPE) {\n        p.framesetOk = false;\n    }\n\n    token.ackSelfClosing = true;\n}\n\nfunction paramStartTagInBody(p, token) {\n    p._appendElement(token, NS.HTML);\n    token.ackSelfClosing = true;\n}\n\nfunction hrStartTagInBody(p, token) {\n    if (p.openElements.hasInButtonScope($.P)) {\n        p._closePElement();\n    }\n\n    p._appendElement(token, NS.HTML);\n    p.framesetOk = false;\n    token.ackSelfClosing = true;\n}\n\nfunction imageStartTagInBody(p, token) {\n    token.tagName = $.IMG;\n    areaStartTagInBody(p, token);\n}\n\nfunction textareaStartTagInBody(p, token) {\n    p._insertElement(token, NS.HTML);\n    //NOTE: If the next token is a U+000A LINE FEED (LF) character token, then ignore that token and move\n    //on to the next one. (Newlines at the start of textarea elements are ignored as an authoring convenience.)\n    p.skipNextNewLine = true;\n    p.tokenizer.state = Tokenizer.MODE.RCDATA;\n    p.originalInsertionMode = p.insertionMode;\n    p.framesetOk = false;\n    p.insertionMode = TEXT_MODE;\n}\n\nfunction xmpStartTagInBody(p, token) {\n    if (p.openElements.hasInButtonScope($.P)) {\n        p._closePElement();\n    }\n\n    p._reconstructActiveFormattingElements();\n    p.framesetOk = false;\n    p._switchToTextParsing(token, Tokenizer.MODE.RAWTEXT);\n}\n\nfunction iframeStartTagInBody(p, token) {\n    p.framesetOk = false;\n    p._switchToTextParsing(token, Tokenizer.MODE.RAWTEXT);\n}\n\n//NOTE: here we assume that we always act as an user agent with enabled plugins, so we parse\n//<noembed> as a rawtext.\nfunction noembedStartTagInBody(p, token) {\n    p._switchToTextParsing(token, Tokenizer.MODE.RAWTEXT);\n}\n\nfunction selectStartTagInBody(p, token) {\n    p._reconstructActiveFormattingElements();\n    p._insertElement(token, NS.HTML);\n    p.framesetOk = false;\n\n    if (\n        p.insertionMode === IN_TABLE_MODE ||\n        p.insertionMode === IN_CAPTION_MODE ||\n        p.insertionMode === IN_TABLE_BODY_MODE ||\n        p.insertionMode === IN_ROW_MODE ||\n        p.insertionMode === IN_CELL_MODE\n    ) {\n        p.insertionMode = IN_SELECT_IN_TABLE_MODE;\n    } else {\n        p.insertionMode = IN_SELECT_MODE;\n    }\n}\n\nfunction optgroupStartTagInBody(p, token) {\n    if (p.openElements.currentTagName === $.OPTION) {\n        p.openElements.pop();\n    }\n\n    p._reconstructActiveFormattingElements();\n    p._insertElement(token, NS.HTML);\n}\n\nfunction rbStartTagInBody(p, token) {\n    if (p.openElements.hasInScope($.RUBY)) {\n        p.openElements.generateImpliedEndTags();\n    }\n\n    p._insertElement(token, NS.HTML);\n}\n\nfunction rtStartTagInBody(p, token) {\n    if (p.openElements.hasInScope($.RUBY)) {\n        p.openElements.generateImpliedEndTagsWithExclusion($.RTC);\n    }\n\n    p._insertElement(token, NS.HTML);\n}\n\nfunction menuStartTagInBody(p, token) {\n    if (p.openElements.hasInButtonScope($.P)) {\n        p._closePElement();\n    }\n\n    p._insertElement(token, NS.HTML);\n}\n\nfunction mathStartTagInBody(p, token) {\n    p._reconstructActiveFormattingElements();\n\n    foreignContent.adjustTokenMathMLAttrs(token);\n    foreignContent.adjustTokenXMLAttrs(token);\n\n    if (token.selfClosing) {\n        p._appendElement(token, NS.MATHML);\n    } else {\n        p._insertElement(token, NS.MATHML);\n    }\n\n    token.ackSelfClosing = true;\n}\n\nfunction svgStartTagInBody(p, token) {\n    p._reconstructActiveFormattingElements();\n\n    foreignContent.adjustTokenSVGAttrs(token);\n    foreignContent.adjustTokenXMLAttrs(token);\n\n    if (token.selfClosing) {\n        p._appendElement(token, NS.SVG);\n    } else {\n        p._insertElement(token, NS.SVG);\n    }\n\n    token.ackSelfClosing = true;\n}\n\nfunction genericStartTagInBody(p, token) {\n    p._reconstructActiveFormattingElements();\n    p._insertElement(token, NS.HTML);\n}\n\n//OPTIMIZATION: Integer comparisons are low-cost, so we can use very fast tag name length filters here.\n//It's faster than using dictionary.\nfunction startTagInBody(p, token) {\n    const tn = token.tagName;\n\n    switch (tn.length) {\n        case 1:\n            if (tn === $.I || tn === $.S || tn === $.B || tn === $.U) {\n                bStartTagInBody(p, token);\n            } else if (tn === $.P) {\n                addressStartTagInBody(p, token);\n            } else if (tn === $.A) {\n                aStartTagInBody(p, token);\n            } else {\n                genericStartTagInBody(p, token);\n            }\n\n            break;\n\n        case 2:\n            if (tn === $.DL || tn === $.OL || tn === $.UL) {\n                addressStartTagInBody(p, token);\n            } else if (tn === $.H1 || tn === $.H2 || tn === $.H3 || tn === $.H4 || tn === $.H5 || tn === $.H6) {\n                numberedHeaderStartTagInBody(p, token);\n            } else if (tn === $.LI || tn === $.DD || tn === $.DT) {\n                listItemStartTagInBody(p, token);\n            } else if (tn === $.EM || tn === $.TT) {\n                bStartTagInBody(p, token);\n            } else if (tn === $.BR) {\n                areaStartTagInBody(p, token);\n            } else if (tn === $.HR) {\n                hrStartTagInBody(p, token);\n            } else if (tn === $.RB) {\n                rbStartTagInBody(p, token);\n            } else if (tn === $.RT || tn === $.RP) {\n                rtStartTagInBody(p, token);\n            } else if (tn !== $.TH && tn !== $.TD && tn !== $.TR) {\n                genericStartTagInBody(p, token);\n            }\n\n            break;\n\n        case 3:\n            if (tn === $.DIV || tn === $.DIR || tn === $.NAV) {\n                addressStartTagInBody(p, token);\n            } else if (tn === $.PRE) {\n                preStartTagInBody(p, token);\n            } else if (tn === $.BIG) {\n                bStartTagInBody(p, token);\n            } else if (tn === $.IMG || tn === $.WBR) {\n                areaStartTagInBody(p, token);\n            } else if (tn === $.XMP) {\n                xmpStartTagInBody(p, token);\n            } else if (tn === $.SVG) {\n                svgStartTagInBody(p, token);\n            } else if (tn === $.RTC) {\n                rbStartTagInBody(p, token);\n            } else if (tn !== $.COL) {\n                genericStartTagInBody(p, token);\n            }\n\n            break;\n\n        case 4:\n            if (tn === $.HTML) {\n                htmlStartTagInBody(p, token);\n            } else if (tn === $.BASE || tn === $.LINK || tn === $.META) {\n                startTagInHead(p, token);\n            } else if (tn === $.BODY) {\n                bodyStartTagInBody(p, token);\n            } else if (tn === $.MAIN || tn === $.MENU) {\n                addressStartTagInBody(p, token);\n            } else if (tn === $.FORM) {\n                formStartTagInBody(p, token);\n            } else if (tn === $.CODE || tn === $.FONT) {\n                bStartTagInBody(p, token);\n            } else if (tn === $.NOBR) {\n                nobrStartTagInBody(p, token);\n            } else if (tn === $.AREA) {\n                areaStartTagInBody(p, token);\n            } else if (tn === $.MATH) {\n                mathStartTagInBody(p, token);\n            } else if (tn === $.MENU) {\n                menuStartTagInBody(p, token);\n            } else if (tn !== $.HEAD) {\n                genericStartTagInBody(p, token);\n            }\n\n            break;\n\n        case 5:\n            if (tn === $.STYLE || tn === $.TITLE) {\n                startTagInHead(p, token);\n            } else if (tn === $.ASIDE) {\n                addressStartTagInBody(p, token);\n            } else if (tn === $.SMALL) {\n                bStartTagInBody(p, token);\n            } else if (tn === $.TABLE) {\n                tableStartTagInBody(p, token);\n            } else if (tn === $.EMBED) {\n                areaStartTagInBody(p, token);\n            } else if (tn === $.INPUT) {\n                inputStartTagInBody(p, token);\n            } else if (tn === $.PARAM || tn === $.TRACK) {\n                paramStartTagInBody(p, token);\n            } else if (tn === $.IMAGE) {\n                imageStartTagInBody(p, token);\n            } else if (tn !== $.FRAME && tn !== $.TBODY && tn !== $.TFOOT && tn !== $.THEAD) {\n                genericStartTagInBody(p, token);\n            }\n\n            break;\n\n        case 6:\n            if (tn === $.SCRIPT) {\n                startTagInHead(p, token);\n            } else if (\n                tn === $.CENTER ||\n                tn === $.FIGURE ||\n                tn === $.FOOTER ||\n                tn === $.HEADER ||\n                tn === $.HGROUP ||\n                tn === $.DIALOG\n            ) {\n                addressStartTagInBody(p, token);\n            } else if (tn === $.BUTTON) {\n                buttonStartTagInBody(p, token);\n            } else if (tn === $.STRIKE || tn === $.STRONG) {\n                bStartTagInBody(p, token);\n            } else if (tn === $.APPLET || tn === $.OBJECT) {\n                appletStartTagInBody(p, token);\n            } else if (tn === $.KEYGEN) {\n                areaStartTagInBody(p, token);\n            } else if (tn === $.SOURCE) {\n                paramStartTagInBody(p, token);\n            } else if (tn === $.IFRAME) {\n                iframeStartTagInBody(p, token);\n            } else if (tn === $.SELECT) {\n                selectStartTagInBody(p, token);\n            } else if (tn === $.OPTION) {\n                optgroupStartTagInBody(p, token);\n            } else {\n                genericStartTagInBody(p, token);\n            }\n\n            break;\n\n        case 7:\n            if (tn === $.BGSOUND) {\n                startTagInHead(p, token);\n            } else if (\n                tn === $.DETAILS ||\n                tn === $.ADDRESS ||\n                tn === $.ARTICLE ||\n                tn === $.SECTION ||\n                tn === $.SUMMARY\n            ) {\n                addressStartTagInBody(p, token);\n            } else if (tn === $.LISTING) {\n                preStartTagInBody(p, token);\n            } else if (tn === $.MARQUEE) {\n                appletStartTagInBody(p, token);\n            } else if (tn === $.NOEMBED) {\n                noembedStartTagInBody(p, token);\n            } else if (tn !== $.CAPTION) {\n                genericStartTagInBody(p, token);\n            }\n\n            break;\n\n        case 8:\n            if (tn === $.BASEFONT) {\n                startTagInHead(p, token);\n            } else if (tn === $.FRAMESET) {\n                framesetStartTagInBody(p, token);\n            } else if (tn === $.FIELDSET) {\n                addressStartTagInBody(p, token);\n            } else if (tn === $.TEXTAREA) {\n                textareaStartTagInBody(p, token);\n            } else if (tn === $.TEMPLATE) {\n                startTagInHead(p, token);\n            } else if (tn === $.NOSCRIPT) {\n                if (p.options.scriptingEnabled) {\n                    noembedStartTagInBody(p, token);\n                } else {\n                    genericStartTagInBody(p, token);\n                }\n            } else if (tn === $.OPTGROUP) {\n                optgroupStartTagInBody(p, token);\n            } else if (tn !== $.COLGROUP) {\n                genericStartTagInBody(p, token);\n            }\n\n            break;\n\n        case 9:\n            if (tn === $.PLAINTEXT) {\n                plaintextStartTagInBody(p, token);\n            } else {\n                genericStartTagInBody(p, token);\n            }\n\n            break;\n\n        case 10:\n            if (tn === $.BLOCKQUOTE || tn === $.FIGCAPTION) {\n                addressStartTagInBody(p, token);\n            } else {\n                genericStartTagInBody(p, token);\n            }\n\n            break;\n\n        default:\n            genericStartTagInBody(p, token);\n    }\n}\n\nfunction bodyEndTagInBody(p) {\n    if (p.openElements.hasInScope($.BODY)) {\n        p.insertionMode = AFTER_BODY_MODE;\n    }\n}\n\nfunction htmlEndTagInBody(p, token) {\n    if (p.openElements.hasInScope($.BODY)) {\n        p.insertionMode = AFTER_BODY_MODE;\n        p._processToken(token);\n    }\n}\n\nfunction addressEndTagInBody(p, token) {\n    const tn = token.tagName;\n\n    if (p.openElements.hasInScope(tn)) {\n        p.openElements.generateImpliedEndTags();\n        p.openElements.popUntilTagNamePopped(tn);\n    }\n}\n\nfunction formEndTagInBody(p) {\n    const inTemplate = p.openElements.tmplCount > 0;\n    const formElement = p.formElement;\n\n    if (!inTemplate) {\n        p.formElement = null;\n    }\n\n    if ((formElement || inTemplate) && p.openElements.hasInScope($.FORM)) {\n        p.openElements.generateImpliedEndTags();\n\n        if (inTemplate) {\n            p.openElements.popUntilTagNamePopped($.FORM);\n        } else {\n            p.openElements.remove(formElement);\n        }\n    }\n}\n\nfunction pEndTagInBody(p) {\n    if (!p.openElements.hasInButtonScope($.P)) {\n        p._insertFakeElement($.P);\n    }\n\n    p._closePElement();\n}\n\nfunction liEndTagInBody(p) {\n    if (p.openElements.hasInListItemScope($.LI)) {\n        p.openElements.generateImpliedEndTagsWithExclusion($.LI);\n        p.openElements.popUntilTagNamePopped($.LI);\n    }\n}\n\nfunction ddEndTagInBody(p, token) {\n    const tn = token.tagName;\n\n    if (p.openElements.hasInScope(tn)) {\n        p.openElements.generateImpliedEndTagsWithExclusion(tn);\n        p.openElements.popUntilTagNamePopped(tn);\n    }\n}\n\nfunction numberedHeaderEndTagInBody(p) {\n    if (p.openElements.hasNumberedHeaderInScope()) {\n        p.openElements.generateImpliedEndTags();\n        p.openElements.popUntilNumberedHeaderPopped();\n    }\n}\n\nfunction appletEndTagInBody(p, token) {\n    const tn = token.tagName;\n\n    if (p.openElements.hasInScope(tn)) {\n        p.openElements.generateImpliedEndTags();\n        p.openElements.popUntilTagNamePopped(tn);\n        p.activeFormattingElements.clearToLastMarker();\n    }\n}\n\nfunction brEndTagInBody(p) {\n    p._reconstructActiveFormattingElements();\n    p._insertFakeElement($.BR);\n    p.openElements.pop();\n    p.framesetOk = false;\n}\n\nfunction genericEndTagInBody(p, token) {\n    const tn = token.tagName;\n\n    for (let i = p.openElements.stackTop; i > 0; i--) {\n        const element = p.openElements.items[i];\n\n        if (p.treeAdapter.getTagName(element) === tn) {\n            p.openElements.generateImpliedEndTagsWithExclusion(tn);\n            p.openElements.popUntilElementPopped(element);\n            break;\n        }\n\n        if (p._isSpecialElement(element)) {\n            break;\n        }\n    }\n}\n\n//OPTIMIZATION: Integer comparisons are low-cost, so we can use very fast tag name length filters here.\n//It's faster than using dictionary.\nfunction endTagInBody(p, token) {\n    const tn = token.tagName;\n\n    switch (tn.length) {\n        case 1:\n            if (tn === $.A || tn === $.B || tn === $.I || tn === $.S || tn === $.U) {\n                callAdoptionAgency(p, token);\n            } else if (tn === $.P) {\n                pEndTagInBody(p, token);\n            } else {\n                genericEndTagInBody(p, token);\n            }\n\n            break;\n\n        case 2:\n            if (tn === $.DL || tn === $.UL || tn === $.OL) {\n                addressEndTagInBody(p, token);\n            } else if (tn === $.LI) {\n                liEndTagInBody(p, token);\n            } else if (tn === $.DD || tn === $.DT) {\n                ddEndTagInBody(p, token);\n            } else if (tn === $.H1 || tn === $.H2 || tn === $.H3 || tn === $.H4 || tn === $.H5 || tn === $.H6) {\n                numberedHeaderEndTagInBody(p, token);\n            } else if (tn === $.BR) {\n                brEndTagInBody(p, token);\n            } else if (tn === $.EM || tn === $.TT) {\n                callAdoptionAgency(p, token);\n            } else {\n                genericEndTagInBody(p, token);\n            }\n\n            break;\n\n        case 3:\n            if (tn === $.BIG) {\n                callAdoptionAgency(p, token);\n            } else if (tn === $.DIR || tn === $.DIV || tn === $.NAV || tn === $.PRE) {\n                addressEndTagInBody(p, token);\n            } else {\n                genericEndTagInBody(p, token);\n            }\n\n            break;\n\n        case 4:\n            if (tn === $.BODY) {\n                bodyEndTagInBody(p, token);\n            } else if (tn === $.HTML) {\n                htmlEndTagInBody(p, token);\n            } else if (tn === $.FORM) {\n                formEndTagInBody(p, token);\n            } else if (tn === $.CODE || tn === $.FONT || tn === $.NOBR) {\n                callAdoptionAgency(p, token);\n            } else if (tn === $.MAIN || tn === $.MENU) {\n                addressEndTagInBody(p, token);\n            } else {\n                genericEndTagInBody(p, token);\n            }\n\n            break;\n\n        case 5:\n            if (tn === $.ASIDE) {\n                addressEndTagInBody(p, token);\n            } else if (tn === $.SMALL) {\n                callAdoptionAgency(p, token);\n            } else {\n                genericEndTagInBody(p, token);\n            }\n\n            break;\n\n        case 6:\n            if (\n                tn === $.CENTER ||\n                tn === $.FIGURE ||\n                tn === $.FOOTER ||\n                tn === $.HEADER ||\n                tn === $.HGROUP ||\n                tn === $.DIALOG\n            ) {\n                addressEndTagInBody(p, token);\n            } else if (tn === $.APPLET || tn === $.OBJECT) {\n                appletEndTagInBody(p, token);\n            } else if (tn === $.STRIKE || tn === $.STRONG) {\n                callAdoptionAgency(p, token);\n            } else {\n                genericEndTagInBody(p, token);\n            }\n\n            break;\n\n        case 7:\n            if (\n                tn === $.ADDRESS ||\n                tn === $.ARTICLE ||\n                tn === $.DETAILS ||\n                tn === $.SECTION ||\n                tn === $.SUMMARY ||\n                tn === $.LISTING\n            ) {\n                addressEndTagInBody(p, token);\n            } else if (tn === $.MARQUEE) {\n                appletEndTagInBody(p, token);\n            } else {\n                genericEndTagInBody(p, token);\n            }\n\n            break;\n\n        case 8:\n            if (tn === $.FIELDSET) {\n                addressEndTagInBody(p, token);\n            } else if (tn === $.TEMPLATE) {\n                endTagInHead(p, token);\n            } else {\n                genericEndTagInBody(p, token);\n            }\n\n            break;\n\n        case 10:\n            if (tn === $.BLOCKQUOTE || tn === $.FIGCAPTION) {\n                addressEndTagInBody(p, token);\n            } else {\n                genericEndTagInBody(p, token);\n            }\n\n            break;\n\n        default:\n            genericEndTagInBody(p, token);\n    }\n}\n\nfunction eofInBody(p, token) {\n    if (p.tmplInsertionModeStackTop > -1) {\n        eofInTemplate(p, token);\n    } else {\n        p.stopped = true;\n    }\n}\n\n// The \"text\" insertion mode\n//------------------------------------------------------------------\nfunction endTagInText(p, token) {\n    if (token.tagName === $.SCRIPT) {\n        p.pendingScript = p.openElements.current;\n    }\n\n    p.openElements.pop();\n    p.insertionMode = p.originalInsertionMode;\n}\n\nfunction eofInText(p, token) {\n    p._err(ERR.eofInElementThatCanContainOnlyText);\n    p.openElements.pop();\n    p.insertionMode = p.originalInsertionMode;\n    p._processToken(token);\n}\n\n// The \"in table\" insertion mode\n//------------------------------------------------------------------\nfunction characterInTable(p, token) {\n    const curTn = p.openElements.currentTagName;\n\n    if (curTn === $.TABLE || curTn === $.TBODY || curTn === $.TFOOT || curTn === $.THEAD || curTn === $.TR) {\n        p.pendingCharacterTokens = [];\n        p.hasNonWhitespacePendingCharacterToken = false;\n        p.originalInsertionMode = p.insertionMode;\n        p.insertionMode = IN_TABLE_TEXT_MODE;\n        p._processToken(token);\n    } else {\n        tokenInTable(p, token);\n    }\n}\n\nfunction captionStartTagInTable(p, token) {\n    p.openElements.clearBackToTableContext();\n    p.activeFormattingElements.insertMarker();\n    p._insertElement(token, NS.HTML);\n    p.insertionMode = IN_CAPTION_MODE;\n}\n\nfunction colgroupStartTagInTable(p, token) {\n    p.openElements.clearBackToTableContext();\n    p._insertElement(token, NS.HTML);\n    p.insertionMode = IN_COLUMN_GROUP_MODE;\n}\n\nfunction colStartTagInTable(p, token) {\n    p.openElements.clearBackToTableContext();\n    p._insertFakeElement($.COLGROUP);\n    p.insertionMode = IN_COLUMN_GROUP_MODE;\n    p._processToken(token);\n}\n\nfunction tbodyStartTagInTable(p, token) {\n    p.openElements.clearBackToTableContext();\n    p._insertElement(token, NS.HTML);\n    p.insertionMode = IN_TABLE_BODY_MODE;\n}\n\nfunction tdStartTagInTable(p, token) {\n    p.openElements.clearBackToTableContext();\n    p._insertFakeElement($.TBODY);\n    p.insertionMode = IN_TABLE_BODY_MODE;\n    p._processToken(token);\n}\n\nfunction tableStartTagInTable(p, token) {\n    if (p.openElements.hasInTableScope($.TABLE)) {\n        p.openElements.popUntilTagNamePopped($.TABLE);\n        p._resetInsertionMode();\n        p._processToken(token);\n    }\n}\n\nfunction inputStartTagInTable(p, token) {\n    const inputType = Tokenizer.getTokenAttr(token, ATTRS.TYPE);\n\n    if (inputType && inputType.toLowerCase() === HIDDEN_INPUT_TYPE) {\n        p._appendElement(token, NS.HTML);\n    } else {\n        tokenInTable(p, token);\n    }\n\n    token.ackSelfClosing = true;\n}\n\nfunction formStartTagInTable(p, token) {\n    if (!p.formElement && p.openElements.tmplCount === 0) {\n        p._insertElement(token, NS.HTML);\n        p.formElement = p.openElements.current;\n        p.openElements.pop();\n    }\n}\n\nfunction startTagInTable(p, token) {\n    const tn = token.tagName;\n\n    switch (tn.length) {\n        case 2:\n            if (tn === $.TD || tn === $.TH || tn === $.TR) {\n                tdStartTagInTable(p, token);\n            } else {\n                tokenInTable(p, token);\n            }\n\n            break;\n\n        case 3:\n            if (tn === $.COL) {\n                colStartTagInTable(p, token);\n            } else {\n                tokenInTable(p, token);\n            }\n\n            break;\n\n        case 4:\n            if (tn === $.FORM) {\n                formStartTagInTable(p, token);\n            } else {\n                tokenInTable(p, token);\n            }\n\n            break;\n\n        case 5:\n            if (tn === $.TABLE) {\n                tableStartTagInTable(p, token);\n            } else if (tn === $.STYLE) {\n                startTagInHead(p, token);\n            } else if (tn === $.TBODY || tn === $.TFOOT || tn === $.THEAD) {\n                tbodyStartTagInTable(p, token);\n            } else if (tn === $.INPUT) {\n                inputStartTagInTable(p, token);\n            } else {\n                tokenInTable(p, token);\n            }\n\n            break;\n\n        case 6:\n            if (tn === $.SCRIPT) {\n                startTagInHead(p, token);\n            } else {\n                tokenInTable(p, token);\n            }\n\n            break;\n\n        case 7:\n            if (tn === $.CAPTION) {\n                captionStartTagInTable(p, token);\n            } else {\n                tokenInTable(p, token);\n            }\n\n            break;\n\n        case 8:\n            if (tn === $.COLGROUP) {\n                colgroupStartTagInTable(p, token);\n            } else if (tn === $.TEMPLATE) {\n                startTagInHead(p, token);\n            } else {\n                tokenInTable(p, token);\n            }\n\n            break;\n\n        default:\n            tokenInTable(p, token);\n    }\n}\n\nfunction endTagInTable(p, token) {\n    const tn = token.tagName;\n\n    if (tn === $.TABLE) {\n        if (p.openElements.hasInTableScope($.TABLE)) {\n            p.openElements.popUntilTagNamePopped($.TABLE);\n            p._resetInsertionMode();\n        }\n    } else if (tn === $.TEMPLATE) {\n        endTagInHead(p, token);\n    } else if (\n        tn !== $.BODY &&\n        tn !== $.CAPTION &&\n        tn !== $.COL &&\n        tn !== $.COLGROUP &&\n        tn !== $.HTML &&\n        tn !== $.TBODY &&\n        tn !== $.TD &&\n        tn !== $.TFOOT &&\n        tn !== $.TH &&\n        tn !== $.THEAD &&\n        tn !== $.TR\n    ) {\n        tokenInTable(p, token);\n    }\n}\n\nfunction tokenInTable(p, token) {\n    const savedFosterParentingState = p.fosterParentingEnabled;\n\n    p.fosterParentingEnabled = true;\n    p._processTokenInBodyMode(token);\n    p.fosterParentingEnabled = savedFosterParentingState;\n}\n\n// The \"in table text\" insertion mode\n//------------------------------------------------------------------\nfunction whitespaceCharacterInTableText(p, token) {\n    p.pendingCharacterTokens.push(token);\n}\n\nfunction characterInTableText(p, token) {\n    p.pendingCharacterTokens.push(token);\n    p.hasNonWhitespacePendingCharacterToken = true;\n}\n\nfunction tokenInTableText(p, token) {\n    let i = 0;\n\n    if (p.hasNonWhitespacePendingCharacterToken) {\n        for (; i < p.pendingCharacterTokens.length; i++) {\n            tokenInTable(p, p.pendingCharacterTokens[i]);\n        }\n    } else {\n        for (; i < p.pendingCharacterTokens.length; i++) {\n            p._insertCharacters(p.pendingCharacterTokens[i]);\n        }\n    }\n\n    p.insertionMode = p.originalInsertionMode;\n    p._processToken(token);\n}\n\n// The \"in caption\" insertion mode\n//------------------------------------------------------------------\nfunction startTagInCaption(p, token) {\n    const tn = token.tagName;\n\n    if (\n        tn === $.CAPTION ||\n        tn === $.COL ||\n        tn === $.COLGROUP ||\n        tn === $.TBODY ||\n        tn === $.TD ||\n        tn === $.TFOOT ||\n        tn === $.TH ||\n        tn === $.THEAD ||\n        tn === $.TR\n    ) {\n        if (p.openElements.hasInTableScope($.CAPTION)) {\n            p.openElements.generateImpliedEndTags();\n            p.openElements.popUntilTagNamePopped($.CAPTION);\n            p.activeFormattingElements.clearToLastMarker();\n            p.insertionMode = IN_TABLE_MODE;\n            p._processToken(token);\n        }\n    } else {\n        startTagInBody(p, token);\n    }\n}\n\nfunction endTagInCaption(p, token) {\n    const tn = token.tagName;\n\n    if (tn === $.CAPTION || tn === $.TABLE) {\n        if (p.openElements.hasInTableScope($.CAPTION)) {\n            p.openElements.generateImpliedEndTags();\n            p.openElements.popUntilTagNamePopped($.CAPTION);\n            p.activeFormattingElements.clearToLastMarker();\n            p.insertionMode = IN_TABLE_MODE;\n\n            if (tn === $.TABLE) {\n                p._processToken(token);\n            }\n        }\n    } else if (\n        tn !== $.BODY &&\n        tn !== $.COL &&\n        tn !== $.COLGROUP &&\n        tn !== $.HTML &&\n        tn !== $.TBODY &&\n        tn !== $.TD &&\n        tn !== $.TFOOT &&\n        tn !== $.TH &&\n        tn !== $.THEAD &&\n        tn !== $.TR\n    ) {\n        endTagInBody(p, token);\n    }\n}\n\n// The \"in column group\" insertion mode\n//------------------------------------------------------------------\nfunction startTagInColumnGroup(p, token) {\n    const tn = token.tagName;\n\n    if (tn === $.HTML) {\n        startTagInBody(p, token);\n    } else if (tn === $.COL) {\n        p._appendElement(token, NS.HTML);\n        token.ackSelfClosing = true;\n    } else if (tn === $.TEMPLATE) {\n        startTagInHead(p, token);\n    } else {\n        tokenInColumnGroup(p, token);\n    }\n}\n\nfunction endTagInColumnGroup(p, token) {\n    const tn = token.tagName;\n\n    if (tn === $.COLGROUP) {\n        if (p.openElements.currentTagName === $.COLGROUP) {\n            p.openElements.pop();\n            p.insertionMode = IN_TABLE_MODE;\n        }\n    } else if (tn === $.TEMPLATE) {\n        endTagInHead(p, token);\n    } else if (tn !== $.COL) {\n        tokenInColumnGroup(p, token);\n    }\n}\n\nfunction tokenInColumnGroup(p, token) {\n    if (p.openElements.currentTagName === $.COLGROUP) {\n        p.openElements.pop();\n        p.insertionMode = IN_TABLE_MODE;\n        p._processToken(token);\n    }\n}\n\n// The \"in table body\" insertion mode\n//------------------------------------------------------------------\nfunction startTagInTableBody(p, token) {\n    const tn = token.tagName;\n\n    if (tn === $.TR) {\n        p.openElements.clearBackToTableBodyContext();\n        p._insertElement(token, NS.HTML);\n        p.insertionMode = IN_ROW_MODE;\n    } else if (tn === $.TH || tn === $.TD) {\n        p.openElements.clearBackToTableBodyContext();\n        p._insertFakeElement($.TR);\n        p.insertionMode = IN_ROW_MODE;\n        p._processToken(token);\n    } else if (\n        tn === $.CAPTION ||\n        tn === $.COL ||\n        tn === $.COLGROUP ||\n        tn === $.TBODY ||\n        tn === $.TFOOT ||\n        tn === $.THEAD\n    ) {\n        if (p.openElements.hasTableBodyContextInTableScope()) {\n            p.openElements.clearBackToTableBodyContext();\n            p.openElements.pop();\n            p.insertionMode = IN_TABLE_MODE;\n            p._processToken(token);\n        }\n    } else {\n        startTagInTable(p, token);\n    }\n}\n\nfunction endTagInTableBody(p, token) {\n    const tn = token.tagName;\n\n    if (tn === $.TBODY || tn === $.TFOOT || tn === $.THEAD) {\n        if (p.openElements.hasInTableScope(tn)) {\n            p.openElements.clearBackToTableBodyContext();\n            p.openElements.pop();\n            p.insertionMode = IN_TABLE_MODE;\n        }\n    } else if (tn === $.TABLE) {\n        if (p.openElements.hasTableBodyContextInTableScope()) {\n            p.openElements.clearBackToTableBodyContext();\n            p.openElements.pop();\n            p.insertionMode = IN_TABLE_MODE;\n            p._processToken(token);\n        }\n    } else if (\n        (tn !== $.BODY && tn !== $.CAPTION && tn !== $.COL && tn !== $.COLGROUP) ||\n        (tn !== $.HTML && tn !== $.TD && tn !== $.TH && tn !== $.TR)\n    ) {\n        endTagInTable(p, token);\n    }\n}\n\n// The \"in row\" insertion mode\n//------------------------------------------------------------------\nfunction startTagInRow(p, token) {\n    const tn = token.tagName;\n\n    if (tn === $.TH || tn === $.TD) {\n        p.openElements.clearBackToTableRowContext();\n        p._insertElement(token, NS.HTML);\n        p.insertionMode = IN_CELL_MODE;\n        p.activeFormattingElements.insertMarker();\n    } else if (\n        tn === $.CAPTION ||\n        tn === $.COL ||\n        tn === $.COLGROUP ||\n        tn === $.TBODY ||\n        tn === $.TFOOT ||\n        tn === $.THEAD ||\n        tn === $.TR\n    ) {\n        if (p.openElements.hasInTableScope($.TR)) {\n            p.openElements.clearBackToTableRowContext();\n            p.openElements.pop();\n            p.insertionMode = IN_TABLE_BODY_MODE;\n            p._processToken(token);\n        }\n    } else {\n        startTagInTable(p, token);\n    }\n}\n\nfunction endTagInRow(p, token) {\n    const tn = token.tagName;\n\n    if (tn === $.TR) {\n        if (p.openElements.hasInTableScope($.TR)) {\n            p.openElements.clearBackToTableRowContext();\n            p.openElements.pop();\n            p.insertionMode = IN_TABLE_BODY_MODE;\n        }\n    } else if (tn === $.TABLE) {\n        if (p.openElements.hasInTableScope($.TR)) {\n            p.openElements.clearBackToTableRowContext();\n            p.openElements.pop();\n            p.insertionMode = IN_TABLE_BODY_MODE;\n            p._processToken(token);\n        }\n    } else if (tn === $.TBODY || tn === $.TFOOT || tn === $.THEAD) {\n        if (p.openElements.hasInTableScope(tn) || p.openElements.hasInTableScope($.TR)) {\n            p.openElements.clearBackToTableRowContext();\n            p.openElements.pop();\n            p.insertionMode = IN_TABLE_BODY_MODE;\n            p._processToken(token);\n        }\n    } else if (\n        (tn !== $.BODY && tn !== $.CAPTION && tn !== $.COL && tn !== $.COLGROUP) ||\n        (tn !== $.HTML && tn !== $.TD && tn !== $.TH)\n    ) {\n        endTagInTable(p, token);\n    }\n}\n\n// The \"in cell\" insertion mode\n//------------------------------------------------------------------\nfunction startTagInCell(p, token) {\n    const tn = token.tagName;\n\n    if (\n        tn === $.CAPTION ||\n        tn === $.COL ||\n        tn === $.COLGROUP ||\n        tn === $.TBODY ||\n        tn === $.TD ||\n        tn === $.TFOOT ||\n        tn === $.TH ||\n        tn === $.THEAD ||\n        tn === $.TR\n    ) {\n        if (p.openElements.hasInTableScope($.TD) || p.openElements.hasInTableScope($.TH)) {\n            p._closeTableCell();\n            p._processToken(token);\n        }\n    } else {\n        startTagInBody(p, token);\n    }\n}\n\nfunction endTagInCell(p, token) {\n    const tn = token.tagName;\n\n    if (tn === $.TD || tn === $.TH) {\n        if (p.openElements.hasInTableScope(tn)) {\n            p.openElements.generateImpliedEndTags();\n            p.openElements.popUntilTagNamePopped(tn);\n            p.activeFormattingElements.clearToLastMarker();\n            p.insertionMode = IN_ROW_MODE;\n        }\n    } else if (tn === $.TABLE || tn === $.TBODY || tn === $.TFOOT || tn === $.THEAD || tn === $.TR) {\n        if (p.openElements.hasInTableScope(tn)) {\n            p._closeTableCell();\n            p._processToken(token);\n        }\n    } else if (tn !== $.BODY && tn !== $.CAPTION && tn !== $.COL && tn !== $.COLGROUP && tn !== $.HTML) {\n        endTagInBody(p, token);\n    }\n}\n\n// The \"in select\" insertion mode\n//------------------------------------------------------------------\nfunction startTagInSelect(p, token) {\n    const tn = token.tagName;\n\n    if (tn === $.HTML) {\n        startTagInBody(p, token);\n    } else if (tn === $.OPTION) {\n        if (p.openElements.currentTagName === $.OPTION) {\n            p.openElements.pop();\n        }\n\n        p._insertElement(token, NS.HTML);\n    } else if (tn === $.OPTGROUP) {\n        if (p.openElements.currentTagName === $.OPTION) {\n            p.openElements.pop();\n        }\n\n        if (p.openElements.currentTagName === $.OPTGROUP) {\n            p.openElements.pop();\n        }\n\n        p._insertElement(token, NS.HTML);\n    } else if (tn === $.INPUT || tn === $.KEYGEN || tn === $.TEXTAREA || tn === $.SELECT) {\n        if (p.openElements.hasInSelectScope($.SELECT)) {\n            p.openElements.popUntilTagNamePopped($.SELECT);\n            p._resetInsertionMode();\n\n            if (tn !== $.SELECT) {\n                p._processToken(token);\n            }\n        }\n    } else if (tn === $.SCRIPT || tn === $.TEMPLATE) {\n        startTagInHead(p, token);\n    }\n}\n\nfunction endTagInSelect(p, token) {\n    const tn = token.tagName;\n\n    if (tn === $.OPTGROUP) {\n        const prevOpenElement = p.openElements.items[p.openElements.stackTop - 1];\n        const prevOpenElementTn = prevOpenElement && p.treeAdapter.getTagName(prevOpenElement);\n\n        if (p.openElements.currentTagName === $.OPTION && prevOpenElementTn === $.OPTGROUP) {\n            p.openElements.pop();\n        }\n\n        if (p.openElements.currentTagName === $.OPTGROUP) {\n            p.openElements.pop();\n        }\n    } else if (tn === $.OPTION) {\n        if (p.openElements.currentTagName === $.OPTION) {\n            p.openElements.pop();\n        }\n    } else if (tn === $.SELECT && p.openElements.hasInSelectScope($.SELECT)) {\n        p.openElements.popUntilTagNamePopped($.SELECT);\n        p._resetInsertionMode();\n    } else if (tn === $.TEMPLATE) {\n        endTagInHead(p, token);\n    }\n}\n\n//12.2.5.4.17 The \"in select in table\" insertion mode\n//------------------------------------------------------------------\nfunction startTagInSelectInTable(p, token) {\n    const tn = token.tagName;\n\n    if (\n        tn === $.CAPTION ||\n        tn === $.TABLE ||\n        tn === $.TBODY ||\n        tn === $.TFOOT ||\n        tn === $.THEAD ||\n        tn === $.TR ||\n        tn === $.TD ||\n        tn === $.TH\n    ) {\n        p.openElements.popUntilTagNamePopped($.SELECT);\n        p._resetInsertionMode();\n        p._processToken(token);\n    } else {\n        startTagInSelect(p, token);\n    }\n}\n\nfunction endTagInSelectInTable(p, token) {\n    const tn = token.tagName;\n\n    if (\n        tn === $.CAPTION ||\n        tn === $.TABLE ||\n        tn === $.TBODY ||\n        tn === $.TFOOT ||\n        tn === $.THEAD ||\n        tn === $.TR ||\n        tn === $.TD ||\n        tn === $.TH\n    ) {\n        if (p.openElements.hasInTableScope(tn)) {\n            p.openElements.popUntilTagNamePopped($.SELECT);\n            p._resetInsertionMode();\n            p._processToken(token);\n        }\n    } else {\n        endTagInSelect(p, token);\n    }\n}\n\n// The \"in template\" insertion mode\n//------------------------------------------------------------------\nfunction startTagInTemplate(p, token) {\n    const tn = token.tagName;\n\n    if (\n        tn === $.BASE ||\n        tn === $.BASEFONT ||\n        tn === $.BGSOUND ||\n        tn === $.LINK ||\n        tn === $.META ||\n        tn === $.NOFRAMES ||\n        tn === $.SCRIPT ||\n        tn === $.STYLE ||\n        tn === $.TEMPLATE ||\n        tn === $.TITLE\n    ) {\n        startTagInHead(p, token);\n    } else {\n        const newInsertionMode = TEMPLATE_INSERTION_MODE_SWITCH_MAP[tn] || IN_BODY_MODE;\n\n        p._popTmplInsertionMode();\n        p._pushTmplInsertionMode(newInsertionMode);\n        p.insertionMode = newInsertionMode;\n        p._processToken(token);\n    }\n}\n\nfunction endTagInTemplate(p, token) {\n    if (token.tagName === $.TEMPLATE) {\n        endTagInHead(p, token);\n    }\n}\n\nfunction eofInTemplate(p, token) {\n    if (p.openElements.tmplCount > 0) {\n        p.openElements.popUntilTagNamePopped($.TEMPLATE);\n        p.activeFormattingElements.clearToLastMarker();\n        p._popTmplInsertionMode();\n        p._resetInsertionMode();\n        p._processToken(token);\n    } else {\n        p.stopped = true;\n    }\n}\n\n// The \"after body\" insertion mode\n//------------------------------------------------------------------\nfunction startTagAfterBody(p, token) {\n    if (token.tagName === $.HTML) {\n        startTagInBody(p, token);\n    } else {\n        tokenAfterBody(p, token);\n    }\n}\n\nfunction endTagAfterBody(p, token) {\n    if (token.tagName === $.HTML) {\n        if (!p.fragmentContext) {\n            p.insertionMode = AFTER_AFTER_BODY_MODE;\n        }\n    } else {\n        tokenAfterBody(p, token);\n    }\n}\n\nfunction tokenAfterBody(p, token) {\n    p.insertionMode = IN_BODY_MODE;\n    p._processToken(token);\n}\n\n// The \"in frameset\" insertion mode\n//------------------------------------------------------------------\nfunction startTagInFrameset(p, token) {\n    const tn = token.tagName;\n\n    if (tn === $.HTML) {\n        startTagInBody(p, token);\n    } else if (tn === $.FRAMESET) {\n        p._insertElement(token, NS.HTML);\n    } else if (tn === $.FRAME) {\n        p._appendElement(token, NS.HTML);\n        token.ackSelfClosing = true;\n    } else if (tn === $.NOFRAMES) {\n        startTagInHead(p, token);\n    }\n}\n\nfunction endTagInFrameset(p, token) {\n    if (token.tagName === $.FRAMESET && !p.openElements.isRootHtmlElementCurrent()) {\n        p.openElements.pop();\n\n        if (!p.fragmentContext && p.openElements.currentTagName !== $.FRAMESET) {\n            p.insertionMode = AFTER_FRAMESET_MODE;\n        }\n    }\n}\n\n// The \"after frameset\" insertion mode\n//------------------------------------------------------------------\nfunction startTagAfterFrameset(p, token) {\n    const tn = token.tagName;\n\n    if (tn === $.HTML) {\n        startTagInBody(p, token);\n    } else if (tn === $.NOFRAMES) {\n        startTagInHead(p, token);\n    }\n}\n\nfunction endTagAfterFrameset(p, token) {\n    if (token.tagName === $.HTML) {\n        p.insertionMode = AFTER_AFTER_FRAMESET_MODE;\n    }\n}\n\n// The \"after after body\" insertion mode\n//------------------------------------------------------------------\nfunction startTagAfterAfterBody(p, token) {\n    if (token.tagName === $.HTML) {\n        startTagInBody(p, token);\n    } else {\n        tokenAfterAfterBody(p, token);\n    }\n}\n\nfunction tokenAfterAfterBody(p, token) {\n    p.insertionMode = IN_BODY_MODE;\n    p._processToken(token);\n}\n\n// The \"after after frameset\" insertion mode\n//------------------------------------------------------------------\nfunction startTagAfterAfterFrameset(p, token) {\n    const tn = token.tagName;\n\n    if (tn === $.HTML) {\n        startTagInBody(p, token);\n    } else if (tn === $.NOFRAMES) {\n        startTagInHead(p, token);\n    }\n}\n\n// The rules for parsing tokens in foreign content\n//------------------------------------------------------------------\nfunction nullCharacterInForeignContent(p, token) {\n    token.chars = unicode.REPLACEMENT_CHARACTER;\n    p._insertCharacters(token);\n}\n\nfunction characterInForeignContent(p, token) {\n    p._insertCharacters(token);\n    p.framesetOk = false;\n}\n\nfunction startTagInForeignContent(p, token) {\n    if (foreignContent.causesExit(token) && !p.fragmentContext) {\n        while (\n            p.treeAdapter.getNamespaceURI(p.openElements.current) !== NS.HTML &&\n            !p._isIntegrationPoint(p.openElements.current)\n        ) {\n            p.openElements.pop();\n        }\n\n        p._processToken(token);\n    } else {\n        const current = p._getAdjustedCurrentElement();\n        const currentNs = p.treeAdapter.getNamespaceURI(current);\n\n        if (currentNs === NS.MATHML) {\n            foreignContent.adjustTokenMathMLAttrs(token);\n        } else if (currentNs === NS.SVG) {\n            foreignContent.adjustTokenSVGTagName(token);\n            foreignContent.adjustTokenSVGAttrs(token);\n        }\n\n        foreignContent.adjustTokenXMLAttrs(token);\n\n        if (token.selfClosing) {\n            p._appendElement(token, currentNs);\n        } else {\n            p._insertElement(token, currentNs);\n        }\n\n        token.ackSelfClosing = true;\n    }\n}\n\nfunction endTagInForeignContent(p, token) {\n    for (let i = p.openElements.stackTop; i > 0; i--) {\n        const element = p.openElements.items[i];\n\n        if (p.treeAdapter.getNamespaceURI(element) === NS.HTML) {\n            p._processToken(token);\n            break;\n        }\n\n        if (p.treeAdapter.getTagName(element).toLowerCase() === token.tagName) {\n            p.openElements.popUntilElementPopped(element);\n            break;\n        }\n    }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}