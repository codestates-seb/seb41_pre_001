{"ast":null,"code":"export const getURLParameters = url => (url.match(/([^?=&]+)(=([^&]*))/g) || []).reduce((a, v) => (a[v.slice(0, v.indexOf('='))] = v.slice(v.indexOf('=') + 1), a), {});\nexport const prevChild = function () {\n  let data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  let index = arguments.length > 1 ? arguments[1] : undefined;\n  let i = index;\n  while (i > -1) {\n    i--;\n    if (!data[i]) return;\n    if (data[i] && data[i].value && data[i].value.replace(/(\\n|\\s)/g, '') !== '' || data[i].type !== 'text') {\n      if (!/^rehype:/.test(data[i].value) || data[i].type !== 'comment') return;\n      return data[i];\n    }\n  }\n  return;\n};\nexport const nextChild = function () {\n  let data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  let index = arguments.length > 1 ? arguments[1] : undefined;\n  let tagName = arguments.length > 2 ? arguments[2] : undefined;\n  let codeBlockParames = arguments.length > 3 ? arguments[3] : undefined;\n  let i = index;\n  while (i < data.length) {\n    i++;\n    if (tagName) {\n      const element = data[i];\n      if (element && element.value && element.value.replace(/(\\n|\\s)/g, '') !== '' || data[i] && data[i].type === 'element') {\n        return element.tagName === tagName ? element : undefined;\n      }\n    } else {\n      const element = data[i];\n      if (!element || element.type === 'element') return;\n      if (element.type === 'text' && element.value.replace(/(\\n|\\s)/g, '') !== '') return;\n      if (/^(comment|raw)$/ig.test(element?.type)) {\n        if (!/^rehype:/.test(element.value?.replace(/^(\\s+)?<!--(.*?)-->/, '$2') || '')) {\n          return;\n        }\n        ;\n        if (codeBlockParames) {\n          const nextNode = nextChild(data, i, 'pre', codeBlockParames);\n          if (nextNode) return;\n          element.value = element.value?.replace(/^(\\n|\\s)+/, '');\n          return element;\n        } else {\n          element.value = element.value?.replace(/^(\\n|\\s)+/, '');\n          return element;\n        }\n      }\n    }\n  }\n  return;\n};\n/**\n * 获取代码注视的位置\n * @param data 数据\n * @param index 当前数据所在的位置\n * @returns 返回 当前参数数据 Object，`{}`\n */\nexport const getCommentObject = _ref => {\n  let {\n    value = ''\n  } = _ref;\n  const param = getURLParameters(value.replace(/^<!--(.*?)-->/, '$1').replace(/^rehype:/, ''));\n  Object.keys(param).forEach(keyName => {\n    if (param[keyName] === 'true') {\n      param[keyName] = true;\n    }\n    if (param[keyName] === 'false') {\n      param[keyName] = false;\n    }\n    if (typeof param[keyName] === 'string' && !/^0/.test(param[keyName]) && !isNaN(+param[keyName])) {\n      param[keyName] = +param[keyName];\n    }\n  });\n  return param;\n};\nexport const propertiesHandle = (defaultAttrs, attrs, type) => {\n  if (type === 'string') {\n    return {\n      ...defaultAttrs,\n      'data-config': JSON.stringify({\n        ...attrs,\n        rehyp: true\n      })\n    };\n  } else if (type === 'attr') {\n    return {\n      ...defaultAttrs,\n      ...attrs\n    };\n  }\n  return {\n    ...defaultAttrs,\n    'data-config': {\n      ...attrs,\n      rehyp: true\n    }\n  };\n};","map":{"version":3,"mappings":"AAGA,OAAO,MAAMA,gBAAgB,GAAIC,GAAW,IAC5C,CAACA,GAAG,CAACC,KAAK,CAAC,sBAAsB,CAAC,IAAI,EAAE,EAAEC,MAAM,CAC9C,CAACC,CAAkC,EAAEC,CAAS,MAC3CD,CAAC,CAACC,CAAC,CAACC,KAAK,CAAC,CAAC,EAAED,CAAC,CAACE,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,GAAGF,CAAC,CAACC,KAAK,CAACD,CAAC,CAACE,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAAGH,CAAC,CACjE,EACD,EAAE,CACH;AAED,OAAO,MAAMI,SAAS,GAAG,YAA6D;EAAA,IAA5DC,2EAAkB,EAAE;EAAA,IAAEC,KAAa;EAC3D,IAAIC,CAAC,GAAGD,KAAK;EACb,OAAOC,CAAC,GAAG,CAAC,CAAC,EAAE;IACbA,CAAC,EAAE;IACH,IAAI,CAACF,IAAI,CAACE,CAAC,CAAC,EAAE;IACd,IAAKF,IAAI,CAACE,CAAC,CAAC,IAAIF,IAAI,CAACE,CAAC,CAAC,CAACC,KAAK,IAAKH,IAAI,CAACE,CAAC,CAAC,CAACC,KAAgB,CAACC,OAAO,CAAC,UAAU,EAAE,EAAE,CAAC,KAAK,EAAE,IAAKJ,IAAI,CAACE,CAAC,CAAC,CAACG,IAAI,KAAK,MAAM,EAAE;MACrH,IAAI,CAAC,UAAU,CAACC,IAAI,CAACN,IAAI,CAACE,CAAC,CAAC,CAACC,KAAe,CAAC,IAAKH,IAAI,CAACE,CAAC,CAAC,CAACG,IAAe,KAAK,SAAS,EAAE;MACzF,OAAOL,IAAI,CAACE,CAAC,CAAuB;;;EAGxC;AACF,CAAC;AAED,OAAO,MAAMK,SAAS,GAAG,YAAyI;EAAA,IAAxIP,2EAAyC,EAAE;EAAA,IAAEC,KAAa;EAAA,IAAEO,OAAgB;EAAA,IAAEC,gBAA0B;EAChI,IAAIP,CAAC,GAAGD,KAAK;EACb,OAAOC,CAAC,GAAGF,IAAI,CAACU,MAAM,EAAE;IACtBR,CAAC,EAAE;IACH,IAAIM,OAAO,EAAE;MACX,MAAMG,OAAO,GAAGX,IAAI,CAACE,CAAC,CAAsB;MAC5C,IAAIS,OAAO,IAAIA,OAAO,CAACR,KAAK,IAAKQ,OAAO,CAACR,KAAgB,CAACC,OAAO,CAAC,UAAU,EAAE,EAAE,CAAC,KAAK,EAAE,IAAIJ,IAAI,CAACE,CAAC,CAAC,IAAKF,IAAI,CAACE,CAAC,CAAC,CAACG,IAAe,KAAK,SAAS,EAAE;QAC7I,OAAOM,OAAO,CAACH,OAAO,KAAKA,OAAO,GAAGG,OAAO,GAAGC,SAAS;;KAE3D,MAAM;MACL,MAAMD,OAAO,GAAGX,IAAI,CAACE,CAAC,CAA6B;MACnD,IAAI,CAACS,OAAO,IAAIA,OAAO,CAACN,IAAI,KAAK,SAAS,EAAE;MAC5C,IAAIM,OAAO,CAACN,IAAI,KAAK,MAAM,IAAIM,OAAO,CAACR,KAAK,CAACC,OAAO,CAAC,UAAU,EAAE,EAAE,CAAC,KAAK,EAAE,EAAE;MAC7E,IAAI,mBAAmB,CAACE,IAAI,CAACK,OAAO,EAAEN,IAAI,CAAC,EAAE;QAC3C,IAAI,CAAC,UAAU,CAACC,IAAI,CAACK,OAAO,CAACR,KAAK,EAAEC,OAAO,CAAC,qBAAqB,EAAE,IAAI,CAAC,IAAI,EAAE,CAAC,EAAE;UAC/E;;QACD;QACD,IAAIK,gBAAgB,EAAE;UACpB,MAAMI,QAAQ,GAAGN,SAAS,CAACP,IAAI,EAAEE,CAAC,EAAE,KAAK,EAAEO,gBAAgB,CAAC;UAC5D,IAAII,QAAQ,EAAE;UACdF,OAAO,CAACR,KAAK,GAAGQ,OAAO,CAACR,KAAK,EAAEC,OAAO,CAAC,WAAW,EAAE,EAAE,CAAC;UACvD,OAAOO,OAAO;SACf,MAAM;UACLA,OAAO,CAACR,KAAK,GAAGQ,OAAO,CAACR,KAAK,EAAEC,OAAO,CAAC,WAAW,EAAE,EAAE,CAAC;UACvD,OAAOO,OAAO;;;;;EAKtB;AACF,CAAC;AAED;;;;;;AAMA,OAAO,MAAMG,gBAAgB,GAAG,QAAwC;EAAA,IAAvC;IAAEX,KAAK,GAAG;EAAE,CAAW;EACtD,MAAMY,KAAK,GAAGxB,gBAAgB,CAACY,KAAK,CAACC,OAAO,CAAC,eAAe,EAAE,IAAI,CAAC,CAACA,OAAO,CAAC,UAAU,EAAE,EAAE,CAAC,CAAC;EAC5FY,MAAM,CAACC,IAAI,CAACF,KAAK,CAAC,CAACG,OAAO,CAAEC,OAAe,IAAI;IAC7C,IAAIJ,KAAK,CAACI,OAAO,CAAC,KAAK,MAAM,EAAE;MAC7BJ,KAAK,CAACI,OAAO,CAAC,GAAG,IAAI;;IAEvB,IAAIJ,KAAK,CAACI,OAAO,CAAC,KAAK,OAAO,EAAE;MAC9BJ,KAAK,CAACI,OAAO,CAAC,GAAG,KAAK;;IAExB,IAAI,OAAOJ,KAAK,CAACI,OAAO,CAAC,KAAK,QAAQ,IAAI,CAAC,IAAI,CAACb,IAAI,CAACS,KAAK,CAACI,OAAO,CAAW,CAAC,IAAI,CAACC,KAAK,CAAC,CAACL,KAAK,CAACI,OAAO,CAAC,CAAC,EAAE;MACzGJ,KAAK,CAACI,OAAO,CAAC,GAAG,CAACJ,KAAK,CAACI,OAAO,CAAC;;EAEpC,CAAC,CAAC;EACF,OAAOJ,KAAK;AACd,CAAC;AAMD,OAAO,MAAMM,gBAAgB,GAAG,CAACC,YAAgC,EAAEC,KAAkB,EAAElB,IAAuC,KAA6B;EACzJ,IAAIA,IAAI,KAAK,QAAQ,EAAE;IACrB,OAAO;MAAE,GAAGiB,YAAY;MAAE,aAAa,EAAEE,IAAI,CAACC,SAAS,CAAC;QAAE,GAAGF,KAAK;QAAEG,KAAK,EAAE;MAAI,CAAE;IAAC,CAAC;GACpF,MAAM,IAAIrB,IAAI,KAAK,MAAM,EAAE;IAC1B,OAAO;MAAE,GAAGiB,YAAY;MAAE,GAAGC;IAAK,CAAC;;EAErC,OAAO;IAAE,GAAGD,YAAY;IAAE,aAAa,EAAE;MAAE,GAAGC,KAAK;MAAEG,KAAK,EAAE;IAAI;EAAE,CAAC;AACrE,CAAC","names":["getURLParameters","url","match","reduce","a","v","slice","indexOf","prevChild","data","index","i","value","replace","type","test","nextChild","tagName","codeBlockParames","length","element","undefined","nextNode","getCommentObject","param","Object","keys","forEach","keyName","isNaN","propertiesHandle","defaultAttrs","attrs","JSON","stringify","rehyp"],"sources":["/home/kty/workspace/seb41_pre_001/client/node_modules/rehype-attr/src/utils.ts"],"sourcesContent":["import { Element, Comment, Literal, ElementContent, RootContent, Properties } from 'hast';\nimport { RehypeAttrsOptions } from './';\n\nexport const getURLParameters = (url: string): Record<string, string | number | boolean> =>\n(url.match(/([^?=&]+)(=([^&]*))/g) || []).reduce(\n  (a: Record<string, string | number>, v: string) => (\n    (a[v.slice(0, v.indexOf('='))] = v.slice(v.indexOf('=') + 1)), a\n  ),\n  {},\n);\n\nexport const prevChild = (data: Literal[] = [], index: number): Comment | undefined => {\n  let i = index;\n  while (i > -1) {\n    i--;\n    if (!data[i]) return\n    if ((data[i] && data[i].value && (data[i].value as string).replace(/(\\n|\\s)/g, '') !== '') || data[i].type !== 'text') {\n      if (!/^rehype:/.test(data[i].value as string) || (data[i].type as string) !== 'comment') return;\n      return data[i] as unknown as Comment;\n    }\n  }\n  return;\n}\n\nexport const nextChild = (data: RootContent[] | ElementContent[] = [], index: number, tagName?: string, codeBlockParames?: boolean): ElementContent | undefined => {\n  let i = index;\n  while (i < data.length) {\n    i++;\n    if (tagName) {\n      const element = data[i] as Literal & Element;\n      if (element && element.value && (element.value as string).replace(/(\\n|\\s)/g, '') !== '' || data[i] && (data[i].type as string) === 'element') {\n        return element.tagName === tagName ? element : undefined\n      }\n    } else {\n      const element = data[i] as ElementContent & Literal;\n      if (!element || element.type === 'element') return;\n      if (element.type === 'text' && element.value.replace(/(\\n|\\s)/g, '') !== '') return;\n      if (/^(comment|raw)$/ig.test(element?.type)) {\n        if (!/^rehype:/.test(element.value?.replace(/^(\\s+)?<!--(.*?)-->/, '$2') || '')) {\n          return\n        };\n        if (codeBlockParames) {\n          const nextNode = nextChild(data, i, 'pre', codeBlockParames)\n          if (nextNode) return;\n          element.value = element.value?.replace(/^(\\n|\\s)+/, '')\n          return element;\n        } else {\n          element.value = element.value?.replace(/^(\\n|\\s)+/, '')\n          return element;\n        }\n      }\n    }\n  }\n  return\n}\n\n/**\n * 获取代码注视的位置\n * @param data 数据\n * @param index 当前数据所在的位置\n * @returns 返回 当前参数数据 Object，`{}`\n */\nexport const getCommentObject = ({ value = '' }: Comment): Properties => {\n  const param = getURLParameters(value.replace(/^<!--(.*?)-->/, '$1').replace(/^rehype:/, ''));\n  Object.keys(param).forEach((keyName: string) => {\n    if (param[keyName] === 'true') {\n      param[keyName] = true;\n    }\n    if (param[keyName] === 'false') {\n      param[keyName] = false;\n    }\n    if (typeof param[keyName] === 'string' && !/^0/.test(param[keyName] as string) && !isNaN(+param[keyName])) {\n      param[keyName] = +param[keyName];\n    }\n  })\n  return param;\n}\n\nexport type DataConfig = {\n  'data-config': Properties\n}\n\nexport const propertiesHandle = (defaultAttrs?: Properties | null, attrs?: Properties, type?: RehypeAttrsOptions['properties']): Properties | DataConfig => {\n  if (type === 'string') {\n    return { ...defaultAttrs, 'data-config': JSON.stringify({ ...attrs, rehyp: true })}\n  } else if (type === 'attr') {\n    return { ...defaultAttrs, ...attrs}\n  }\n  return { ...defaultAttrs, 'data-config': { ...attrs, rehyp: true }}\n}"]},"metadata":{},"sourceType":"module","externalDependencies":[]}