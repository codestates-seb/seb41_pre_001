{
  "version": 3,
  "names": [
    "React",
    "useContext",
    "useEffect",
    "EditorContext",
    "TextAreaCommandOrchestrator",
    "handleKeyDown",
    "shortcuts",
    "Textarea",
    "props",
    "prefixCls",
    "onChange",
    "other",
    "markdown",
    "commands",
    "fullscreen",
    "preview",
    "highlightEnable",
    "extraCommands",
    "tabSize",
    "defaultTabEnable",
    "dispatch",
    "textRef",
    "useRef",
    "executeRef",
    "statesRef",
    "current",
    "commandOrchestrator",
    "textarea",
    "onKeyDown",
    "e",
    "addEventListener",
    "removeEventListener",
    "className",
    "target",
    "value"
  ],
  "sources": [
    "../../../src/components/TextArea/Textarea.tsx"
  ],
  "sourcesContent": [
    "import React, { useContext, useEffect } from 'react';\nimport { IProps } from '../../Editor';\nimport { EditorContext, ExecuteCommandState } from '../../Context';\nimport { TextAreaCommandOrchestrator } from '../../commands';\nimport handleKeyDown from './handleKeyDown';\nimport shortcuts from './shortcuts';\nimport './index.less';\n\nexport interface TextAreaProps extends Omit<React.TextareaHTMLAttributes<HTMLTextAreaElement>, 'value'>, IProps {}\n\nexport default function Textarea(props: TextAreaProps) {\n  const { prefixCls, onChange, ...other } = props;\n  const {\n    markdown,\n    commands,\n    fullscreen,\n    preview,\n    highlightEnable,\n    extraCommands,\n    tabSize,\n    defaultTabEnable,\n    dispatch,\n  } = useContext(EditorContext);\n  const textRef = React.useRef<HTMLTextAreaElement>(null);\n  const executeRef = React.useRef<TextAreaCommandOrchestrator>();\n  const statesRef = React.useRef<ExecuteCommandState>({ fullscreen, preview });\n\n  useEffect(() => {\n    statesRef.current = { fullscreen, preview, highlightEnable };\n  }, [fullscreen, preview, highlightEnable]);\n\n  useEffect(() => {\n    if (textRef.current && dispatch) {\n      const commandOrchestrator = new TextAreaCommandOrchestrator(textRef.current);\n      executeRef.current = commandOrchestrator;\n      dispatch({ textarea: textRef.current, commandOrchestrator });\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const onKeyDown = (e: KeyboardEvent | React.KeyboardEvent<HTMLTextAreaElement>) => {\n    handleKeyDown(e, tabSize, defaultTabEnable);\n    shortcuts(e, [...(commands || []), ...(extraCommands || [])], executeRef.current, dispatch, statesRef.current);\n  };\n  useEffect(() => {\n    if (textRef.current) {\n      textRef.current.addEventListener('keydown', onKeyDown);\n    }\n    return () => {\n      if (textRef.current) {\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        textRef.current.removeEventListener('keydown', onKeyDown);\n      }\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  return (\n    <textarea\n      autoComplete=\"off\"\n      autoCorrect=\"off\"\n      autoCapitalize=\"off\"\n      spellCheck={false}\n      {...other}\n      ref={textRef}\n      className={`${prefixCls}-text-input ${other.className ? other.className : ''}`}\n      value={markdown}\n      onChange={(e) => {\n        dispatch && dispatch({ markdown: e.target.value });\n        onChange && onChange(e);\n      }}\n    />\n  );\n}\n"
  ],
  "mappings": ";;;AAAA,OAAOA,KAAK,IAAIC,UAAU,EAAEC,SAAS,QAAQ,OAAO;AAEpD,SAASC,aAAa,QAA6B,eAAe;AAClE,SAASC,2BAA2B,QAAQ,gBAAgB;AAC5D,OAAOC,aAAa,MAAM,iBAAiB;AAC3C,OAAOC,SAAS,MAAM,aAAa;AACnC;AAAsB;AAItB,eAAe,SAASC,QAAQ,CAACC,KAAoB,EAAE;EACrD,IAAM;MAAEC,SAAS;MAAEC,QAAQ,EAARA;IAAmB,CAAC,GAAGF,KAAK;IAAfG,KAAK,iCAAKH,KAAK;EAC/C,IAAM;IACJI,QAAQ;IACRC,QAAQ;IACRC,UAAU;IACVC,OAAO;IACPC,eAAe;IACfC,aAAa;IACbC,OAAO;IACPC,gBAAgB;IAChBC;EACF,CAAC,GAAGnB,UAAU,CAACE,aAAa,CAAC;EAC7B,IAAMkB,OAAO,GAAGrB,KAAK,CAACsB,MAAM,CAAsB,IAAI,CAAC;EACvD,IAAMC,UAAU,GAAGvB,KAAK,CAACsB,MAAM,EAA+B;EAC9D,IAAME,SAAS,GAAGxB,KAAK,CAACsB,MAAM,CAAsB;IAAER,UAAU;IAAEC;EAAQ,CAAC,CAAC;EAE5Eb,SAAS,CAAC,MAAM;IACdsB,SAAS,CAACC,OAAO,GAAG;MAAEX,UAAU;MAAEC,OAAO;MAAEC;IAAgB,CAAC;EAC9D,CAAC,EAAE,CAACF,UAAU,EAAEC,OAAO,EAAEC,eAAe,CAAC,CAAC;EAE1Cd,SAAS,CAAC,MAAM;IACd,IAAImB,OAAO,CAACI,OAAO,IAAIL,QAAQ,EAAE;MAC/B,IAAMM,mBAAmB,GAAG,IAAItB,2BAA2B,CAACiB,OAAO,CAACI,OAAO,CAAC;MAC5EF,UAAU,CAACE,OAAO,GAAGC,mBAAmB;MACxCN,QAAQ,CAAC;QAAEO,QAAQ,EAAEN,OAAO,CAACI,OAAO;QAAEC;MAAoB,CAAC,CAAC;IAC9D;IACA;EACF,CAAC,EAAE,EAAE,CAAC;EAEN,IAAME,SAAS,GAAIC,CAA2D,IAAK;IACjFxB,aAAa,CAACwB,CAAC,EAAEX,OAAO,EAAEC,gBAAgB,CAAC;IAC3Cb,SAAS,CAACuB,CAAC,EAAE,CAAC,IAAIhB,QAAQ,IAAI,EAAE,CAAC,EAAE,IAAII,aAAa,IAAI,EAAE,CAAC,CAAC,EAAEM,UAAU,CAACE,OAAO,EAAEL,QAAQ,EAAEI,SAAS,CAACC,OAAO,CAAC;EAChH,CAAC;EACDvB,SAAS,CAAC,MAAM;IACd,IAAImB,OAAO,CAACI,OAAO,EAAE;MACnBJ,OAAO,CAACI,OAAO,CAACK,gBAAgB,CAAC,SAAS,EAAEF,SAAS,CAAC;IACxD;IACA,OAAO,MAAM;MACX,IAAIP,OAAO,CAACI,OAAO,EAAE;QACnB;QACAJ,OAAO,CAACI,OAAO,CAACM,mBAAmB,CAAC,SAAS,EAAEH,SAAS,CAAC;MAC3D;IACF,CAAC;IACD;EACF,CAAC,EAAE,EAAE,CAAC;EAEN,oBACE;IACE,YAAY,EAAC,KAAK;IAClB,WAAW,EAAC,KAAK;IACjB,cAAc,EAAC,KAAK;IACpB,UAAU,EAAE;EAAM,GACdjB,KAAK;IACT,GAAG,EAAEU,OAAQ;IACb,SAAS,EAAKZ,SAAS,qBAAeE,KAAK,CAACqB,SAAS,GAAGrB,KAAK,CAACqB,SAAS,GAAG,EAAE,CAAG;IAC/E,KAAK,EAAEpB,QAAS;IAChB,QAAQ,EAAGiB,CAAC,IAAK;MACfT,QAAQ,IAAIA,QAAQ,CAAC;QAAER,QAAQ,EAAEiB,CAAC,CAACI,MAAM,CAACC;MAAM,CAAC,CAAC;MAClDxB,SAAQ,IAAIA,SAAQ,CAACmB,CAAC,CAAC;IACzB;EAAE,GACF;AAEN"
}